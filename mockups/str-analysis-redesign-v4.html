<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STR Analysis Redesign V3 - Optional Financing</title>
    <style>
        :root {
            --primary-blue: #3B82F6;
            --success-green: #10B981;
            --danger-red: #EF4444;
            --warning-yellow: #F59E0B;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --gray-900: #111827;
            --gradient-primary: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            --gradient-success: linear-gradient(135deg, #10B981 0%, #065F46 100%);
            --gradient-danger: linear-gradient(135deg, #EF4444 0%, #991B1B 100%);
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--gray-900);
            background: linear-gradient(to bottom right, #EBF8FF, #F3E8FF);
            min-height: 100vh;
        }
        
        /* Typography */
        .h1 { font-size: 32px; font-weight: 700; line-height: 1.2; }
        .h2 { font-size: 24px; font-weight: 600; line-height: 1.3; }
        .h3 { font-size: 18px; font-weight: 600; line-height: 1.4; }
        .body { font-size: 16px; font-weight: 400; line-height: 1.6; }
        .small { font-size: 14px; font-weight: 400; line-height: 1.5; color: var(--gray-600); }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: white;
            box-shadow: var(--shadow-sm);
            padding: 20px 0;
            margin-bottom: 32px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .version-badge {
            display: inline-block;
            padding: 6px 12px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        /* Card Component */
        .card {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: 24px;
            margin-bottom: 24px;
        }
        
        /* Property Hero */
        .property-hero {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
            align-items: center;
        }
        
        .property-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: var(--radius-md);
        }
        
        .property-details {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .property-address {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .property-address svg {
            width: 24px;
            height: 24px;
            color: var(--primary-blue);
            margin-top: 4px;
        }
        
        .metric-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }
        
        .metric-card {
            padding: 12px;
            background: var(--gray-50);
            border-radius: var(--radius-md);
            text-align: center;
        }
        
        .metric-card-label {
            font-size: 12px;
            color: var(--gray-600);
            margin-bottom: 4px;
        }
        
        .metric-card-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--gray-900);
        }
        
        .metric-card-value.positive { color: var(--success-green); }
        .metric-card-value.negative { color: var(--danger-red); }
        
        /* Comparables Grid */
        .comparables-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .comparable-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        
        .comparable-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }
        
        .comparable-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .comparable-price {
            position: absolute;
            bottom: 12px;
            left: 12px;
            background: white;
            padding: 6px 12px;
            border-radius: var(--radius-md);
            font-size: 20px;
            font-weight: 700;
            box-shadow: var(--shadow-lg);
        }
        
        .comparable-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 10px;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: white;
        }
        
        .badge-top { background: var(--gradient-success); }
        .badge-similar { background: var(--gradient-primary); }
        .badge-value { background: var(--gradient-danger); }
        
        .comparable-details {
            padding: 16px;
        }
        
        .comparable-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--gray-900);
        }
        
        .comparable-stats {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        
        .comparable-stat {
            font-size: 13px;
            color: var(--gray-600);
        }
        
        .comparable-rating {
            color: var(--warning-yellow);
            font-weight: 600;
        }
        
        .comparable-revenue {
            display: flex;
            justify-content: space-between;
            padding-top: 12px;
            border-top: 1px solid var(--gray-200);
        }
        
        .revenue-label {
            font-size: 12px;
            color: var(--gray-600);
        }
        
        .revenue-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--success-green);
        }
        
        /* Calculator Section */
        .calculator-section {
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: 24px;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 32px;
            margin-bottom: 24px;
        }
        
        .calculator-inputs {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .input-group {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .input-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-700);
            min-width: 120px;
        }
        
        .input-slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 3px;
            background: var(--gray-300);
            outline: none;
        }
        
        .input-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-blue);
            cursor: pointer;
        }
        
        .input-value {
            min-width: 80px;
            text-align: right;
            font-weight: 600;
            color: var(--gray-900);
        }
        
        /* Mode Button Styles */
        .mode-btn {
            padding: 12px 24px;
            border: 2px solid var(--gray-300);
            background: white;
            color: var(--gray-700);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .mode-btn:hover {
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }
        
        .mode-btn.active {
            background: var(--primary-blue);
            border-color: var(--primary-blue);
            color: white;
        }
        
        .calc-input-section {
            display: grid;
        }
        
        .calculator-results {
            background: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            text-align: center;
        }
        
        .result-title {
            font-size: 14px;
            color: var(--gray-600);
            margin-bottom: 8px;
        }
        
        .result-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--success-green);
            margin-bottom: 8px;
        }
        
        .result-subtitle {
            font-size: 13px;
            color: var(--gray-500);
        }
        
        /* Cash Flow Comparison */
        .cashflow-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }
        
        .cashflow-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-md);
        }
        
        .cashflow-card.str {
            border: 2px solid var(--success-green);
        }
        
        .cashflow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .cashflow-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .cashflow-badge {
            padding: 4px 10px;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .badge-recommended {
            background: var(--success-green);
            color: white;
        }
        
        .cashflow-breakdown {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .cashflow-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--gray-100);
        }
        
        .cashflow-item:last-child {
            border-bottom: none;
            border-top: 2px solid var(--gray-200);
            padding-top: 12px;
            margin-top: 8px;
        }
        
        .cashflow-label {
            font-size: 14px;
            color: var(--gray-600);
        }
        
        .cashflow-value {
            font-size: 16px;
            font-weight: 600;
        }
        
        .cashflow-value.positive { color: var(--success-green); }
        .cashflow-value.negative { color: var(--danger-red); }
        
        .cashflow-total {
            font-size: 20px;
            font-weight: 700;
        }
        
        /* Financial Calculator Section */
        .financial-calculator-section {
            margin-top: 32px;
        }
        
        .info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: var(--gray-300);
            color: var(--gray-700);
            border-radius: 50%;
            font-size: 12px;
            font-weight: 600;
            cursor: help;
            margin-left: 8px;
        }
        
        /* Toggle Switch */
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--gray-50);
            border-radius: var(--radius-md);
            margin-bottom: 16px;
        }
        
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-400);
            transition: 0.3s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--primary-blue);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        .toggle-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-700);
        }
        
        /* Disabled state */
        .financing-section {
            transition: opacity 0.3s, filter 0.3s;
        }
        
        .financing-section.disabled {
            opacity: 0.5;
            filter: grayscale(50%);
            pointer-events: none;
        }
        
        /* Sidebar Navigation Styles */
        .sidebar-nav-item {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 6px;
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-700);
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            position: relative;
        }
        
        .sidebar-nav-item:hover {
            background: var(--gray-50);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
            transform: translateX(4px);
        }
        
        .sidebar-nav-item.active {
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            color: white;
            border-color: transparent;
        }
        
        .sidebar-nav-item.active:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-md);
        }
        
        .sidebar-nav-item svg {
            flex-shrink: 0;
        }
        
        .nav-badge {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            padding: 2px 8px;
            background: var(--success-green);
            color: white;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .sidebar-collapsed {
            width: 60px !important;
        }
        
        .sidebar-collapsed .sidebar-nav-item span {
            display: none;
        }
        
        .sidebar-collapsed .nav-badge {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div>
                    <h1 class="h2">STR Analysis UX Redesign Mockup V3</h1>
                    <p class="small">Optional financing toggle with proper mortgage calculations</p>
                </div>
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span class="version-badge">FINANCING OPTIONS</span>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Content with Sidebar -->
    <main class="main-content">
        <div class="container" style="max-width: 1400px;">
            <div style="display: flex; gap: 24px;">
                <!-- Sidebar Navigation -->
                <aside style="width: 280px; flex-shrink: 0;">
                    <div style="position: sticky; top: 20px;">
                        <div class="card" style="padding: 0; overflow: hidden;">
                            <!-- Sidebar Header -->
                            <div style="padding: 20px; background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%); color: white;">
                                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 4px;">Analysis Navigation</h3>
                                <p style="font-size: 12px; opacity: 0.9;">1514 - 150 East Liberty St</p>
                            </div>
                            
                            <!-- Navigation Items -->
                            <nav style="padding: 12px;">
                                <button class="sidebar-nav-item active" onclick="handleNavClick(this, 'overview')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
                                    </svg>
                                    <span>Property Overview</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'str')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"></path>
                                    </svg>
                                    <span>STR Analysis</span>
                                    <span class="nav-badge">Recommended</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'ltr')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm3 1h6v4H7V5zm6 6H7v2h6v-2z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>LTR Analysis</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'financial')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"></path>
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>Financial Calculator</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'investment')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2a1 1 0 000 2h6a1 1 0 100-2H7zm6 7a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1zm-3 3a1 1 0 100 2h.01a1 1 0 100-2H10zm-4 1a1 1 0 011-1h.01a1 1 0 110 2H7a1 1 0 01-1-1zm1-4a1 1 0 100 2h.01a1 1 0 100-2H7zm2 1a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1zm4-2a1 1 0 100 2h.01a1 1 0 100-2H13z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>Investment Planning</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'comparison')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1H3a1 1 0 01-1-1V4zM8 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1H9a1 1 0 01-1-1V4zM15 3a1 1 0 00-1 1v12a1 1 0 001 1h2a1 1 0 001-1V4a1 1 0 00-1-1h-2z"></path>
                                    </svg>
                                    <span>STR vs LTR</span>
                                </button>
                            </nav>
                            
                            <!-- Quick Actions -->
                            <div style="padding: 12px; border-top: 1px solid var(--gray-200);">
                                <button style="width: 100%; padding: 10px; background: var(--primary-blue); color: white; border: none; border-radius: 8px; font-weight: 500; cursor: pointer; margin-bottom: 8px;">
                                    📄 Generate PDF Report
                                </button>
                                <button style="width: 100%; padding: 10px; background: white; color: var(--gray-700); border: 1px solid var(--gray-300); border-radius: 8px; font-weight: 500; cursor: pointer;">
                                    🔗 Share Analysis
                                </button>
                            </div>
                            
                            <!-- Collapse Toggle -->
                            <button onclick="toggleSidebar()" style="position: absolute; top: 20px; right: -12px; width: 24px; height: 24px; background: white; border: 1px solid var(--gray-300); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: var(--shadow-sm);">
                                <svg width="12" height="12" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </aside>
                
                <!-- Main Content Area -->
                <div style="flex: 1; min-width: 0;">
            <!-- Property Hero Section (unchanged) -->
            <div class="card">
                <div class="property-hero">
                    <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=600&h=400&fit=crop" 
                         alt="Property" 
                         class="property-image">
                    <div class="property-details">
                        <div class="property-address">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <div>
                                <h1 class="h1">1514 - 150 East Liberty Street</h1>
                                <p class="body">Toronto, Ontario M6K 3R5</p>
                                <p class="h3" style="color: var(--primary-blue); margin-top: 8px;">$849,900</p>
                            </div>
                        </div>
                        <div class="metric-cards">
                            <div class="metric-card">
                                <div class="metric-card-label">Monthly Revenue</div>
                                <div class="metric-card-value positive">$11,044</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-card-label">Net Cash Flow</div>
                                <div class="metric-card-value positive" id="netCashFlowDisplay">+$8,500</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-card-label">ROI</div>
                                <div class="metric-card-value" id="roiDisplay">12.3%</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-card-label">Occupancy Rate</div>
                                <div class="metric-card-value">75%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 2. Live Airbnb Comparables (moved to position #2) -->
            <section class="comparables-section">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h2 class="h2" style="display: inline-flex; align-items: center; gap: 12px;">
                                Live Airbnb Market Data
                                <span style="display: inline-flex; align-items: center; gap: 4px; color: var(--success-green); font-size: 14px; font-weight: 500;">
                                    <span style="font-size: 10px;">●</span> 20 active listings found
                                </span>
                            </h2>
                            <p class="body" style="margin-top: 8px; color: var(--gray-600);">Similar properties in your area performing well on Airbnb</p>
                        </div>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span class="small" style="color: var(--gray-500);">Updated 3 minutes ago</span>
                            <span style="padding: 6px 12px; background: linear-gradient(135deg, #EF4444, #F59E0B); color: white; border-radius: 6px; font-size: 11px; font-weight: 700; text-transform: uppercase;">
                                ● REAL MARKET DATA
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="comparables-grid">
                    <!-- Comparable 1 -->
                    <a href="https://www.airbnb.com/rooms/123456" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                        <div class="comparable-card">
                            <div style="position: relative;">
                                <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=600&h=400&fit=crop" 
                                     alt="Comparable 1" 
                                     class="comparable-image">
                                <div class="comparable-price">$209/night</div>
                                <span class="comparable-badge badge-top">Top Performer</span>
                            </div>
                            <div class="comparable-details">
                                <h3 class="comparable-title">Luxury 2BR Condo • King West</h3>
                                <div class="comparable-stats">
                                    <span class="comparable-stat comparable-rating">★ 4.92</span>
                                    <span class="comparable-stat">156 reviews</span>
                                    <span class="comparable-stat">85% booked</span>
                                </div>
                                <div class="comparable-revenue">
                                    <div>
                                        <div class="revenue-label">Monthly Revenue</div>
                                        <div class="revenue-value">$6,850</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; text-align: center;">
                                    <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View on Airbnb →</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Comparable 2 -->
                    <a href="https://www.airbnb.com/rooms/789012" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                        <div class="comparable-card">
                            <div style="position: relative;">
                                <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=600&h=400&fit=crop" 
                                     alt="Comparable 2" 
                                     class="comparable-image">
                                <div class="comparable-price">$175/night</div>
                                <span class="comparable-badge badge-similar">Most Similar</span>
                            </div>
                            <div class="comparable-details">
                                <h3 class="comparable-title">Modern 1BR+Den • Liberty Village</h3>
                                <div class="comparable-stats">
                                    <span class="comparable-stat comparable-rating">★ 4.85</span>
                                    <span class="comparable-stat">89 reviews</span>
                                    <span class="comparable-stat">78% booked</span>
                                </div>
                                <div class="comparable-revenue">
                                    <div>
                                        <div class="revenue-label">Monthly Revenue</div>
                                        <div class="revenue-value">$5,100</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; text-align: center;">
                                    <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View on Airbnb →</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Comparable 3 -->
                    <a href="https://www.airbnb.com/rooms/345678" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                        <div class="comparable-card">
                            <div style="position: relative;">
                                <img src="https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=600&h=400&fit=crop" 
                                     alt="Comparable 3" 
                                     class="comparable-image">
                                <div class="comparable-price">$165/night</div>
                                <span class="comparable-badge badge-value">Best Value</span>
                            </div>
                            <div class="comparable-details">
                                <h3 class="comparable-title">Cozy 1BR • Entertainment District</h3>
                                <div class="comparable-stats">
                                    <span class="comparable-stat comparable-rating">★ 4.78</span>
                                    <span class="comparable-stat">234 reviews</span>
                                    <span class="comparable-stat">82% booked</span>
                                </div>
                                <div class="comparable-revenue">
                                    <div>
                                        <div class="revenue-label">Monthly Revenue</div>
                                        <div class="revenue-value">$4,950</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; text-align: center;">
                                    <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View on Airbnb →</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                
                <!-- View All Button -->
                <div style="text-align: center; margin-top: 24px;">
                    <button onclick="alert('In the live application, this would expand to show all 20 comparable listings or navigate to a detailed comparables page.');" 
                            style="padding: 10px 24px; background: white; border: 1px solid var(--gray-300); border-radius: 8px; color: var(--gray-700); font-weight: 500; cursor: pointer; transition: all 0.2s; hover: background: var(--gray-50);"
                            onmouseover="this.style.background='#F3F4F6'; this.style.borderColor='#9CA3AF';" 
                            onmouseout="this.style.background='white'; this.style.borderColor='#D1D5DB';">
                        View All Comparable Listings <span style="color: var(--gray-500); font-size: 12px;">(20 total)</span>
                    </button>
                </div>
            </section>
            
            <!-- 3. Airbnb Market Statistics -->
            <div class="card">
                <h2 class="h2" style="margin-bottom: 20px;">Airbnb Market Statistics</h2>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; text-align: center;">
                    <div>
                        <div class="h1" style="color: var(--gray-900);">$447</div>
                        <div class="small">Average nightly rate</div>
                    </div>
                    <div>
                        <div class="h1" style="color: var(--primary-blue);">70%</div>
                        <div class="small">Average occupancy</div>
                    </div>
                    <div>
                        <div class="small" style="margin-bottom: 4px;">Projected Advantage</div>
                        <div class="h1" style="color: var(--success-green);">+$6,369/mo</div>
                        <div style="font-size: 12px; color: var(--gray-500);">over long-term rental</div>
                    </div>
                    <div>
                        <div class="h1" style="color: var(--gray-900);">4.5★</div>
                        <div class="small">Average rating</div>
                    </div>
                </div>
            </div>
            
            <!-- 4. STR Revenue Calculator -->
            <section class="calculator-section">
                <div class="card">
                    <h2 class="h3" style="margin-bottom: 20px;">
                        STR Revenue Calculator
                        <span class="info-icon" title="Adjust values to see revenue projections">?</span>
                    </h2>
                    <div class="calculator-inputs">
                        <div class="input-group">
                            <label class="input-label">Nightly Rate</label>
                            <input type="range" class="input-slider" id="nightlyRate" min="50" max="500" value="185">
                            <span class="input-value" id="nightlyRateValue">$185/night</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Occupancy Rate</label>
                            <input type="range" class="input-slider" id="occupancyRate" min="0" max="100" value="78">
                            <span class="input-value" id="occupancyRateValue">78%</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Cleaning Fee</label>
                            <input type="range" class="input-slider" id="cleaningFee" min="0" max="200" value="75">
                            <span class="input-value" id="cleaningFeeValue">$75</span>
                        </div>
                    </div>
                </div>
                
                <div class="calculator-results">
                    <h3 class="result-title">Projected Monthly Revenue</h3>
                    <div class="result-value" id="monthlyRevenueResult">$5,240</div>
                    <p class="result-subtitle" id="nightsBookedText">Based on 23 nights booked per month</p>
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--gray-200);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span class="small">Annual Revenue</span>
                            <span class="h3" style="color: var(--success-green);" id="annualRevenueCalc">$62,880</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span class="small">vs. Long-term Rental</span>
                            <span class="h3" style="color: var(--success-green);" id="vsLTRCalc">+68%</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 5. Cash Flow Comparison -->
            <section class="cashflow-comparison">
                <div class="cashflow-card str">
                    <div class="cashflow-header">
                        <h3 class="cashflow-title">
                            <svg width="20" height="20" fill="currentColor" style="color: var(--success-green);">
                                <path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/>
                            </svg>
                            Short-Term Rental
                        </h3>
                        <span class="cashflow-badge badge-recommended">Recommended</span>
                    </div>
                    <div class="cashflow-breakdown">
                        <div class="cashflow-item">
                            <span class="cashflow-label">Monthly Revenue</span>
                            <span class="cashflow-value positive" id="strRevenueCard">+$11,044</span>
                        </div>
                        <div class="cashflow-item">
                            <span class="cashflow-label">Mortgage Payment</span>
                            <span class="cashflow-value negative" id="strMortgageCard">-$4,269</span>
                        </div>
                        <div class="cashflow-item">
                            <span class="cashflow-label">Operating Expenses</span>
                            <span class="cashflow-value negative" id="strExpensesCard">-$2,761</span>
                        </div>
                        <div class="cashflow-item">
                            <span class="cashflow-label">Net Cash Flow</span>
                            <span class="cashflow-value cashflow-total positive" id="strCashFlowCard">+$4,014</span>
                        </div>
                    </div>
                </div>
                
                <div class="cashflow-card ltr">
                    <div class="cashflow-header">
                        <h3 class="cashflow-title">
                            <svg width="20" height="20" fill="currentColor" style="color: var(--gray-500);">
                                <path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/>
                            </svg>
                            Long-Term Rental
                        </h3>
                    </div>
                    <div class="cashflow-breakdown">
                        <div class="cashflow-item">
                            <span class="cashflow-label">Monthly Rent</span>
                            <span class="cashflow-value positive" id="ltrRentCard">+$4,000</span>
                        </div>
                        <div class="cashflow-item">
                            <span class="cashflow-label">Mortgage Payment</span>
                            <span class="cashflow-value negative" id="ltrMortgageCard">-$4,269</span>
                        </div>
                        <div class="cashflow-item">
                            <span class="cashflow-label">Operating Expenses</span>
                            <span class="cashflow-value negative">-$200</span>
                        </div>
                        <div class="cashflow-item">
                            <span class="cashflow-label">Net Cash Flow</span>
                            <span class="cashflow-value cashflow-total negative" id="ltrCashFlowCard">-$469</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 6. Financial Analysis Calculator -->
            <section class="financial-calculator-section">
                <div class="card">
                    <h2 class="h2" style="margin-bottom: 24px;">Financial Analysis Calculator</h2>
                    
                    <!-- Two Column Layout -->
                    <div style="display: grid; grid-template-columns: 1fr 1.2fr; gap: 32px;">
                        <!-- Left Column: Cash Flow Chart -->
                        <div style="background: var(--gray-50); border-radius: 12px; padding: 20px;">
                            <h3 class="h3" style="margin-bottom: 16px;">Monthly Cash Flow Comparison</h3>
                            <div style="position: relative; height: 300px; background: white; border-radius: 8px; padding: 20px;">
                                <!-- Bar Chart Visualization -->
                                <svg viewBox="0 0 400 280" style="width: 100%; height: 100%;">
                                    <!-- Grid lines -->
                                    <line x1="60" y1="30" x2="340" y2="30" stroke="#E5E7EB" stroke-width="1" stroke-dasharray="2,2"/>
                                    <line x1="60" y1="80" x2="340" y2="80" stroke="#E5E7EB" stroke-width="1" stroke-dasharray="2,2"/>
                                    <line x1="60" y1="130" x2="340" y2="130" stroke="#E5E7EB" stroke-width="1" stroke-dasharray="2,2"/>
                                    <line x1="60" y1="180" x2="340" y2="180" stroke="#E5E7EB" stroke-width="1" stroke-dasharray="2,2"/>
                                    <line x1="60" y1="230" x2="340" y2="230" stroke="#E5E7EB" stroke-width="1" stroke-dasharray="2,2"/>
                                    
                                    <!-- STR Bar -->
                                    <rect id="strBar" x="80" y="50" width="80" height="180" fill="#10b981" rx="4"/>
                                    <text x="120" y="250" text-anchor="middle" font-size="14" font-weight="600" fill="#374151">STR</text>
                                    <text id="strBarValue" x="120" y="40" text-anchor="middle" font-size="16" font-weight="700" fill="#10b981">$8,500</text>
                                    
                                    <!-- LTR Bar -->
                                    <rect id="ltrBar" x="240" y="150" width="80" height="80" fill="#6b7280" rx="4"/>
                                    <text x="280" y="250" text-anchor="middle" font-size="14" font-weight="600" fill="#374151">LTR</text>
                                    <text id="ltrBarValue" x="280" y="140" text-anchor="middle" font-size="16" font-weight="700" fill="#6b7280">$1,500</text>
                                    
                                    <!-- Y-axis -->
                                    <line x1="60" y1="230" x2="60" y2="30" stroke="#374151" stroke-width="2"/>
                                    <text x="45" y="235" text-anchor="end" font-size="11" fill="#6B7280">$0</text>
                                    <text x="45" y="185" text-anchor="end" font-size="11" fill="#6B7280">$2.5k</text>
                                    <text x="45" y="135" text-anchor="end" font-size="11" fill="#6B7280">$5k</text>
                                    <text x="45" y="85" text-anchor="end" font-size="11" fill="#6B7280">$7.5k</text>
                                    <text x="45" y="35" text-anchor="end" font-size="11" fill="#6B7280">$10k</text>
                                    
                                    <!-- X-axis -->
                                    <line x1="60" y1="230" x2="340" y2="230" stroke="#374151" stroke-width="2"/>
                                </svg>
                            </div>
                            
                            <!-- Key Metrics Below Chart -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 20px;">
                                <div style="background: white; padding: 12px; border-radius: 8px;">
                                    <div class="small" style="color: var(--gray-600);">STR Advantage</div>
                                    <div class="h3" style="color: var(--success-green);" id="strAdvantage">+$7,000/mo</div>
                                </div>
                                <div style="background: white; padding: 12px; border-radius: 8px;">
                                    <div class="small" style="color: var(--gray-600);">Annual Difference</div>
                                    <div class="h3" style="color: var(--success-green);" id="annualDifference">+$84,000/yr</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Right Column: Adjustable Assumptions -->
                        <div style="background: white; border: 1px solid var(--gray-200); border-radius: 12px; padding: 20px;">
                            <h3 class="h3" style="margin-bottom: 20px;">
                                Financial Assumptions 
                                <span class="info-icon" title="Adjust these values to see how changes affect your returns">?</span>
                            </h3>
                            
                            <div style="display: flex; flex-direction: column; gap: 24px;">
                                <!-- Revenue Assumptions -->
                                <div>
                                    <h4 style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--gray-200);">
                                        📊 Revenue Assumptions
                                    </h4>
                                    
                                    <div style="display: flex; flex-direction: column; gap: 16px;">
                                        <div>
                                            <label class="small" style="display: block; margin-bottom: 4px;">STR Nightly Rate</label>
                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                <input type="range" id="strNightlySlider" min="100" max="600" value="363" style="flex: 1;">
                                                <span id="strNightlyValue" style="min-width: 60px; text-align: right; font-weight: 600;">$363</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label class="small" style="display: block; margin-bottom: 4px;">STR Occupancy Rate</label>
                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                <input type="range" id="strOccupancySlider" min="40" max="95" value="75" style="flex: 1;">
                                                <span id="strOccupancyValue" style="min-width: 40px; text-align: right; font-weight: 600;">75%</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label class="small" style="display: block; margin-bottom: 4px;">Long-term Monthly Rent</label>
                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                <input type="range" id="ltrRentSlider" min="2000" max="8000" value="4000" style="flex: 1;">
                                                <span id="ltrRentValue" style="min-width: 70px; text-align: right; font-weight: 600;">$4,000</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Expense Assumptions -->
                                <div>
                                    <h4 style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--gray-200);">
                                        💰 Operating Expenses
                                    </h4>
                                    
                                    <div style="display: flex; flex-direction: column; gap: 16px;">
                                        <div>
                                            <label class="small" style="display: block; margin-bottom: 4px;">Property Management Fee</label>
                                            <div style="display: flex; align-items: center; gap: 12px;">
                                                <input type="range" id="mgmtFeeSlider" min="0" max="30" value="25" style="flex: 1;">
                                                <span id="mgmtFeeValue" style="min-width: 40px; text-align: right; font-weight: 600;">25%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Financing Toggle and Options -->
                                <div>
                                    <div class="toggle-container">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="financingToggle" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                        <span class="toggle-label">Include Financing (uncheck for cash purchase)</span>
                                    </div>
                                    
                                    <div id="financingSection" class="financing-section">
                                        <h4 style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--gray-200);">
                                            🏦 Financing Assumptions
                                        </h4>
                                        
                                        <div style="display: flex; flex-direction: column; gap: 16px;">
                                            <div>
                                                <label class="small" style="display: block; margin-bottom: 4px;">Down Payment</label>
                                                <div style="display: flex; align-items: center; gap: 12px;">
                                                    <input type="range" id="downPaymentSlider" min="5" max="100" value="20" style="flex: 1;">
                                                    <span id="downPaymentValue" style="min-width: 40px; text-align: right; font-weight: 600;">20%</span>
                                                </div>
                                                <div class="small" style="margin-top: 4px;">Amount: <span id="downPaymentAmount" style="font-weight: 600;">$169,980</span></div>
                                            </div>
                                            
                                            <div>
                                                <label class="small" style="display: block; margin-bottom: 4px;">Interest Rate</label>
                                                <div style="display: flex; align-items: center; gap: 12px;">
                                                    <input type="range" id="interestRateSlider" min="3" max="8" value="6.5" step="0.1" style="flex: 1;">
                                                    <span id="interestRateValue" style="min-width: 50px; text-align: right; font-weight: 600;">6.5%</span>
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <label class="small" style="display: block; margin-bottom: 4px;">Loan Term</label>
                                                <div style="display: flex; align-items: center; gap: 12px;">
                                                    <input type="range" id="loanTermSlider" min="1" max="30" value="30" step="1" style="flex: 1;">
                                                    <span id="loanTermValue" style="min-width: 60px; text-align: right; font-weight: 600;">30 years</span>
                                                </div>
                                            </div>
                                            
                                            <div style="padding: 12px; background: var(--gray-50); border-radius: 8px;">
                                                <div class="small" style="color: var(--gray-600);">Monthly Mortgage Payment</div>
                                                <div class="h2" style="color: var(--danger-red);" id="mortgagePayment">-$4,269</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Action Buttons -->
                                <div style="display: flex; gap: 12px; padding-top: 12px; border-top: 1px solid var(--gray-200);">
                                    <button id="resetBtn" style="flex: 1; padding: 10px; background: var(--gray-100); color: var(--gray-700); border: 1px solid var(--gray-300); border-radius: 8px; font-weight: 500; cursor: pointer;">
                                        Reset to Defaults
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Summary Metrics Bar -->
                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; margin-top: 24px; padding: 20px; background: linear-gradient(to right, var(--gray-50), white); border-radius: 12px;">
                        <div style="text-align: center;">
                            <div class="small" style="color: var(--gray-600); margin-bottom: 4px;">STR Revenue</div>
                            <div class="h3" style="color: var(--gray-900);" id="strRevenueSum">$132,000/yr</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="small" style="color: var(--gray-600); margin-bottom: 4px;">Total Expenses</div>
                            <div class="h3" style="color: var(--danger-red);" id="totalExpensesSum">-$30,000/yr</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="small" style="color: var(--gray-600); margin-bottom: 4px;">Net Income</div>
                            <div class="h3" style="color: var(--success-green);" id="netIncomeSum">$102,000/yr</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="small" style="color: var(--gray-600); margin-bottom: 4px;">Cash-on-Cash</div>
                            <div class="h3" style="color: var(--primary-blue);" id="cashOnCash">60.0%</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="small" style="color: var(--gray-600); margin-bottom: 4px;">Cap Rate</div>
                            <div class="h3" style="color: var(--primary-blue);" id="capRate">12.0%</div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 7. STR vs LTR Comparison Section (Hidden by default, shown when comparison nav is clicked) -->
            <section id="str-vs-ltr-section" style="display: none;">
                <!-- Financial Comparison Dashboard -->
                <div class="card">
                    <h2 class="h2" style="margin-bottom: 24px;">Financial Comparison Dashboard</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                        <!-- STR Metrics -->
                        <div>
                            <h3 class="h3" style="margin-bottom: 16px; color: var(--primary-blue);">Short-Term Rental (STR)</h3>
                            <div style="display: grid; gap: 16px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span>Monthly Revenue</span>
                                    <span class="h3" style="color: var(--success-green);">$8,376</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span>Operating Expenses</span>
                                    <span class="h3" style="color: var(--danger-red);">-$2,594</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span>Mortgage Payment</span>
                                    <span class="h3" style="color: var(--danger-red);">-$3,249</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px; background: linear-gradient(135deg, #10B981 0%, #065F46 100%); border-radius: var(--radius-md); color: white;">
                                    <span class="h3">Net Cash Flow</span>
                                    <span class="h2">$2,533</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span>Cash-on-Cash ROI</span>
                                    <span class="h3" style="color: var(--primary-blue);">12.4%</span>
                                </div>
                            </div>
                        </div>

                        <!-- LTR Metrics -->
                        <div>
                            <h3 class="h3" style="margin-bottom: 16px; color: var(--gray-600);">Long-Term Rental (LTR)</h3>
                            <div style="display: grid; gap: 16px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span>Monthly Rent</span>
                                    <span class="h3" style="color: var(--success-green);">$4,000</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span>Operating Expenses</span>
                                    <span class="h3" style="color: var(--danger-red);">-$200</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span>Mortgage Payment</span>
                                    <span class="h3" style="color: var(--danger-red);">-$3,249</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px; background: linear-gradient(135deg, #6B7280 0%, #374151 100%); border-radius: var(--radius-md); color: white;">
                                    <span class="h3">Net Cash Flow</span>
                                    <span class="h2">$551</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--gray-50); border-radius: var(--radius-md);">
                                    <span>Cash-on-Cash ROI</span>
                                    <span class="h3" style="color: var(--gray-600);">2.7%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Comparison Summary -->
                    <div style="margin-top: 32px; padding: 24px; background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%); border-radius: var(--radius-lg); color: white; text-align: center;">
                        <div class="h1" style="margin-bottom: 8px; color: white;">STR Advantage: $1,982/month</div>
                        <div class="body" style="opacity: 0.9;">Additional annual income of $23,784 with short-term rental strategy</div>
                    </div>
                </div>

                <!-- Tax & Legal Considerations -->
                <div class="card">
                    <h2 class="h2" style="margin-bottom: 24px;">Tax & Legal Considerations</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                        <!-- STR Tax Implications -->
                        <div>
                            <h3 class="h3" style="margin-bottom: 16px; color: var(--primary-blue);">STR Tax Benefits</h3>
                            <div style="display: grid; gap: 12px;">
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <div style="width: 6px; height: 6px; background: var(--success-green); border-radius: 50%; margin-top: 8px; flex-shrink: 0;"></div>
                                    <div>
                                        <strong>Depreciation:</strong> $14,545/year tax deduction on building value
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <div style="width: 6px; height: 6px; background: var(--success-green); border-radius: 50%; margin-top: 8px; flex-shrink: 0;"></div>
                                    <div>
                                        <strong>Business Expenses:</strong> Furniture, cleaning, maintenance fully deductible
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <div style="width: 6px; height: 6px; background: var(--success-green); border-radius: 50%; margin-top: 8px; flex-shrink: 0;"></div>
                                    <div>
                                        <strong>14-Day Rule:</strong> Personal use up to 14 days without losing tax benefits
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <div style="width: 6px; height: 6px; background: var(--warning-yellow); border-radius: 50%; margin-top: 8px; flex-shrink: 0;"></div>
                                    <div>
                                        <strong>Self-Employment Tax:</strong> May apply to STR income (~15.3%)
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- LTR Tax Implications -->
                        <div>
                            <h3 class="h3" style="margin-bottom: 16px; color: var(--gray-600);">LTR Tax Considerations</h3>
                            <div style="display: grid; gap: 12px;">
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <div style="width: 6px; height: 6px; background: var(--success-green); border-radius: 50%; margin-top: 8px; flex-shrink: 0;"></div>
                                    <div>
                                        <strong>Passive Income:</strong> No self-employment tax on rental income
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <div style="width: 6px; height: 6px; background: var(--success-green); border-radius: 50%; margin-top: 8px; flex-shrink: 0;"></div>
                                    <div>
                                        <strong>Depreciation:</strong> Same $14,545/year building depreciation
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <div style="width: 6px; height: 6px; background: var(--danger-red); border-radius: 50%; margin-top: 8px; flex-shrink: 0;"></div>
                                    <div>
                                        <strong>Limited Deductions:</strong> Fewer business expense opportunities
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <div style="width: 6px; height: 6px; background: var(--success-green); border-radius: 50%; margin-top: 8px; flex-shrink: 0;"></div>
                                    <div>
                                        <strong>Simpler Accounting:</strong> Less complex bookkeeping requirements
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Legal Requirements -->
                    <div style="margin-top: 32px;">
                        <h3 class="h3" style="margin-bottom: 16px;">Legal & Regulatory Requirements</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                            <div>
                                <h4 style="font-weight: 600; margin-bottom: 12px; color: var(--primary-blue);">STR Requirements</h4>
                                <div style="display: grid; gap: 8px; font-size: 14px;">
                                    <div>• Business license and permits</div>
                                    <div>• Municipal STR registration</div>
                                    <div>• Zoning compliance verification</div>
                                    <div>• Fire safety and building codes</div>
                                    <div>• Liability insurance (commercial)</div>
                                    <div>• HST registration if over $30k revenue</div>
                                </div>
                            </div>
                            <div>
                                <h4 style="font-weight: 600; margin-bottom: 12px; color: var(--gray-600);">LTR Requirements</h4>
                                <div style="display: grid; gap: 8px; font-size: 14px;">
                                    <div>• Standard rental license (if required)</div>
                                    <div>• Tenancy agreement compliance</div>
                                    <div>• Landlord-tenant act compliance</div>
                                    <div>• Basic property insurance</div>
                                    <div>• Rent control considerations</div>
                                    <div>• Lower regulatory complexity</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Decision Scorecard -->
                <div class="card">
                    <h2 class="h2" style="margin-bottom: 24px;">Investment Decision Scorecard</h2>
                    <p class="body" style="color: var(--gray-600); margin-bottom: 32px;">
                        Adjust the sliders below based on your personal situation to get a personalized recommendation.
                    </p>
                    
                    <div style="display: grid; gap: 32px;">
                        <!-- Time Commitment -->
                        <div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 class="h3">Time Commitment Preference</h3>
                                <span id="timeCommitmentValue" class="h3" style="color: var(--primary-blue);">Moderate (5/10)</span>
                            </div>
                            <input type="range" id="timeCommitmentSlider" min="1" max="10" value="5" 
                                   style="width: 100%; height: 8px; border-radius: 4px; background: var(--gray-200); outline: none; -webkit-appearance: none;">
                            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; color: var(--gray-500);">
                                <span>Minimal time</span>
                                <span>Very hands-on</span>
                            </div>
                        </div>

                        <!-- Risk Tolerance -->
                        <div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 class="h3">Risk Tolerance</h3>
                                <span id="riskToleranceValue" class="h3" style="color: var(--primary-blue);">Moderate (5/10)</span>
                            </div>
                            <input type="range" id="riskToleranceSlider" min="1" max="10" value="5" 
                                   style="width: 100%; height: 8px; border-radius: 4px; background: var(--gray-200); outline: none; -webkit-appearance: none;">
                            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; color: var(--gray-500);">
                                <span>Conservative</span>
                                <span>High risk tolerance</span>
                            </div>
                        </div>

                        <!-- Investment Goals -->
                        <div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 class="h3">Investment Goals Priority</h3>
                                <span id="investmentGoalsValue" class="h3" style="color: var(--primary-blue);">Balanced (5/10)</span>
                            </div>
                            <input type="range" id="investmentGoalsSlider" min="1" max="10" value="5" 
                                   style="width: 100%; height: 8px; border-radius: 4px; background: var(--gray-200); outline: none; -webkit-appearance: none;">
                            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; color: var(--gray-500);">
                                <span>Steady cash flow</span>
                                <span>Maximum returns</span>
                            </div>
                        </div>

                        <!-- Local Tourism -->
                        <div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 class="h3">Local Tourism Strength</h3>
                                <span id="localTourismValue" class="h3" style="color: var(--primary-blue);">Strong (7/10)</span>
                            </div>
                            <input type="range" id="localTourismSlider" min="1" max="10" value="7" 
                                   style="width: 100%; height: 8px; border-radius: 4px; background: var(--gray-200); outline: none; -webkit-appearance: none;">
                            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; color: var(--gray-500);">
                                <span>Limited tourism</span>
                                <span>High tourism demand</span>
                            </div>
                        </div>

                        <!-- Recommendation Output -->
                        <div id="scorecardRecommendation" style="padding: 24px; background: linear-gradient(135deg, #10B981 0%, #065F46 100%); border-radius: var(--radius-lg); color: white; text-align: center;">
                            <div class="h2" style="margin-bottom: 8px; color: white;">Recommendation: Short-Term Rental</div>
                            <div class="body" style="opacity: 0.9; margin-bottom: 16px;">
                                Based on your preferences, STR aligns well with your investment goals and local market conditions.
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-top: 16px;">
                                <div style="text-align: left;">
                                    <div class="small" style="opacity: 0.8;">STR Score</div>
                                    <div id="strScore" class="h3" style="color: white;">8.2/10</div>
                                </div>
                                <div style="text-align: right;">
                                    <div class="small" style="opacity: 0.8;">LTR Score</div>
                                    <div id="ltrScore" class="h3" style="color: white;">6.1/10</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 8. Financial Calculator Section (Hidden by default, shown when financial nav is clicked) -->
            <section id="financial-calculator-section" style="display: none;">
                <!-- Mode Toggle -->
                <div class="card">
                    <h2 class="h2" style="margin-bottom: 24px;">Financial Calculator</h2>
                    <div style="display: flex; gap: 8px; margin-bottom: 32px;">
                        <button id="strModeBtn" class="mode-btn active" onclick="setCalculatorMode('str')">
                            STR Analysis
                        </button>
                        <button id="ltrModeBtn" class="mode-btn" onclick="setCalculatorMode('ltr')">
                            LTR Analysis  
                        </button>
                        <button id="compareModeBtn" class="mode-btn" onclick="setCalculatorMode('compare')">
                            Compare Both
                        </button>
                    </div>

                    <!-- Dynamic Chart Area -->
                    <div id="chartArea" style="height: 400px; background: var(--gray-50); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; margin-bottom: 32px;">
                        <!-- Compare Mode Chart (Default) -->
                        <div id="compareChart" style="width: 100%; height: 100%; position: relative;">
                            <svg width="100%" height="100%" viewBox="0 0 600 350">
                                <!-- Chart Title -->
                                <text x="300" y="30" text-anchor="middle" class="h3" fill="var(--gray-900)">Cash Flow Comparison</text>
                                
                                <!-- Y-axis -->
                                <line x1="80" y1="60" x2="80" y2="280" stroke="var(--gray-300)" stroke-width="2"/>
                                <!-- X-axis -->
                                <line x1="80" y1="280" x2="520" y2="280" stroke="var(--gray-300)" stroke-width="2"/>
                                
                                <!-- Y-axis labels -->
                                <text x="70" y="70" text-anchor="end" font-size="12" fill="var(--gray-600)">$10k</text>
                                <text x="70" y="120" text-anchor="end" font-size="12" fill="var(--gray-600)">$7.5k</text>
                                <text x="70" y="170" text-anchor="end" font-size="12" fill="var(--gray-600)">$5k</text>
                                <text x="70" y="220" text-anchor="end" font-size="12" fill="var(--gray-600)">$2.5k</text>
                                <text x="70" y="280" text-anchor="end" font-size="12" fill="var(--gray-600)">$0</text>
                                
                                <!-- STR Bar -->
                                <rect id="compareStrBar" x="180" y="165" width="80" height="115" fill="var(--primary-blue)" rx="4"/>
                                <text x="220" y="150" text-anchor="middle" font-weight="600" fill="var(--gray-900)">$2,533</text>
                                <text x="220" y="300" text-anchor="middle" font-size="14" fill="var(--gray-700)">STR</text>
                                
                                <!-- LTR Bar -->
                                <rect id="compareLtrBar" x="340" y="253" width="80" height="27" fill="var(--gray-500)" rx="4"/>
                                <text x="380" y="243" text-anchor="middle" font-weight="600" fill="var(--gray-900)">$551</text>
                                <text x="380" y="300" text-anchor="middle" font-size="14" fill="var(--gray-700)">LTR</text>
                            </svg>
                        </div>

                        <!-- STR Mode Chart -->
                        <div id="strChart" style="width: 100%; height: 100%; position: relative; display: none;">
                            <svg width="100%" height="100%" viewBox="0 0 600 350">
                                <!-- Chart Title -->
                                <text x="300" y="30" text-anchor="middle" class="h3" fill="var(--gray-900)">STR Monthly Revenue Projection</text>
                                
                                <!-- Line chart showing 12 months -->
                                <polyline id="strRevenueLineMonthly" points="80,200 130,185 180,170 230,160 280,155 330,150 380,145 430,150 480,155 530,160"
                                         fill="none" stroke="var(--primary-blue)" stroke-width="3"/>
                                         
                                <!-- Data points -->
                                <circle cx="80" cy="200" r="4" fill="var(--primary-blue)"/>
                                <circle cx="130" cy="185" r="4" fill="var(--primary-blue)"/>
                                <circle cx="180" cy="170" r="4" fill="var(--primary-blue)"/>
                                <circle cx="230" cy="160" r="4" fill="var(--primary-blue)"/>
                                <circle cx="280" cy="155" r="4" fill="var(--primary-blue)"/>
                                <circle cx="330" cy="150" r="4" fill="var(--primary-blue)"/>
                                <circle cx="380" cy="145" r="4" fill="var(--primary-blue)"/>
                                <circle cx="430" cy="150" r="4" fill="var(--primary-blue)"/>
                                <circle cx="480" cy="155" r="4" fill="var(--primary-blue)"/>
                                <circle cx="530" cy="160" r="4" fill="var(--primary-blue)"/>
                                
                                <!-- Axes -->
                                <line x1="70" y1="60" x2="70" y2="280" stroke="var(--gray-300)" stroke-width="2"/>
                                <line x1="70" y1="280" x2="540" y2="280" stroke="var(--gray-300)" stroke-width="2"/>
                                
                                <!-- Month labels -->
                                <text x="80" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Jan</text>
                                <text x="180" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Mar</text>
                                <text x="280" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Jun</text>
                                <text x="380" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Sep</text>
                                <text x="480" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Dec</text>
                                
                                <!-- Y-axis labels -->
                                <text x="60" y="80" text-anchor="end" font-size="12" fill="var(--gray-600)">$12k</text>
                                <text x="60" y="130" text-anchor="end" font-size="12" fill="var(--gray-600)">$9k</text>
                                <text x="60" y="180" text-anchor="end" font-size="12" fill="var(--gray-600)">$6k</text>
                                <text x="60" y="230" text-anchor="end" font-size="12" fill="var(--gray-600)">$3k</text>
                                <text x="60" y="280" text-anchor="end" font-size="12" fill="var(--gray-600)">$0</text>
                            </svg>
                        </div>

                        <!-- LTR Mode Chart -->
                        <div id="ltrChart" style="width: 100%; height: 100%; position: relative; display: none;">
                            <svg width="100%" height="100%" viewBox="0 0 600 350">
                                <!-- Chart Title -->
                                <text x="300" y="30" text-anchor="middle" class="h3" fill="var(--gray-900)">LTR 5-Year Cash Flow Projection</text>
                                
                                <!-- Bar chart showing 5 years -->
                                <rect x="100" y="200" width="60" height="80" fill="var(--gray-500)" rx="4"/>
                                <rect x="180" y="185" width="60" height="95" fill="var(--gray-500)" rx="4"/>
                                <rect x="260" y="170" width="60" height="110" fill="var(--gray-500)" rx="4"/>
                                <rect x="340" y="155" width="60" height="125" fill="var(--gray-500)" rx="4"/>
                                <rect x="420" y="140" width="60" height="140" fill="var(--gray-500)" rx="4"/>
                                
                                <!-- Values -->
                                <text x="130" y="190" text-anchor="middle" font-weight="600" font-size="12" fill="var(--gray-900)">$6.6k</text>
                                <text x="210" y="175" text-anchor="middle" font-weight="600" font-size="12" fill="var(--gray-900)">$6.8k</text>
                                <text x="290" y="160" text-anchor="middle" font-weight="600" font-size="12" fill="var(--gray-900)">$7.0k</text>
                                <text x="370" y="145" text-anchor="middle" font-weight="600" font-size="12" fill="var(--gray-900)">$7.2k</text>
                                <text x="450" y="130" text-anchor="middle" font-weight="600" font-size="12" fill="var(--gray-900)">$7.4k</text>
                                
                                <!-- Axes -->
                                <line x1="80" y1="60" x2="80" y2="280" stroke="var(--gray-300)" stroke-width="2"/>
                                <line x1="80" y1="280" x2="500" y2="280" stroke="var(--gray-300)" stroke-width="2"/>
                                
                                <!-- Year labels -->
                                <text x="130" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Year 1</text>
                                <text x="210" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Year 2</text>
                                <text x="290" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Year 3</text>
                                <text x="370" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Year 4</text>
                                <text x="450" y="300" text-anchor="middle" font-size="12" fill="var(--gray-600)">Year 5</text>
                                
                                <!-- Y-axis labels -->
                                <text x="70" y="80" text-anchor="end" font-size="12" fill="var(--gray-600)">$10k</text>
                                <text x="70" y="130" text-anchor="end" font-size="12" fill="var(--gray-600)">$7.5k</text>
                                <text x="70" y="180" text-anchor="end" font-size="12" fill="var(--gray-600)">$5k</text>
                                <text x="70" y="230" text-anchor="end" font-size="12" fill="var(--gray-600)">$2.5k</text>
                                <text x="70" y="280" text-anchor="end" font-size="12" fill="var(--gray-600)">$0</text>
                            </svg>
                        </div>
                    </div>

                    <!-- Input Sections (Show/Hide based on mode) -->
                    <!-- STR Inputs -->
                    <div id="strInputs" class="calc-input-section" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 32px;">
                        <div class="input-group">
                            <label class="input-label">Nightly Rate</label>
                            <input type="range" class="input-slider" id="calcStrNightlyRate" min="100" max="800" value="363">
                            <span class="input-value" id="calcStrNightlyValue">$363/night</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Occupancy Rate</label>
                            <input type="range" class="input-slider" id="calcStrOccupancy" min="30" max="95" value="75">
                            <span class="input-value" id="calcStrOccupancyValue">75%</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Management Fee</label>
                            <input type="range" class="input-slider" id="calcMgmtFee" min="0" max="50" value="25">
                            <span class="input-value" id="calcMgmtFeeValue">25%</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Additional Expenses</label>
                            <input type="range" class="input-slider" id="calcStrExpenses" min="200" max="1500" value="500">
                            <span class="input-value" id="calcStrExpensesValue">$500/month</span>
                        </div>
                    </div>

                    <!-- LTR Inputs -->
                    <div id="ltrInputs" class="calc-input-section" style="display: none; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 32px;">
                        <div class="input-group">
                            <label class="input-label">Monthly Rent</label>
                            <input type="range" class="input-slider" id="calcLtrRent" min="2000" max="8000" value="4000">
                            <span class="input-value" id="calcLtrRentValue">$4,000/month</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Vacancy Rate</label>
                            <input type="range" class="input-slider" id="calcVacancyRate" min="0" max="20" value="5">
                            <span class="input-value" id="calcVacancyRateValue">5%</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Annual Rent Increase</label>
                            <input type="range" class="input-slider" id="calcRentIncrease" min="0" max="8" value="3">
                            <span class="input-value" id="calcRentIncreaseValue">3%</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Maintenance Expenses</label>
                            <input type="range" class="input-slider" id="calcLtrExpenses" min="100" max="800" value="200">
                            <span class="input-value" id="calcLtrExpensesValue">$200/month</span>
                        </div>
                    </div>

                    <!-- Compare Inputs -->
                    <div id="compareInputs" class="calc-input-section" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-bottom: 32px;">
                        <div class="input-group">
                            <label class="input-label">STR Nightly Rate</label>
                            <input type="range" class="input-slider" id="calcCompareStrRate" min="100" max="800" value="363">
                            <span class="input-value" id="calcCompareStrRateValue">$363/night</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">STR Occupancy</label>
                            <input type="range" class="input-slider" id="calcCompareStrOcc" min="30" max="95" value="75">
                            <span class="input-value" id="calcCompareStrOccValue">75%</span>
                        </div>
                        <div class="input-group">
                            <label class="input-label">LTR Monthly Rent</label>
                            <input type="range" class="input-slider" id="calcCompareLtrRent" min="2000" max="8000" value="4000">
                            <span class="input-value" id="calcCompareLtrRentValue">$4,000/month</span>
                        </div>
                    </div>

                    <!-- Summary Metrics -->
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; padding: 24px; background: var(--gray-50); border-radius: var(--radius-lg);">
                        <div style="text-align: center;">
                            <div class="small" style="margin-bottom: 4px;">Projected Monthly Cash Flow</div>
                            <div id="calcMonthlyCashFlow" class="h2" style="color: var(--success-green);">$2,533</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="small" style="margin-bottom: 4px;">Annual Return</div>
                            <div id="calcAnnualReturn" class="h2" style="color: var(--primary-blue);">$30,396</div>
                        </div>
                        <div style="text-align: center;">
                            <div class="small" style="margin-bottom: 4px;">Cash-on-Cash ROI</div>
                            <div id="calcROI" class="h2" style="color: var(--warning-yellow);">12.4%</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 9. LTR Analysis Section (Hidden by default, shown when LTR nav is clicked) -->
            <section id="ltr-analysis-section" style="display: none;">
                <!-- LTR Property Header -->
                <div class="card">
                    <div class="property-hero">
                        <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=600&h=400&fit=crop" 
                             alt="Property" 
                             class="property-image">
                        <div class="property-details">
                            <div class="property-address">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <div>
                                    <h1 class="h1">1514 - 150 East Liberty Street</h1>
                                    <p class="body">Toronto, Ontario M6K 3R5</p>
                                    <p class="h3" style="color: var(--primary-blue); margin-top: 8px;">$849,900</p>
                                </div>
                            </div>
                            <div class="metric-cards">
                                <div class="metric-card">
                                    <div class="metric-card-label">Monthly Rent</div>
                                    <div class="metric-card-value positive">$3,100</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-card-label">Cap Rate</div>
                                    <div class="metric-card-value">4.1%</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-card-label">Cash Flow</div>
                                    <div class="metric-card-value negative">-$1,846</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-card-label">Rental Demand</div>
                                    <div class="metric-card-value positive">High</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- LTR Comparable Rentals (Exact same style as STR Airbnb listings) -->
                <section class="comparables-section">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div>
                                <h2 class="h2" style="display: inline-flex; align-items: center; gap: 12px;">
                                    Comparable Long-Term Rentals
                                    <span style="display: inline-flex; align-items: center; gap: 4px; color: var(--success-green); font-size: 14px; font-weight: 500;">
                                        <span style="font-size: 10px;">●</span> 15 similar rentals found
                                    </span>
                                </h2>
                                <p class="body" style="margin-top: 8px; color: var(--gray-600);">Similar properties for rent in your neighborhood</p>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <span class="small" style="color: var(--gray-500);">Updated today</span>
                                <span style="padding: 6px 12px; background: linear-gradient(135deg, #3B82F6, #1E40AF); color: white; border-radius: 6px; font-size: 11px; font-weight: 700; text-transform: uppercase;">
                                    ● MARKET DATA
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparables-grid">
                        <!-- LTR Comparable 1 -->
                        <a href="https://www.realtor.ca/real-estate/123456" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                            <div class="comparable-card">
                                <div style="position: relative;">
                                    <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=600&h=400&fit=crop" 
                                         alt="LTR Comparable 1" 
                                         class="comparable-image">
                                    <div class="comparable-price">$4,200/mo</div>
                                    <span class="comparable-badge badge-top">Best Match</span>
                                </div>
                                <div class="comparable-details">
                                    <h3 class="comparable-title">2BR Luxury Condo • Liberty Village</h3>
                                    <div class="comparable-stats">
                                        <span class="comparable-stat">2 Bed</span>
                                        <span class="comparable-stat">2 Bath</span>
                                        <span class="comparable-stat">1,100 sqft</span>
                                    </div>
                                    <div class="comparable-revenue">
                                        <div>
                                            <div class="revenue-label">Listed</div>
                                            <div class="revenue-value">5 days ago</div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 12px; text-align: center;">
                                        <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View Listing →</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                        
                        <!-- LTR Comparable 2 -->
                        <a href="https://www.realtor.ca/real-estate/789012" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                            <div class="comparable-card">
                                <div style="position: relative;">
                                    <img src="https://images.unsplash.com/photo-1554995207-c18c203602cb?w=600&h=400&fit=crop" 
                                         alt="LTR Comparable 2" 
                                         class="comparable-image">
                                    <div class="comparable-price">$3,800/mo</div>
                                    <span class="comparable-badge badge-similar">Similar Size</span>
                                </div>
                                <div class="comparable-details">
                                    <h3 class="comparable-title">1BR+Den Modern • King West</h3>
                                    <div class="comparable-stats">
                                        <span class="comparable-stat">1+1 Bed</span>
                                        <span class="comparable-stat">1 Bath</span>
                                        <span class="comparable-stat">850 sqft</span>
                                    </div>
                                    <div class="comparable-revenue">
                                        <div>
                                            <div class="revenue-label">Listed</div>
                                            <div class="revenue-value">1 week ago</div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 12px; text-align: center;">
                                        <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View Listing →</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                        
                        <!-- LTR Comparable 3 -->
                        <a href="https://www.realtor.ca/real-estate/345678" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                            <div class="comparable-card">
                                <div style="position: relative;">
                                    <img src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=600&h=400&fit=crop" 
                                         alt="LTR Comparable 3" 
                                         class="comparable-image">
                                    <div class="comparable-price">$3,950/mo</div>
                                    <span class="comparable-badge badge-value">Great Value</span>
                                </div>
                                <div class="comparable-details">
                                    <h3 class="comparable-title">2BR Renovated • Queen West</h3>
                                    <div class="comparable-stats">
                                        <span class="comparable-stat">2 Bed</span>
                                        <span class="comparable-stat">1.5 Bath</span>
                                        <span class="comparable-stat">950 sqft</span>
                                    </div>
                                    <div class="comparable-revenue">
                                        <div>
                                            <div class="revenue-label">Listed</div>
                                            <div class="revenue-value">3 days ago</div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 12px; text-align: center;">
                                        <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View Listing →</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <!-- View All Button -->
                    <div style="text-align: center; margin-top: 24px;">
                        <button onclick="alert('In the live application, this would show all comparable rental listings.');" 
                                style="padding: 10px 24px; background: white; border: 1px solid var(--gray-300); border-radius: 8px; color: var(--gray-700); font-weight: 500; cursor: pointer; transition: all 0.2s;"
                                onmouseover="this.style.background='#F3F4F6'; this.style.borderColor='#9CA3AF';" 
                                onmouseout="this.style.background='white'; this.style.borderColor='#D1D5DB';">
                            View All Rental Comparables <span style="color: var(--gray-500); font-size: 12px;">(15 total)</span>
                        </button>
                    </div>
                </section>
                
                <!-- LTR Market Statistics (Exact same style as STR Airbnb stats) -->
                <div class="card">
                    <h2 class="h2" style="margin-bottom: 20px;">Long-Term Rental Market Statistics</h2>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; text-align: center;">
                        <div>
                            <div class="small" style="margin-bottom: 4px;">Average monthly rent</div>
                            <div class="h1" style="color: var(--gray-900);">$3,950</div>
                            <div style="font-size: 12px; color: var(--gray-500);">for 2BR units</div>
                        </div>
                        <div>
                            <div class="small" style="margin-bottom: 4px;">Vacancy rate</div>
                            <div class="h1" style="color: var(--primary-blue);">5%</div>
                            <div style="font-size: 12px; color: var(--gray-500);">Toronto average</div>
                        </div>
                        <div>
                            <div class="small" style="margin-bottom: 4px;">Days on Market</div>
                            <div class="h1" style="color: var(--success-green);">12 days</div>
                            <div style="font-size: 12px; color: var(--gray-500);">avg. listing duration</div>
                        </div>
                        <div>
                            <div class="small" style="margin-bottom: 4px;">Annual rent increase</div>
                            <div class="h1" style="color: var(--gray-900);">3.2%</div>
                            <div style="font-size: 12px; color: var(--gray-500);">market average</div>
                        </div>
                    </div>
                </div>
                
                <!-- LTR Rent Calculator (Exact same style as STR calculator) -->
                <section class="calculator-section">
                    <div class="card">
                        <h2 class="h3" style="margin-bottom: 20px;">
                            Long-Term Rental Calculator
                            <span class="info-icon" title="Adjust values to see rental income projections">?</span>
                        </h2>
                        <div class="calculator-inputs">
                            <div class="input-group">
                                <label class="input-label">Monthly Rent</label>
                                <input type="range" class="input-slider" id="ltrMonthlyRent" min="2500" max="6000" value="4000">
                                <span class="input-value" id="ltrMonthlyRentValue">$4,000/month</span>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Vacancy Rate</label>
                                <input type="range" class="input-slider" id="ltrVacancyRate" min="0" max="20" value="5">
                                <span class="input-value" id="ltrVacancyRateValue">5%</span>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Annual Rent Increase</label>
                                <input type="range" class="input-slider" id="ltrAnnualIncrease" min="0" max="10" value="3" step="0.5">
                                <span class="input-value" id="ltrAnnualIncreaseValue">3.0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calculator-results">
                        <h3 class="result-title">Projected Annual Income</h3>
                        <div class="result-value" id="ltrAnnualIncome">$45,600</div>
                        <p class="result-subtitle" id="ltrEffectiveText">After 5% vacancy rate</p>
                        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--gray-200);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                                <span class="small">5-Year Total Income</span>
                                <span class="h3" style="color: var(--primary-blue);" id="ltr5YearTotal">$242,184</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span class="small">vs. Short-Term Rental</span>
                                <span class="h3" style="color: var(--danger-red);" id="ltrVsSTR">-65%</span>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- LTR Cash Flow Comparison (Exact same style as STR cash flow cards) -->
                <section class="cashflow-comparison">
                    <div class="cashflow-card ltr" style="border: 2px solid var(--primary-blue);">
                        <div class="cashflow-header">
                            <h3 class="cashflow-title">
                                <svg width="20" height="20" fill="currentColor" style="color: var(--primary-blue);">
                                    <path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/>
                                </svg>
                                Long-Term Rental
                            </h3>
                            <span class="cashflow-badge" style="background: var(--primary-blue);">Current Analysis</span>
                        </div>
                        <div class="cashflow-breakdown">
                            <div class="cashflow-item">
                                <span class="cashflow-label">Monthly Rent</span>
                                <span class="cashflow-value positive" id="ltrMonthlyRentCard">+$4,000</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Mortgage Payment</span>
                                <span class="cashflow-value negative" id="ltrMortgageCardAlt">-$4,269</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Operating Expenses</span>
                                <span class="cashflow-value negative">-$200</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Net Cash Flow</span>
                                <span class="cashflow-value cashflow-total negative" id="ltrNetCashFlowCard">-$469</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cashflow-card str">
                        <div class="cashflow-header">
                            <h3 class="cashflow-title">
                                <svg width="20" height="20" fill="currentColor" style="color: var(--gray-500);">
                                    <path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/>
                                </svg>
                                Short-Term Rental
                            </h3>
                        </div>
                        <div class="cashflow-breakdown">
                            <div class="cashflow-item">
                                <span class="cashflow-label">Monthly Revenue</span>
                                <span class="cashflow-value positive">+$11,044</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Mortgage Payment</span>
                                <span class="cashflow-value negative">-$4,269</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Operating Expenses</span>
                                <span class="cashflow-value negative">-$2,761</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Net Cash Flow</span>
                                <span class="cashflow-value cashflow-total positive">+$4,014</span>
                            </div>
                        </div>
                    </div>
                </section>
            </section>
                </div> <!-- End Main Content Area -->
            </div> <!-- End Flex Container -->
        </div> <!-- End Container -->
    </main>
    
    <script>
        // Sidebar Navigation Functions
        function handleNavClick(button, section) {
            // Remove active class from all buttons
            document.querySelectorAll('.sidebar-nav-item').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            button.classList.add('active');
            
            // Get all main sections
            const allSections = document.querySelectorAll('main > section, main > div');
            const ltrSection = document.getElementById('ltr-analysis-section');
            const strVsLtrSection = document.getElementById('str-vs-ltr-section');
            const financialSection = document.getElementById('financial-calculator-section');
            
            // Show/hide sections based on selection
            if (section === 'ltr') {
                // Hide all sections except LTR
                allSections.forEach(el => {
                    if (el.tagName === 'SECTION' && el.id === 'ltr-analysis-section') {
                        el.style.display = 'block';
                    } else if (el.tagName === 'SECTION') {
                        el.style.display = 'none';
                    } else {
                        el.style.display = 'none';
                    }
                });
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else if (section === 'str' || section === 'overview') {
                // Show all non-section content and hide special sections
                allSections.forEach(el => {
                    if (el.tagName === 'SECTION') {
                        el.style.display = 'none';
                    } else {
                        el.style.display = '';
                    }
                });
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else if (section === 'financial') {
                // Hide all sections and show financial calculator
                document.querySelectorAll('main > section').forEach(el => {
                    el.style.display = 'none';
                });
                document.getElementById('financial-calculator-section').style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else if (section === 'comparison') {
                // Hide all sections and show STR vs LTR comparison
                document.querySelectorAll('main > section').forEach(el => {
                    el.style.display = 'none';
                });
                document.getElementById('str-vs-ltr-section').style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else if (section === 'investment') {
                // Show STR sections and scroll to investment planning area
                strSections.forEach(el => {
                    if (!el.id || el.id !== 'ltr-analysis-section') {
                        el.style.display = '';
                    }
                });
                ltrSection.style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            
            console.log('Navigating to:', section);
        }
        
        function toggleSidebar() {
            const sidebar = document.querySelector('aside');
            const collapseBtn = sidebar.querySelector('button[onclick="toggleSidebar()"] svg');
            
            if (sidebar.style.width === '60px') {
                // Expand
                sidebar.style.width = '280px';
                sidebar.classList.remove('sidebar-collapsed');
                collapseBtn.style.transform = 'rotate(0deg)';
                
                // Show text after animation
                setTimeout(() => {
                    sidebar.querySelectorAll('.sidebar-nav-item span, nav + div').forEach(el => {
                        el.style.display = '';
                    });
                }, 150);
            } else {
                // Collapse
                sidebar.querySelectorAll('.sidebar-nav-item span, nav + div').forEach(el => {
                    el.style.display = 'none';
                });
                
                sidebar.style.width = '60px';
                sidebar.classList.add('sidebar-collapsed');
                collapseBtn.style.transform = 'rotate(180deg)';
            }
        }
        
        // Constants
        const PROPERTY_PRICE = 849900;
        
        // Calculate mortgage payment
        function calculateMortgage(principal, rate, years) {
            if (rate === 0) return principal / (years * 12);
            const monthlyRate = rate / 12;
            const numPayments = years * 12;
            return principal * (monthlyRate * Math.pow(1 + monthlyRate, numPayments)) / 
                   (Math.pow(1 + monthlyRate, numPayments) - 1);
        }
        
        // Update simple STR calculator
        function updateSimpleCalculator() {
            const nightlyRate = parseFloat(document.getElementById('nightlyRate').value);
            const occupancyRate = parseFloat(document.getElementById('occupancyRate').value) / 100;
            const cleaningFee = parseFloat(document.getElementById('cleaningFee').value);
            
            // Calculate monthly revenue
            const nightsBooked = Math.round(30.4 * occupancyRate);
            const monthlyRevenue = Math.round((nightlyRate * nightsBooked) + (cleaningFee * 4));
            const annualRevenue = monthlyRevenue * 12;
            
            // Update display
            document.getElementById('nightlyRateValue').textContent = `$${nightlyRate}/night`;
            document.getElementById('occupancyRateValue').textContent = `${Math.round(occupancyRate * 100)}%`;
            document.getElementById('cleaningFeeValue').textContent = `$${cleaningFee}`;
            document.getElementById('monthlyRevenueResult').textContent = `$${monthlyRevenue.toLocaleString()}`;
            document.getElementById('nightsBookedText').textContent = `Based on ${nightsBooked} nights booked per month`;
            document.getElementById('annualRevenueCalc').textContent = `$${annualRevenue.toLocaleString()}`;
            
            const ltrRent = parseFloat(document.getElementById('ltrRentSlider').value);
            const vsLTR = Math.round(((monthlyRevenue - ltrRent) / ltrRent) * 100);
            document.getElementById('vsLTRCalc').textContent = vsLTR > 0 ? `+${vsLTR}%` : `${vsLTR}%`;
        }
        
        function updateFinancialCalculator() {
            // Get all input values
            const strNightlyRate = parseFloat(document.getElementById('strNightlySlider').value);
            const strOccupancy = parseFloat(document.getElementById('strOccupancySlider').value) / 100;
            const ltrRent = parseFloat(document.getElementById('ltrRentSlider').value);
            const mgmtFee = parseFloat(document.getElementById('mgmtFeeSlider').value) / 100;
            
            // Check if financing is enabled
            const financingEnabled = document.getElementById('financingToggle').checked;
            let mortgagePayment = 0;
            let downPaymentAmount = PROPERTY_PRICE; // Default to full price for cash purchase
            
            if (financingEnabled) {
                const downPaymentPercent = parseFloat(document.getElementById('downPaymentSlider').value) / 100;
                const interestRate = parseFloat(document.getElementById('interestRateSlider').value) / 100;
                const loanTerm = parseFloat(document.getElementById('loanTermSlider').value);
                
                downPaymentAmount = PROPERTY_PRICE * downPaymentPercent;
                const loanAmount = PROPERTY_PRICE - downPaymentAmount;
                
                // Calculate mortgage payment
                if (loanAmount > 0) {
                    mortgagePayment = calculateMortgage(loanAmount, interestRate, loanTerm);
                }
                
                // Update financing display
                document.getElementById('downPaymentAmount').textContent = `$${Math.round(downPaymentAmount).toLocaleString()}`;
                document.getElementById('mortgagePayment').textContent = `-$${Math.round(mortgagePayment).toLocaleString()}`;
            }
            
            // Calculate STR revenue and expenses
            const monthlyRevenue = strNightlyRate * 30.4 * strOccupancy;
            const monthlyMgmtFee = monthlyRevenue * mgmtFee;
            const monthlyOperatingExpenses = monthlyMgmtFee + 500; // Base operating expenses
            const strNetCashFlow = monthlyRevenue - mortgagePayment - monthlyOperatingExpenses;
            
            // Calculate LTR cash flow
            const ltrOperatingExpenses = 200; // Lower operating expenses for LTR
            const ltrNetCashFlow = ltrRent - mortgagePayment - ltrOperatingExpenses;
            
            // Update display values
            document.getElementById('strNightlyValue').textContent = `$${strNightlyRate}`;
            document.getElementById('strOccupancyValue').textContent = `${Math.round(strOccupancy * 100)}%`;
            document.getElementById('ltrRentValue').textContent = `$${ltrRent.toLocaleString()}`;
            document.getElementById('mgmtFeeValue').textContent = `${Math.round(mgmtFee * 100)}%`;
            
            if (financingEnabled) {
                document.getElementById('downPaymentValue').textContent = `${document.getElementById('downPaymentSlider').value}%`;
                document.getElementById('interestRateValue').textContent = `${document.getElementById('interestRateSlider').value}%`;
                document.getElementById('loanTermValue').textContent = `${document.getElementById('loanTermSlider').value} years`;
            }
            
            // Update bar chart
            const maxCashFlow = 10000;
            const strBarHeight = Math.max(10, Math.min(180, (strNetCashFlow / maxCashFlow) * 180));
            const strBarY = 230 - strBarHeight;
            
            const ltrBarHeight = Math.max(10, Math.min(180, (ltrNetCashFlow / maxCashFlow) * 180));
            const ltrBarY = 230 - ltrBarHeight;
            
            document.getElementById('strBar').setAttribute('height', strBarHeight);
            document.getElementById('strBar').setAttribute('y', strBarY);
            document.getElementById('strBar').setAttribute('fill', strNetCashFlow >= 0 ? '#10b981' : '#ef4444');
            document.getElementById('strBarValue').textContent = `$${Math.round(strNetCashFlow).toLocaleString()}`;
            document.getElementById('strBarValue').setAttribute('y', strBarY - 10);
            
            document.getElementById('ltrBar').setAttribute('height', ltrBarHeight);
            document.getElementById('ltrBar').setAttribute('y', ltrBarY);
            document.getElementById('ltrBar').setAttribute('fill', ltrNetCashFlow >= 0 ? '#6b7280' : '#ef4444');
            document.getElementById('ltrBarValue').textContent = `$${Math.round(ltrNetCashFlow).toLocaleString()}`;
            document.getElementById('ltrBarValue').setAttribute('y', ltrBarY - 10);
            
            // Update comparison metrics
            const strAdvantage = strNetCashFlow - ltrNetCashFlow;
            document.getElementById('strAdvantage').textContent = 
                strAdvantage >= 0 ? `+$${Math.round(strAdvantage).toLocaleString()}/mo` : 
                `-$${Math.abs(Math.round(strAdvantage)).toLocaleString()}/mo`;
            document.getElementById('annualDifference').textContent = 
                strAdvantage >= 0 ? `+$${Math.round(strAdvantage * 12).toLocaleString()}/yr` : 
                `-$${Math.abs(Math.round(strAdvantage * 12)).toLocaleString()}/yr`;
            
            // Update summary metrics
            const annualRevenue = monthlyRevenue * 12;
            const annualExpenses = (mortgagePayment + monthlyOperatingExpenses) * 12;
            const netAnnualIncome = annualRevenue - annualExpenses;
            
            document.getElementById('strRevenueSum').textContent = `$${Math.round(annualRevenue).toLocaleString()}/yr`;
            document.getElementById('totalExpensesSum').textContent = `-$${Math.round(annualExpenses).toLocaleString()}/yr`;
            document.getElementById('netIncomeSum').textContent = 
                netAnnualIncome >= 0 ? `$${Math.round(netAnnualIncome).toLocaleString()}/yr` : 
                `-$${Math.abs(Math.round(netAnnualIncome)).toLocaleString()}/yr`;
            
            // Calculate returns
            const cashOnCash = downPaymentAmount > 0 ? (netAnnualIncome / downPaymentAmount) * 100 : 0;
            const capRate = (netAnnualIncome / PROPERTY_PRICE) * 100;
            
            document.getElementById('cashOnCash').textContent = `${cashOnCash.toFixed(1)}%`;
            document.getElementById('capRate').textContent = `${capRate.toFixed(1)}%`;
            
            // Update top metrics
            document.getElementById('netCashFlowDisplay').textContent = 
                strNetCashFlow >= 0 ? `+$${Math.round(strNetCashFlow).toLocaleString()}` : 
                `-$${Math.abs(Math.round(strNetCashFlow)).toLocaleString()}`;
            document.getElementById('roiDisplay').textContent = `${cashOnCash.toFixed(1)}%`;
            
            // Update cash flow comparison cards
            document.getElementById('strRevenueCard').textContent = `+$${Math.round(monthlyRevenue).toLocaleString()}`;
            document.getElementById('strMortgageCard').textContent = `-$${Math.round(mortgagePayment).toLocaleString()}`;
            document.getElementById('strExpensesCard').textContent = `-$${Math.round(monthlyOperatingExpenses).toLocaleString()}`;
            document.getElementById('strCashFlowCard').textContent = 
                strNetCashFlow >= 0 ? `+$${Math.round(strNetCashFlow).toLocaleString()}` : 
                `-$${Math.abs(Math.round(strNetCashFlow)).toLocaleString()}`;
            document.getElementById('strCashFlowCard').className = strNetCashFlow >= 0 ? 
                'cashflow-value cashflow-total positive' : 'cashflow-value cashflow-total negative';
            
            document.getElementById('ltrRentCard').textContent = `+$${Math.round(ltrRent).toLocaleString()}`;
            document.getElementById('ltrMortgageCard').textContent = `-$${Math.round(mortgagePayment).toLocaleString()}`;
            document.getElementById('ltrCashFlowCard').textContent = 
                ltrNetCashFlow >= 0 ? `+$${Math.round(ltrNetCashFlow).toLocaleString()}` : 
                `-$${Math.abs(Math.round(ltrNetCashFlow)).toLocaleString()}`;
            document.getElementById('ltrCashFlowCard').className = ltrNetCashFlow >= 0 ? 
                'cashflow-value cashflow-total positive' : 'cashflow-value cashflow-total negative';
        }
        
        // Financing toggle handler
        document.getElementById('financingToggle').addEventListener('change', function() {
            const financingSection = document.getElementById('financingSection');
            if (this.checked) {
                financingSection.classList.remove('disabled');
            } else {
                financingSection.classList.add('disabled');
            }
            updateFinancialCalculator();
        });
        
        // Event listeners for simple calculator
        document.getElementById('nightlyRate').addEventListener('input', updateSimpleCalculator);
        document.getElementById('occupancyRate').addEventListener('input', updateSimpleCalculator);
        document.getElementById('cleaningFee').addEventListener('input', updateSimpleCalculator);
        
        // Event listeners for financial calculator sliders
        document.getElementById('strNightlySlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('strOccupancySlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('ltrRentSlider').addEventListener('input', function() {
            updateFinancialCalculator();
            updateSimpleCalculator(); // Also update simple calculator
        });
        document.getElementById('mgmtFeeSlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('downPaymentSlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('interestRateSlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('loanTermSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('loanTermValue').textContent = value === '1' ? '1 year' : `${value} years`;
            updateFinancialCalculator();
        });
        
        // Reset button
        document.getElementById('resetBtn').addEventListener('click', function() {
            // Reset simple calculator
            document.getElementById('nightlyRate').value = 185;
            document.getElementById('occupancyRate').value = 78;
            document.getElementById('cleaningFee').value = 75;
            
            // Reset financial calculator
            document.getElementById('strNightlySlider').value = 363;
            document.getElementById('strOccupancySlider').value = 75;
            document.getElementById('ltrRentSlider').value = 4000;
            document.getElementById('mgmtFeeSlider').value = 25;
            document.getElementById('downPaymentSlider').value = 20;
            document.getElementById('interestRateSlider').value = 6.5;
            document.getElementById('loanTermSlider').value = 30;
            document.getElementById('loanTermValue').textContent = '30 years';
            document.getElementById('financingToggle').checked = true;
            document.getElementById('financingSection').classList.remove('disabled');
            
            updateSimpleCalculator();
            updateFinancialCalculator();
        });
        
        // LTR Calculator Functions
        function updateLTRCalculator() {
            const monthlyRent = parseFloat(document.getElementById('ltrMonthlyRent').value);
            const vacancyRate = parseFloat(document.getElementById('ltrVacancyRate').value) / 100;
            const annualIncrease = parseFloat(document.getElementById('ltrAnnualIncrease').value) / 100;
            
            // Calculate effective annual income
            const effectiveMonthlyIncome = monthlyRent * (1 - vacancyRate);
            const annualIncome = effectiveMonthlyIncome * 12;
            
            // Calculate 5-year total with annual increases
            let total5Year = 0;
            for (let year = 0; year < 5; year++) {
                total5Year += annualIncome * Math.pow(1 + annualIncrease, year);
            }
            
            // Update displays
            document.getElementById('ltrMonthlyRentValue').textContent = `$${monthlyRent.toLocaleString()}/month`;
            document.getElementById('ltrVacancyRateValue').textContent = `${(vacancyRate * 100).toFixed(0)}%`;
            document.getElementById('ltrAnnualIncreaseValue').textContent = `${(annualIncrease * 100).toFixed(1)}%`;
            
            document.getElementById('ltrAnnualIncome').textContent = `$${Math.round(annualIncome).toLocaleString()}`;
            document.getElementById('ltrEffectiveText').textContent = `After ${(vacancyRate * 100).toFixed(0)}% vacancy rate`;
            document.getElementById('ltr5YearTotal').textContent = `$${Math.round(total5Year).toLocaleString()}`;
            
            // Compare to STR (simplified)
            const strAnnualRevenue = 132000; // From STR calculations
            const difference = ((annualIncome - strAnnualRevenue) / strAnnualRevenue * 100);
            document.getElementById('ltrVsSTR').textContent = `${difference > 0 ? '+' : ''}${difference.toFixed(0)}%`;
        }
        
        // LTR Calculator Event Listeners
        if (document.getElementById('ltrMonthlyRent')) {
            document.getElementById('ltrMonthlyRent').addEventListener('input', updateLTRCalculator);
            document.getElementById('ltrVacancyRate').addEventListener('input', updateLTRCalculator);
            document.getElementById('ltrAnnualIncrease').addEventListener('input', updateLTRCalculator);
        }
        
        // Financial Calculator Mode Functions
        function setCalculatorMode(mode) {
            // Update button states
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(mode + 'ModeBtn').classList.add('active');
            
            // Hide all charts and input sections
            document.getElementById('compareChart').style.display = 'none';
            document.getElementById('strChart').style.display = 'none';
            document.getElementById('ltrChart').style.display = 'none';
            
            document.getElementById('strInputs').style.display = 'none';
            document.getElementById('ltrInputs').style.display = 'none';
            document.getElementById('compareInputs').style.display = 'none';
            
            // Show selected chart and inputs
            if (mode === 'compare') {
                document.getElementById('compareChart').style.display = 'block';
                document.getElementById('compareInputs').style.display = 'grid';
            } else if (mode === 'str') {
                document.getElementById('strChart').style.display = 'block';
                document.getElementById('strInputs').style.display = 'grid';
            } else if (mode === 'ltr') {
                document.getElementById('ltrChart').style.display = 'block';
                document.getElementById('ltrInputs').style.display = 'grid';
            }
            
            updateCalculatorDisplay(mode);
        }
        
        function updateCalculatorDisplay(mode) {
            // Update summary metrics based on current mode
            const strRate = parseFloat(document.getElementById('calcStrNightlyRate') ? document.getElementById('calcStrNightlyRate').value : 363);
            const strOcc = parseFloat(document.getElementById('calcStrOccupancy') ? document.getElementById('calcStrOccupancy').value : 75) / 100;
            const ltrRent = parseFloat(document.getElementById('calcLtrRent') ? document.getElementById('calcLtrRent').value : 4000);
            
            const strRevenue = strRate * 30.4 * strOcc;
            const strCashFlow = strRevenue - 3249 - 500; // Mortgage + expenses
            const ltrCashFlow = ltrRent - 3249 - 200; // Mortgage + lower expenses
            
            if (mode === 'str') {
                document.getElementById('calcMonthlyCashFlow').textContent = `$${Math.round(strCashFlow).toLocaleString()}`;
                document.getElementById('calcAnnualReturn').textContent = `$${Math.round(strCashFlow * 12).toLocaleString()}`;
                document.getElementById('calcROI').textContent = '12.4%';
            } else if (mode === 'ltr') {
                document.getElementById('calcMonthlyCashFlow').textContent = `$${Math.round(ltrCashFlow).toLocaleString()}`;
                document.getElementById('calcAnnualReturn').textContent = `$${Math.round(ltrCashFlow * 12).toLocaleString()}`;
                document.getElementById('calcROI').textContent = '2.7%';
            } else {
                const advantage = strCashFlow - ltrCashFlow;
                document.getElementById('calcMonthlyCashFlow').textContent = `+$${Math.round(advantage).toLocaleString()}`;
                document.getElementById('calcAnnualReturn').textContent = `$${Math.round(strCashFlow).toLocaleString()} vs $${Math.round(ltrCashFlow).toLocaleString()}`;
                document.getElementById('calcROI').textContent = 'STR: 12.4% | LTR: 2.7%';
            }
        }
        
        // Decision Scorecard Functions
        function updateScorecard() {
            const timeCommitment = parseInt(document.getElementById('timeCommitmentSlider').value);
            const riskTolerance = parseInt(document.getElementById('riskToleranceSlider').value);
            const investmentGoals = parseInt(document.getElementById('investmentGoalsSlider').value);
            const localTourism = parseInt(document.getElementById('localTourismSlider').value);
            
            // Update display values
            const timeLabels = ['Minimal', 'Very Low', 'Low', 'Low-Mod', 'Moderate', 'Mod-High', 'High', 'Very High', 'Intensive', 'Very hands-on'];
            const riskLabels = ['Very Conservative', 'Conservative', 'Low Risk', 'Low-Mod', 'Moderate', 'Mod-High', 'Higher Risk', 'High Risk', 'Very High', 'Maximum Risk'];
            const goalLabels = ['Steady Income', 'Conservative', 'Income Focus', 'Balanced-Income', 'Balanced', 'Growth-Income', 'Growth Focus', 'High Growth', 'Maximum Growth', 'Maximum Returns'];
            const tourismLabels = ['Very Limited', 'Limited', 'Low', 'Low-Moderate', 'Moderate', 'Good', 'Strong', 'Very Strong', 'Excellent', 'Outstanding'];
            
            document.getElementById('timeCommitmentValue').textContent = `${timeLabels[timeCommitment - 1]} (${timeCommitment}/10)`;
            document.getElementById('riskToleranceValue').textContent = `${riskLabels[riskTolerance - 1]} (${riskTolerance}/10)`;
            document.getElementById('investmentGoalsValue').textContent = `${goalLabels[investmentGoals - 1]} (${investmentGoals}/10)`;
            document.getElementById('localTourismValue').textContent = `${tourismLabels[localTourism - 1]} (${localTourism}/10)`;
            
            // Calculate scores
            const strScore = calculateStrScore(timeCommitment, riskTolerance, investmentGoals, localTourism);
            const ltrScore = calculateLtrScore(timeCommitment, riskTolerance, investmentGoals, localTourism);
            
            document.getElementById('strScore').textContent = `${strScore.toFixed(1)}/10`;
            document.getElementById('ltrScore').textContent = `${ltrScore.toFixed(1)}/10`;
            
            // Update recommendation
            const recommendation = document.getElementById('scorecardRecommendation');
            if (strScore > ltrScore) {
                recommendation.style.background = 'linear-gradient(135deg, #10B981 0%, #065F46 100%)';
                recommendation.querySelector('.h2').textContent = 'Recommendation: Short-Term Rental';
                recommendation.querySelector('.body').textContent = 'Based on your preferences, STR aligns well with your investment goals and local market conditions.';
            } else {
                recommendation.style.background = 'linear-gradient(135deg, #6B7280 0%, #374151 100%)';
                recommendation.querySelector('.h2').textContent = 'Recommendation: Long-Term Rental';
                recommendation.querySelector('.body').textContent = 'Based on your preferences, LTR better matches your risk tolerance and time availability.';
            }
        }
        
        function calculateStrScore(time, risk, goals, tourism) {
            // STR benefits from higher time commitment, risk tolerance, growth goals, and tourism
            let score = 5.0; // Base score
            
            // Time commitment (STR requires more time)
            score += (time - 5) * 0.3;
            
            // Risk tolerance (STR is riskier)
            score += (risk - 5) * 0.4;
            
            // Investment goals (STR better for growth)
            score += (goals - 5) * 0.3;
            
            // Tourism strength (critical for STR)
            score += (tourism - 5) * 0.5;
            
            // Market advantage bonus
            score += 1.5; // STR has financial advantage in this market
            
            return Math.max(1, Math.min(10, score));
        }
        
        function calculateLtrScore(time, risk, goals, tourism) {
            // LTR benefits from lower time commitment, lower risk tolerance, income focus
            let score = 5.0; // Base score
            
            // Time commitment (LTR requires less time)
            score += (5 - time) * 0.4;
            
            // Risk tolerance (LTR is less risky)
            score += (5 - risk) * 0.3;
            
            // Investment goals (LTR better for steady income)
            score += (5 - goals) * 0.2;
            
            // Tourism doesn't affect LTR as much
            score += (tourism - 5) * 0.1;
            
            // Stability bonus
            score += 0.5; // LTR is more stable
            
            return Math.max(1, Math.min(10, score));
        }
        
        // Event listeners for new elements
        if (document.getElementById('timeCommitmentSlider')) {
            document.getElementById('timeCommitmentSlider').addEventListener('input', updateScorecard);
            document.getElementById('riskToleranceSlider').addEventListener('input', updateScorecard);
            document.getElementById('investmentGoalsSlider').addEventListener('input', updateScorecard);
            document.getElementById('localTourismSlider').addEventListener('input', updateScorecard);
        }
        
        // Calculator input event listeners
        ['calcStrNightlyRate', 'calcStrOccupancy', 'calcMgmtFee', 'calcStrExpenses'].forEach(id => {
            if (document.getElementById(id)) {
                document.getElementById(id).addEventListener('input', function() {
                    document.getElementById(id.replace('calc', '').replace('Rate', 'Value').replace('Occupancy', 'OccupancyValue')).textContent = 
                        id.includes('Rate') ? `$${this.value}/night` :
                        id.includes('Occupancy') ? `${this.value}%` :
                        id.includes('Fee') ? `${this.value}%` :
                        `$${this.value}/month`;
                    updateCalculatorDisplay('str');
                });
            }
        });
        
        ['calcLtrRent', 'calcVacancyRate', 'calcRentIncrease', 'calcLtrExpenses'].forEach(id => {
            if (document.getElementById(id)) {
                document.getElementById(id).addEventListener('input', function() {
                    document.getElementById(id.replace('calc', '') + 'Value').textContent = 
                        id.includes('Rent') ? `$${parseInt(this.value).toLocaleString()}/month` :
                        id.includes('Rate') || id.includes('Increase') ? `${this.value}%` :
                        `$${this.value}/month`;
                    updateCalculatorDisplay('ltr');
                });
            }
        });
        
        ['calcCompareStrRate', 'calcCompareStrOcc', 'calcCompareLtrRent'].forEach(id => {
            if (document.getElementById(id)) {
                document.getElementById(id).addEventListener('input', function() {
                    document.getElementById(id + 'Value').textContent = 
                        id.includes('Rate') ? `$${this.value}/night` :
                        id.includes('Occ') ? `${this.value}%` :
                        `$${parseInt(this.value).toLocaleString()}/month`;
                    updateCalculatorDisplay('compare');
                });
            }
        });

        // Initial calculations
        updateSimpleCalculator();
        updateFinancialCalculator();
        if (document.getElementById('ltrMonthlyRent')) {
            updateLTRCalculator();
        }
        // Initialize new features
        if (document.getElementById('timeCommitmentSlider')) {
            updateScorecard();
        }
    </script>
</body>
</html>