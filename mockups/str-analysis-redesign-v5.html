<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STR Analysis Redesign V3 - Optional Financing</title>
    <style>
        :root {
            --primary-blue: #3B82F6;
            --success-green: #10B981;
            --danger-red: #EF4444;
            --warning-yellow: #F59E0B;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --gray-900: #111827;
            --gradient-primary: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            --gradient-success: linear-gradient(135deg, #10B981 0%, #065F46 100%);
            --gradient-danger: linear-gradient(135deg, #EF4444 0%, #991B1B 100%);
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--gray-900);
            background: linear-gradient(to bottom right, #EBF8FF, #F3E8FF);
            min-height: 100vh;
        }
        
        /* Typography */
        .h1 { font-size: 32px; font-weight: 700; line-height: 1.2; }
        .h2 { font-size: 24px; font-weight: 600; line-height: 1.3; }
        .h3 { font-size: 18px; font-weight: 600; line-height: 1.4; }
        .body { font-size: 16px; font-weight: 400; line-height: 1.6; }
        .small { font-size: 14px; font-weight: 400; line-height: 1.5; color: var(--gray-600); }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: white;
            box-shadow: var(--shadow-sm);
            padding: 20px 0;
            margin-bottom: 32px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .version-badge {
            display: inline-block;
            padding: 6px 12px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        /* Card Component */
        .card {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: 24px;
            margin-bottom: 24px;
        }
        
        /* Property Hero */
        .property-hero {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
            align-items: center;
        }
        
        .property-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: var(--radius-md);
        }
        
        .property-details {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .property-address {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .property-address svg {
            width: 24px;
            height: 24px;
            color: var(--primary-blue);
            margin-top: 4px;
        }
        
        .metric-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }
        
        .metric-card {
            padding: 12px;
            background: var(--gray-50);
            border-radius: var(--radius-md);
            text-align: center;
        }
        
        .metric-card-label {
            font-size: 12px;
            color: var(--gray-600);
            margin-bottom: 4px;
        }
        
        .metric-card-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--gray-900);
        }
        
        .metric-card-value.positive { color: var(--success-green); }
        .metric-card-value.negative { color: var(--danger-red); }
        
        /* Comparables Grid */
        .comparables-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .comparable-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        
        .comparable-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }
        
        .comparable-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .comparable-price {
            position: absolute;
            bottom: 12px;
            left: 12px;
            background: white;
            padding: 6px 12px;
            border-radius: var(--radius-md);
            font-size: 20px;
            font-weight: 700;
            box-shadow: var(--shadow-lg);
        }
        
        .comparable-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 10px;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: white;
        }
        
        .badge-top { background: var(--gradient-success); }
        .badge-similar { background: var(--gradient-primary); }
        .badge-value { background: var(--gradient-danger); }
        
        .comparable-details {
            padding: 16px;
        }
        
        .comparable-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--gray-900);
        }
        
        .comparable-stats {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        
        .comparable-stat {
            font-size: 13px;
            color: var(--gray-600);
        }
        
        .comparable-rating {
            color: var(--warning-yellow);
            font-weight: 600;
        }
        
        .comparable-revenue {
            display: flex;
            justify-content: space-between;
            padding-top: 12px;
            border-top: 1px solid var(--gray-200);
        }
        
        .revenue-label {
            font-size: 12px;
            color: var(--gray-600);
        }
        
        .revenue-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--success-green);
        }
        
        /* Calculator Section */
        .calculator-section {
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: 24px;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 32px;
            margin-bottom: 24px;
        }
        
        .calculator-inputs {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .input-group {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .input-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-700);
            min-width: 120px;
        }
        
        .input-slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 3px;
            background: var(--gray-300);
            outline: none;
            transition: all 0.3s ease;
        }
        
        .input-slider:hover {
            background: var(--gray-400);
        }
        
        .input-slider:focus {
            background: var(--gray-400);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .input-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-blue);
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .input-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            background: #2563eb;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .input-slider::-webkit-slider-thumb:active {
            transform: scale(1.2);
            background: #1d4ed8;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
        }
        
        .input-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-blue);
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .input-slider::-moz-range-thumb:hover {
            transform: scale(1.1);
            background: #2563eb;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .input-value {
            min-width: 80px;
            text-align: right;
            font-weight: 600;
            color: var(--gray-900);
        }
        
        /* Enhanced button feedback */
        button {
            transition: all 0.2s ease;
        }
        
        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .sidebar-nav-item {
            transition: all 0.2s ease;
        }
        
        .sidebar-nav-item:hover {
            transform: translateX(4px);
            background-color: rgba(59, 130, 246, 0.05);
        }
        
        .sidebar-nav-item:active {
            transform: translateX(2px);
        }
        
        /* Comparable cards enhanced feedback */
        .comparable-card {
            transition: all 0.3s ease;
        }
        
        .comparable-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }
        
        .comparable-card:active {
            transform: translateY(-2px);
        }
        
        .calculator-results {
            background: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            text-align: center;
        }
        
        .result-title {
            font-size: 14px;
            color: var(--gray-600);
            margin-bottom: 8px;
        }
        
        .result-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--success-green);
            margin-bottom: 8px;
        }
        
        .result-subtitle {
            font-size: 13px;
            color: var(--gray-500);
        }
        
        /* Cash Flow Comparison */
        .cashflow-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }
        
        .cashflow-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-md);
        }
        
        .cashflow-card.str {
            border: 2px solid var(--success-green);
        }
        
        .cashflow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .cashflow-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .cashflow-badge {
            padding: 4px 10px;
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .badge-recommended {
            background: var(--success-green);
            color: white;
        }
        
        .cashflow-breakdown {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .cashflow-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--gray-100);
        }
        
        .cashflow-item:last-child {
            border-bottom: none;
            border-top: 2px solid var(--gray-200);
            padding-top: 12px;
            margin-top: 8px;
        }
        
        .cashflow-label {
            font-size: 14px;
            color: var(--gray-600);
        }
        
        .cashflow-value {
            font-size: 16px;
            font-weight: 600;
        }
        
        .cashflow-value.positive { color: var(--success-green); }
        .cashflow-value.negative { color: var(--danger-red); }
        
        .cashflow-total {
            font-size: 20px;
            font-weight: 700;
        }
        
        /* Financial Calculator Section */
        .financial-calculator-section {
            margin-top: 32px;
        }
        
        .info-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background: var(--gray-300);
            color: var(--gray-700);
            border-radius: 50%;
            font-size: 12px;
            font-weight: 600;
            cursor: help;
            margin-left: 8px;
        }
        
        /* Toggle Switch */
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--gray-50);
            border-radius: var(--radius-md);
            margin-bottom: 16px;
        }
        
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-400);
            transition: 0.3s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--primary-blue);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        .toggle-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-700);
        }
        
        /* Disabled state */
        .financing-section {
            transition: opacity 0.3s, filter 0.3s;
        }
        
        .financing-section.disabled {
            opacity: 0.5;
            filter: grayscale(50%);
            pointer-events: none;
        }
        
        /* Main 3-Column Grid Layout */
        .main-layout-grid {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 24px;
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 20px;
            min-height: calc(100vh - 140px);
        }
        
        .main-layout-grid .sidebar-left {
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        
        .main-layout-grid .main-content-center {
            min-width: 0;
        }
        
        .main-layout-grid .sidebar-right {
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        
        /* Responsive grid - on mobile stack vertically */
        @media (max-width: 1200px) {
            .main-layout-grid {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
            }
            
            .main-layout-grid .sidebar-left,
            .main-layout-grid .sidebar-right {
                position: static;
            }
        }

        /* Sidebar Navigation Styles */
        .sidebar-nav-item {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 6px;
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-700);
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            position: relative;
        }
        
        .sidebar-nav-item:hover {
            background: var(--gray-50);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
            transform: translateX(4px);
        }
        
        .sidebar-nav-item.active {
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            color: white;
            border-color: transparent;
        }
        
        .sidebar-nav-item.active:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-md);
        }
        
        .sidebar-nav-item svg {
            flex-shrink: 0;
        }
        
        .nav-badge {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            padding: 2px 8px;
            background: var(--success-green);
            color: white;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .sidebar-collapsed {
            width: 60px !important;
        }
        
        .sidebar-collapsed .sidebar-nav-item span {
            display: none;
        }
        
        .sidebar-collapsed .nav-badge {
            display: none;
        }
        
        /* Collapsed sidebar adjustments for grid */
        .main-layout-grid.sidebar-collapsed {
            grid-template-columns: 60px 1fr 320px;
        }
        
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .container {
                padding: 0 12px;
            }
            
            /* Mobile - convert grid to stacked layout */
            .main-layout-grid {
                grid-template-columns: 1fr !important;
                gap: 16px;
            }
            
            /* Make sidebar full width on mobile when open */
            .sidebar-left {
                width: 100% !important;
                position: fixed !important;
                top: 0;
                left: 0;
                height: 100vh;
                z-index: 1000;
                background: white;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar-left.open {
                transform: translateX(0);
                position: static;
            }
            
            .sidebar-right {
                position: static !important;
                order: 3;
            }
            
            .main-content-center {
                order: 2;
            }
            
            /* Comparables grid - 1 column on mobile */
            .comparables-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            /* Calculator inputs - stack vertically on mobile */
            .calculator-inputs {
                flex-direction: column;
                gap: 20px;
            }
            
            /* Financial assumptions - hide on mobile in STR mode to save space */
            .financial-assumptions {
                display: none;
            }
            
            /* Make input groups more touch-friendly */
            .input-group {
                margin-bottom: 20px;
            }
            
            .input-slider {
                height: 44px; /* Larger touch target */
            }
            
            /* Combined input styling for mobile */
            .combined-input {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }
            
            .combined-input input[type="number"] {
                width: 100%;
                padding: 12px;
                font-size: 16px; /* Prevent zoom on iOS */
            }
            
            /* Property hero mobile adjustments */
            .property-hero {
                grid-template-columns: 1fr;
                gap: 16px;
                text-align: center;
            }
            
            .property-image {
                height: 240px;
            }
            
            /* Metric cards - 2 columns on mobile */
            .metric-cards {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            /* Market statistics - stack on mobile */
            .market-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
        }
        
        @media (max-width: 480px) {
            /* Extra small screens - single column for metrics */
            .metric-cards {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .market-stats {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            /* Smaller padding on very small screens */
            .card {
                padding: 16px;
                margin-bottom: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div>
                    <h1 class="h2">STR Analysis UX Redesign Mockup V3</h1>
                    <p class="small">Optional financing toggle with proper mortgage calculations</p>
                </div>
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span class="version-badge">FINANCING OPTIONS</span>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Content with Sidebar -->
    <main class="main-content">
        <div class="main-layout-grid">
            <!-- Left Sidebar Navigation -->
            <aside class="sidebar-left">
                <div>
                        <div class="card" style="padding: 0; overflow: hidden;">
                            <!-- Sidebar Header -->
                            <div style="padding: 20px; background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%); color: white;">
                                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 4px;">Analysis Navigation</h3>
                                <p style="font-size: 12px; opacity: 0.9;">1514 - 150 East Liberty St</p>
                            </div>
                            
                            <!-- Navigation Items -->
                            <nav style="padding: 12px;">
                                <button class="sidebar-nav-item active" onclick="handleNavClick(this, 'overview')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
                                    </svg>
                                    <span>Property Overview</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'str')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"></path>
                                    </svg>
                                    <span>STR Analysis</span>
                                    <span class="nav-badge">Recommended</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'ltr')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm3 1h6v4H7V5zm6 6H7v2h6v-2z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>LTR Analysis</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'financial')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"></path>
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>Financial Calculator</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'investment')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2a1 1 0 000 2h6a1 1 0 100-2H7zm6 7a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1zm-3 3a1 1 0 100 2h.01a1 1 0 100-2H10zm-4 1a1 1 0 011-1h.01a1 1 0 110 2H7a1 1 0 01-1-1zm1-4a1 1 0 100 2h.01a1 1 0 100-2H7zm2 1a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1zm4-2a1 1 0 100 2h.01a1 1 0 100-2H13z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>Investment Planning</span>
                                </button>
                                
                                <button class="sidebar-nav-item" onclick="handleNavClick(this, 'comparison')">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1H3a1 1 0 01-1-1V4zM8 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1H9a1 1 0 01-1-1V4zM15 3a1 1 0 00-1 1v12a1 1 0 001 1h2a1 1 0 001-1V4a1 1 0 00-1-1h-2z"></path>
                                    </svg>
                                    <span>STR vs LTR</span>
                                </button>
                            </nav>
                            
                            <!-- Quick Actions -->
                            <div style="padding: 12px; border-top: 1px solid var(--gray-200);">
                                <button style="width: 100%; padding: 10px; background: var(--primary-blue); color: white; border: none; border-radius: 8px; font-weight: 500; cursor: pointer; margin-bottom: 8px;">
                                    📄 Generate PDF Report
                                </button>
                                <button style="width: 100%; padding: 10px; background: white; color: var(--gray-700); border: 1px solid var(--gray-300); border-radius: 8px; font-weight: 500; cursor: pointer;">
                                    🔗 Share Analysis
                                </button>
                            </div>
                            
                            <!-- Collapse Toggle -->
                            <button onclick="toggleSidebar()" style="position: absolute; top: 20px; right: -12px; width: 24px; height: 24px; background: white; border: 1px solid var(--gray-300); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: var(--shadow-sm);">
                                <svg width="12" height="12" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                </div>
            </aside>
                
            <!-- Center Content Area -->
            <div class="main-content-center">
            <!-- Property Hero Section - Shows generic property info, hidden in STR-only mode -->
            <div class="card" id="property-hero-section">
                <div class="property-hero">
                    <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=600&h=400&fit=crop" 
                         alt="Property" 
                         class="property-image">
                    <div class="property-details">
                        <div class="property-address">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <div>
                                <h1 class="h1">1514 - 150 East Liberty Street</h1>
                                <p class="body">Toronto, Ontario M6K 3R5</p>
                                <p class="h3" style="color: var(--primary-blue); margin-top: 8px;">$849,900</p>
                            </div>
                        </div>
                        <div class="metric-cards">
                            <div class="metric-card">
                                <div class="metric-card-label">Monthly Revenue</div>
                                <div class="metric-card-value positive">$11,044</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-card-label">Net Cash Flow</div>
                                <div class="metric-card-value positive" id="netCashFlowDisplay">+$8,500</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-card-label">ROI</div>
                                <div class="metric-card-value" id="roiDisplay">12.3%</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-card-label">Occupancy Rate</div>
                                <div class="metric-card-value">75%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- STR Analysis Section Start -->
            <div id="str-analysis-content">
            
            <!-- 2. Live Airbnb Comparables (moved to position #2) -->
            <section class="comparables-section">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h2 class="h2" style="display: inline-flex; align-items: center; gap: 12px;">
                                Live Airbnb Market Data
                                <span style="display: inline-flex; align-items: center; gap: 4px; color: var(--success-green); font-size: 14px; font-weight: 500;">
                                    <span style="font-size: 10px;">●</span> 20 active listings found
                                </span>
                            </h2>
                            <p class="body" style="margin-top: 8px; color: var(--gray-600);">Similar properties in your area performing well on Airbnb</p>
                        </div>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span class="small" style="color: var(--gray-500);">Updated 3 minutes ago</span>
                            <span style="padding: 6px 12px; background: linear-gradient(135deg, #EF4444, #F59E0B); color: white; border-radius: 6px; font-size: 11px; font-weight: 700; text-transform: uppercase;">
                                ● REAL MARKET DATA
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="comparables-grid">
                    <!-- Comparable 1 -->
                    <a href="https://www.airbnb.com/rooms/123456" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                        <div class="comparable-card">
                            <div style="position: relative;">
                                <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=600&h=400&fit=crop" 
                                     alt="Comparable 1" 
                                     class="comparable-image">
                                <div class="comparable-price">$209/night</div>
                                <span class="comparable-badge badge-top">Top Performer</span>
                            </div>
                            <div class="comparable-details">
                                <h3 class="comparable-title">Luxury 2BR Condo • King West</h3>
                                <div class="comparable-stats">
                                    <span class="comparable-stat comparable-rating">★ 4.92</span>
                                    <span class="comparable-stat">156 reviews</span>
                                    <span class="comparable-stat">85% booked</span>
                                </div>
                                <div class="comparable-revenue">
                                    <div>
                                        <div class="revenue-label">Monthly Revenue</div>
                                        <div class="revenue-value">$6,850</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; text-align: center;">
                                    <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View on Airbnb →</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Comparable 2 -->
                    <a href="https://www.airbnb.com/rooms/789012" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                        <div class="comparable-card">
                            <div style="position: relative;">
                                <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=600&h=400&fit=crop" 
                                     alt="Comparable 2" 
                                     class="comparable-image">
                                <div class="comparable-price">$175/night</div>
                                <span class="comparable-badge badge-similar">Most Similar</span>
                            </div>
                            <div class="comparable-details">
                                <h3 class="comparable-title">Modern 1BR+Den • Liberty Village</h3>
                                <div class="comparable-stats">
                                    <span class="comparable-stat comparable-rating">★ 4.85</span>
                                    <span class="comparable-stat">89 reviews</span>
                                    <span class="comparable-stat">78% booked</span>
                                </div>
                                <div class="comparable-revenue">
                                    <div>
                                        <div class="revenue-label">Monthly Revenue</div>
                                        <div class="revenue-value">$5,100</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; text-align: center;">
                                    <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View on Airbnb →</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Comparable 3 -->
                    <a href="https://www.airbnb.com/rooms/345678" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                        <div class="comparable-card">
                            <div style="position: relative;">
                                <img src="https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=600&h=400&fit=crop" 
                                     alt="Comparable 3" 
                                     class="comparable-image">
                                <div class="comparable-price">$165/night</div>
                                <span class="comparable-badge badge-value">Best Value</span>
                            </div>
                            <div class="comparable-details">
                                <h3 class="comparable-title">Cozy 1BR • Entertainment District</h3>
                                <div class="comparable-stats">
                                    <span class="comparable-stat comparable-rating">★ 4.78</span>
                                    <span class="comparable-stat">234 reviews</span>
                                    <span class="comparable-stat">82% booked</span>
                                </div>
                                <div class="comparable-revenue">
                                    <div>
                                        <div class="revenue-label">Monthly Revenue</div>
                                        <div class="revenue-value">$4,950</div>
                                    </div>
                                </div>
                                <div style="margin-top: 12px; text-align: center;">
                                    <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View on Airbnb →</span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                
                <!-- View All Button -->
                <div style="text-align: center; margin-top: 24px;">
                    <button onclick="alert('In the live application, this would expand to show all 20 comparable listings or navigate to a detailed comparables page.');" 
                            style="padding: 10px 24px; background: white; border: 1px solid var(--gray-300); border-radius: 8px; color: var(--gray-700); font-weight: 500; cursor: pointer; transition: all 0.2s; hover: background: var(--gray-50);"
                            onmouseover="this.style.background='#F3F4F6'; this.style.borderColor='#9CA3AF';" 
                            onmouseout="this.style.background='white'; this.style.borderColor='#D1D5DB';">
                        View All Comparable Listings <span style="color: var(--gray-500); font-size: 12px;">(20 total)</span>
                    </button>
                </div>
            </section>
            
            <!-- 3. Airbnb Market Statistics -->
            <div class="card">
                <h2 class="h2" style="margin-bottom: 20px;">Airbnb Market Statistics</h2>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; text-align: center;">
                    <div>
                        <div class="h1" style="color: var(--gray-900);">$447</div>
                        <div class="small">Average nightly rate</div>
                    </div>
                    <div>
                        <div class="h1" style="color: var(--primary-blue);">70%</div>
                        <div class="small">Average occupancy</div>
                    </div>
                    <div>
                        <div class="small" style="margin-bottom: 4px;">Projected Advantage</div>
                        <div class="h1" style="color: var(--success-green);">+$6,369/mo</div>
                        <div style="font-size: 12px; color: var(--gray-500);">over long-term rental</div>
                    </div>
                    <div>
                        <div class="h1" style="color: var(--gray-900);">4.5★</div>
                        <div class="small">Average rating</div>
                    </div>
                </div>
            </div>
            
            <!-- 4. STR Revenue Calculator -->
            <section class="calculator-section">
                <div class="card">
                    <h2 class="h3" style="margin-bottom: 20px;">
                        STR Revenue Calculator
                        <span class="info-icon" title="Adjust values to see revenue projections">?</span>
                    </h2>
                    <div class="calculator-inputs" style="display: flex; flex-direction: column; gap: 20px;">
                        <div class="input-group" style="margin-bottom: 0;">
                            <label class="input-label" style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 8px; display: block;">
                                Nightly Rate: <span id="nightlyRateValue" style="color: var(--primary-blue); font-size: 18px;">$185</span>
                            </label>
                            <div class="combined-input" style="display: flex; align-items: center; gap: 16px;">
                                <input type="range" class="input-slider" id="nightlyRate" min="100" max="400" value="185" style="flex: 1;">
                                <div style="display: flex; align-items: center;">
                                    <span style="padding: 8px 4px; font-size: 16px; color: var(--gray-600);">$</span>
                                    <input type="number" id="nightlyRateInput" value="185" min="100" max="400" 
                                           style="width: 70px; padding: 8px; border: 2px solid var(--gray-300); border-radius: 6px; font-size: 16px; font-weight: 500; text-align: center;">
                                </div>
                            </div>
                        </div>
                        <div class="input-group" style="margin-bottom: 0;">
                            <label class="input-label" style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 8px; display: block;">
                                Occupancy Rate: <span id="occupancyRateValue" style="color: var(--primary-blue); font-size: 18px;">75%</span>
                            </label>
                            <div class="combined-input" style="display: flex; align-items: center; gap: 16px;">
                                <input type="range" class="input-slider" id="occupancyRate" min="50" max="95" value="75" style="flex: 1;">
                                <div style="display: flex; align-items: center;">
                                    <input type="number" id="occupancyRateInput" value="75" min="50" max="95" 
                                           style="width: 60px; padding: 8px; border: 2px solid var(--gray-300); border-radius: 6px 0 0 6px; font-size: 16px; font-weight: 500; text-align: center; border-right: none;">
                                    <span style="padding: 8px 8px; background: var(--gray-100); border: 2px solid var(--gray-300); border-radius: 0 6px 6px 0; font-size: 16px; color: var(--gray-600);">%</span>
                                </div>
                            </div>
                        </div>
                        <div class="input-group" style="margin-bottom: 0;">
                            <label class="input-label" style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 8px; display: block;">
                                Cleaning Fee: <span id="cleaningFeeValue" style="color: var(--primary-blue); font-size: 18px;">$85</span>
                            </label>
                            <div class="combined-input" style="display: flex; align-items: center; gap: 16px;">
                                <input type="range" class="input-slider" id="cleaningFee" min="50" max="150" value="85" style="flex: 1;">
                                <div style="display: flex; align-items: center;">
                                    <span style="padding: 8px 4px; font-size: 16px; color: var(--gray-600);">$</span>
                                    <input type="number" id="cleaningFeeInput" value="85" min="50" max="150" 
                                           style="width: 70px; padding: 8px; border: 2px solid var(--gray-300); border-radius: 6px; font-size: 16px; font-weight: 500; text-align: center;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="calculator-results">
                    <h3 class="result-title">Projected Monthly Revenue</h3>
                    <div class="result-value" id="monthlyRevenueResult">$5,240</div>
                    <p class="result-subtitle" id="nightsBookedText">Based on 23 nights booked per month</p>
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--gray-200);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span class="small">Annual Revenue</span>
                            <span class="h3" style="color: var(--success-green);" id="annualRevenueCalc">$62,880</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span class="small">vs. Long-term Rental</span>
                            <span class="h3" style="color: var(--success-green);" id="vsLTRCalc">+68%</span>
                        </div>
                    </div>
                </div>
            </section>
            
            </div>
            <!-- STR Analysis Section End -->
            
            <!-- 7. LTR Analysis Section (Hidden by default, shown when LTR nav is clicked) -->
            <section id="ltr-analysis-section" style="display: none;">
                <!-- LTR Property Header -->
                <div class="card">
                    <div class="property-hero">
                        <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=600&h=400&fit=crop" 
                             alt="Property" 
                             class="property-image">
                        <div class="property-details">
                            <div class="property-address">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <div>
                                    <h1 class="h1">1514 - 150 East Liberty Street</h1>
                                    <p class="body">Toronto, Ontario M6K 3R5</p>
                                    <p class="h3" style="color: var(--primary-blue); margin-top: 8px;">$849,900</p>
                                </div>
                            </div>
                            <div class="metric-cards">
                                <div class="metric-card">
                                    <div class="metric-card-label">Monthly Rent</div>
                                    <div class="metric-card-value positive">$3,100</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-card-label">Cap Rate</div>
                                    <div class="metric-card-value">4.1%</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-card-label">Cash Flow</div>
                                    <div class="metric-card-value negative">-$1,846</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-card-label">Rental Demand</div>
                                    <div class="metric-card-value positive">High</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- LTR Comparable Rentals (Exact same style as STR Airbnb listings) -->
                <section class="comparables-section">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div>
                                <h2 class="h2" style="display: inline-flex; align-items: center; gap: 12px;">
                                    Comparable Long-Term Rentals
                                    <span style="display: inline-flex; align-items: center; gap: 4px; color: var(--success-green); font-size: 14px; font-weight: 500;">
                                        <span style="font-size: 10px;">●</span> 15 similar rentals found
                                    </span>
                                </h2>
                                <p class="body" style="margin-top: 8px; color: var(--gray-600);">Similar properties for rent in your neighborhood</p>
                            </div>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <span class="small" style="color: var(--gray-500);">Updated today</span>
                                <span style="padding: 6px 12px; background: linear-gradient(135deg, #3B82F6, #1E40AF); color: white; border-radius: 6px; font-size: 11px; font-weight: 700; text-transform: uppercase;">
                                    ● MARKET DATA
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparables-grid">
                        <!-- LTR Comparable 1 -->
                        <a href="https://www.realtor.ca/real-estate/123456" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                            <div class="comparable-card">
                                <div style="position: relative;">
                                    <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=600&h=400&fit=crop" 
                                         alt="LTR Comparable 1" 
                                         class="comparable-image">
                                    <div class="comparable-price">$4,200/mo</div>
                                    <span class="comparable-badge badge-top">Best Match</span>
                                </div>
                                <div class="comparable-details">
                                    <h3 class="comparable-title">2BR Luxury Condo • Liberty Village</h3>
                                    <div class="comparable-stats">
                                        <span class="comparable-stat">2 Bed</span>
                                        <span class="comparable-stat">2 Bath</span>
                                        <span class="comparable-stat">1,100 sqft</span>
                                    </div>
                                    <div class="comparable-revenue">
                                        <div>
                                            <div class="revenue-label">Listed</div>
                                            <div class="revenue-value">5 days ago</div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 12px; text-align: center;">
                                        <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View Listing →</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                        
                        <!-- LTR Comparable 2 -->
                        <a href="https://www.realtor.ca/real-estate/789012" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                            <div class="comparable-card">
                                <div style="position: relative;">
                                    <img src="https://images.unsplash.com/photo-1554995207-c18c203602cb?w=600&h=400&fit=crop" 
                                         alt="LTR Comparable 2" 
                                         class="comparable-image">
                                    <div class="comparable-price">$3,800/mo</div>
                                    <span class="comparable-badge badge-similar">Similar Size</span>
                                </div>
                                <div class="comparable-details">
                                    <h3 class="comparable-title">1BR+Den Modern • King West</h3>
                                    <div class="comparable-stats">
                                        <span class="comparable-stat">1+1 Bed</span>
                                        <span class="comparable-stat">1 Bath</span>
                                        <span class="comparable-stat">850 sqft</span>
                                    </div>
                                    <div class="comparable-revenue">
                                        <div>
                                            <div class="revenue-label">Listed</div>
                                            <div class="revenue-value">1 week ago</div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 12px; text-align: center;">
                                        <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View Listing →</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                        
                        <!-- LTR Comparable 3 -->
                        <a href="https://www.realtor.ca/real-estate/345678" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">
                            <div class="comparable-card">
                                <div style="position: relative;">
                                    <img src="https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=600&h=400&fit=crop" 
                                         alt="LTR Comparable 3" 
                                         class="comparable-image">
                                    <div class="comparable-price">$3,950/mo</div>
                                    <span class="comparable-badge badge-value">Great Value</span>
                                </div>
                                <div class="comparable-details">
                                    <h3 class="comparable-title">2BR Renovated • Queen West</h3>
                                    <div class="comparable-stats">
                                        <span class="comparable-stat">2 Bed</span>
                                        <span class="comparable-stat">1.5 Bath</span>
                                        <span class="comparable-stat">950 sqft</span>
                                    </div>
                                    <div class="comparable-revenue">
                                        <div>
                                            <div class="revenue-label">Listed</div>
                                            <div class="revenue-value">3 days ago</div>
                                        </div>
                                    </div>
                                    <div style="margin-top: 12px; text-align: center;">
                                        <span style="color: var(--primary-blue); font-size: 13px; font-weight: 500;">View Listing →</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <!-- View All Button -->
                    <div style="text-align: center; margin-top: 24px;">
                        <button onclick="alert('In the live application, this would show all comparable rental listings.');" 
                                style="padding: 10px 24px; background: white; border: 1px solid var(--gray-300); border-radius: 8px; color: var(--gray-700); font-weight: 500; cursor: pointer; transition: all 0.2s;"
                                onmouseover="this.style.background='#F3F4F6'; this.style.borderColor='#9CA3AF';" 
                                onmouseout="this.style.background='white'; this.style.borderColor='#D1D5DB';">
                            View All Rental Comparables <span style="color: var(--gray-500); font-size: 12px;">(15 total)</span>
                        </button>
                    </div>
                </section>
                
                <!-- LTR Market Statistics (Exact same style as STR Airbnb stats) -->
                <div class="card">
                    <h2 class="h2" style="margin-bottom: 20px;">Long-Term Rental Market Statistics</h2>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; text-align: center;">
                        <div>
                            <div class="small" style="margin-bottom: 4px;">Average monthly rent</div>
                            <div class="h1" style="color: var(--gray-900);">$3,950</div>
                            <div style="font-size: 12px; color: var(--gray-500);">for 2BR units</div>
                        </div>
                        <div>
                            <div class="small" style="margin-bottom: 4px;">Vacancy rate</div>
                            <div class="h1" style="color: var(--primary-blue);">5%</div>
                            <div style="font-size: 12px; color: var(--gray-500);">Toronto average</div>
                        </div>
                        <div>
                            <div class="small" style="margin-bottom: 4px;">Days on Market</div>
                            <div class="h1" style="color: var(--success-green);">12 days</div>
                            <div style="font-size: 12px; color: var(--gray-500);">avg. listing duration</div>
                        </div>
                        <div>
                            <div class="small" style="margin-bottom: 4px;">Annual rent increase</div>
                            <div class="h1" style="color: var(--gray-900);">3.2%</div>
                            <div style="font-size: 12px; color: var(--gray-500);">market average</div>
                        </div>
                    </div>
                </div>
                
                <!-- LTR Rent Calculator (2-column layout) -->
                <section class="calculator-section">
                    <div class="card">
                        <h2 class="h2" style="margin-bottom: 8px;">Long-Term Rental Market Analysis</h2>
                        
                        <!-- Top Stats Row -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                            <div>
                                <div style="font-size: 12px; color: var(--gray-600); margin-bottom: 4px;">Average Rent (2BR)</div>
                                <div style="font-size: 20px; font-weight: 700;">$3,950/mo</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--gray-600); margin-bottom: 4px;">Your Property</div>
                                <div style="font-size: 20px; font-weight: 700; color: var(--primary-blue);">$3,100/mo</div>
                            </div>
                            <div style="display: flex; gap: 12px;">
                                <div style="background: #FEF3C7; padding: 8px 12px; border-radius: 6px; flex: 1;">
                                    <div style="font-size: 11px; color: #92400E;">Market Vacancy</div>
                                    <div style="font-size: 16px; font-weight: 700;">5%</div>
                                </div>
                                <div style="background: #FEF3C7; padding: 8px 12px; border-radius: 6px; flex: 1;">
                                    <div style="font-size: 11px; color: #92400E;">Days to Rent</div>
                                    <div style="font-size: 16px; font-weight: 700;">12-18</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 2-Column Layout -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                            <!-- Left Column - Settings -->
                            <div>
                                <h3 class="h3" style="margin-bottom: 20px;">Rent & Vacancy Settings</h3>
                                <div class="calculator-inputs">
                                    <div class="input-group">
                                        <label class="input-label">Monthly Rent</label>
                                        <div style="display: flex; align-items: center; gap: 12px;">
                                            <span style="font-size: 14px; color: var(--gray-600);">$</span>
                                            <input type="range" class="input-slider" id="ltrMonthlyRent" min="2500" max="6000" value="4000" style="flex: 1;">
                                        </div>
                                        <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                                            <span style="font-size: 12px; color: var(--gray-500);">$2,500</span>
                                            <span class="input-value" id="ltrMonthlyRentValue" style="font-weight: 700;">$4,000</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">$6,000</span>
                                        </div>
                                    </div>
                                    
                                    <div class="input-group">
                                        <label class="input-label">Vacancy Rate: <span id="ltrVacancyRateValue" style="color: var(--primary-blue); font-weight: 700;">5%</span></label>
                                        <input type="range" class="input-slider" id="ltrVacancyRate" min="0" max="20" value="5">
                                        <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                                            <span style="font-size: 12px; color: var(--gray-500);">0%</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">25%</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">50%</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">75%</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">100%</span>
                                        </div>
                                    </div>
                                    
                                    <div class="input-group">
                                        <label class="input-label">Annual Rent Increase: <span id="ltrAnnualIncreaseValue" style="color: var(--primary-blue); font-weight: 700;">3.0%</span></label>
                                        <input type="range" class="input-slider" id="ltrAnnualIncrease" min="0" max="10" value="3" step="0.5">
                                        <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                                            <span style="font-size: 12px; color: var(--gray-500);">0%</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">2.5%</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">5%</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">7.5%</span>
                                            <span style="font-size: 12px; color: var(--gray-500);">10%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Results below inputs -->
                                <div style="margin-top: 24px; padding: 16px; background: var(--gray-50); border-radius: 8px;">
                                    <div style="margin-bottom: 12px;">
                                        <div style="font-size: 12px; color: var(--gray-600);">Effective Monthly</div>
                                        <div style="font-size: 20px; font-weight: 700; color: var(--primary-blue);" id="ltrEffectiveMonthly">$3,800</div>
                                    </div>
                                    <div style="margin-bottom: 12px;">
                                        <div style="font-size: 12px; color: var(--gray-600);">Annual Revenue</div>
                                        <div style="font-size: 20px; font-weight: 700; color: var(--success-green);" id="ltrAnnualIncome">$45,600</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: var(--gray-600);">vs Short-Term</div>
                                        <div style="font-size: 20px; font-weight: 700; color: var(--danger-red);" id="ltrVsSTR">-$1,945/mo</div>
                                    </div>
                                    
                                    <button onclick="alert('Reset to defaults');" style="margin-top: 16px; padding: 8px 16px; background: white; border: 1px solid var(--gray-300); border-radius: 6px; font-size: 14px; cursor: pointer; width: 100%;">
                                        Reset to Defaults
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Right Column - Revenue Comparison -->
                            <div>
                                <h3 class="h3" style="margin-bottom: 20px;">Revenue Comparison</h3>
                                <div style="padding: 12px; background: var(--gray-50); border-radius: 8px; margin-bottom: 16px;">
                                    <p style="font-size: 13px; color: var(--gray-600); margin: 0;">Comparing effective monthly revenue after vacancy</p>
                                </div>
                                
                                <!-- Comparison Bars -->
                                <div style="display: flex; justify-content: space-around; align-items: flex-end; height: 200px; margin-bottom: 20px;">
                                    <!-- STR Bar -->
                                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%;">
                                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">$5,045</div>
                                        <div style="width: 100px; background: linear-gradient(135deg, #8B5CF6, #A78BFA); border-radius: 8px 8px 0 0; position: relative;" id="ltrCompareSTRBar">
                                            <div style="height: 160px;"></div>
                                        </div>
                                        <div style="padding: 8px 16px; background: #F3E8FF; border-radius: 0 0 8px 8px; width: 100px; text-align: center;">
                                            <div style="font-size: 14px; font-weight: 600;">STR</div>
                                        </div>
                                    </div>
                                    
                                    <!-- LTR Bar -->
                                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%;">
                                        <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;" id="ltrCompareLTRValue">$3,100</div>
                                        <div style="width: 100px; background: linear-gradient(135deg, #3B82F6, #60A5FA); border-radius: 8px 8px 0 0; position: relative;" id="ltrCompareLTRBar">
                                            <div style="height: 98px;"></div>
                                        </div>
                                        <div style="padding: 8px 16px; background: #DBEAFE; border-radius: 0 0 8px 8px; width: 100px; text-align: center;">
                                            <div style="font-size: 14px; font-weight: 600;">LTR</div>
                                            <div style="font-size: 11px; color: var(--gray-600);">(after vacancy)</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="padding: 16px; background: linear-gradient(135deg, #FEF3C7, #FDE68A); border-radius: 8px; text-align: center;">
                                    <div style="font-size: 14px; color: var(--gray-700);">Short-term rental potential is</div>
                                    <div style="font-size: 24px; font-weight: 700; color: var(--warning-orange);" id="ltrPotentialHigher">63% higher</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- 5-Year LTR Revenue Projection Chart -->
                <div class="card" style="margin-top: 24px;">
                    <h3 class="h3" style="margin-bottom: 20px;">5-Year Revenue Projection</h3>
                    <div id="ltr-revenue-chart" style="height: 300px; position: relative;">
                        <!-- SVG Bar Chart -->
                        <svg width="100%" height="300" viewBox="0 0 800 300" preserveAspectRatio="xMidYMid meet">
                            <!-- Y-axis lines -->
                            <line x1="60" y1="20" x2="60" y2="250" stroke="#E5E7EB" stroke-width="2"/>
                            <line x1="60" y1="250" x2="740" y2="250" stroke="#E5E7EB" stroke-width="2"/>
                            
                            <!-- Grid lines -->
                            <line x1="60" y1="70" x2="740" y2="70" stroke="#E5E7EB" stroke-width="1" opacity="0.5"/>
                            <line x1="60" y1="120" x2="740" y2="120" stroke="#E5E7EB" stroke-width="1" opacity="0.5"/>
                            <line x1="60" y1="170" x2="740" y2="170" stroke="#E5E7EB" stroke-width="1" opacity="0.5"/>
                            <line x1="60" y1="220" x2="740" y2="220" stroke="#E5E7EB" stroke-width="1" opacity="0.5"/>
                            
                            <!-- Y-axis labels -->
                            <text x="50" y="75" text-anchor="end" font-size="12" fill="#6B7280">$60k</text>
                            <text x="50" y="125" text-anchor="end" font-size="12" fill="#6B7280">$45k</text>
                            <text x="50" y="175" text-anchor="end" font-size="12" fill="#6B7280">$30k</text>
                            <text x="50" y="225" text-anchor="end" font-size="12" fill="#6B7280">$15k</text>
                            <text x="50" y="255" text-anchor="end" font-size="12" fill="#6B7280">$0</text>
                            
                            <!-- Bars -->
                            <rect x="120" y="150" width="100" height="100" fill="#3B82F6" rx="4" class="ltr-bar" data-year="1"/>
                            <rect x="240" y="145" width="100" height="105" fill="#3B82F6" rx="4" class="ltr-bar" data-year="2"/>
                            <rect x="360" y="140" width="100" height="110" fill="#3B82F6" rx="4" class="ltr-bar" data-year="3"/>
                            <rect x="480" y="135" width="100" height="115" fill="#3B82F6" rx="4" class="ltr-bar" data-year="4"/>
                            <rect x="600" y="130" width="100" height="120" fill="#3B82F6" rx="4" class="ltr-bar" data-year="5"/>
                            
                            <!-- Values on bars -->
                            <text x="170" y="140" text-anchor="middle" font-size="14" font-weight="600" fill="#1F2937" class="ltr-value" data-year="1">$46k</text>
                            <text x="290" y="135" text-anchor="middle" font-size="14" font-weight="600" fill="#1F2937" class="ltr-value" data-year="2">$47k</text>
                            <text x="410" y="130" text-anchor="middle" font-size="14" font-weight="600" fill="#1F2937" class="ltr-value" data-year="3">$48k</text>
                            <text x="530" y="125" text-anchor="middle" font-size="14" font-weight="600" fill="#1F2937" class="ltr-value" data-year="4">$50k</text>
                            <text x="650" y="120" text-anchor="middle" font-size="14" font-weight="600" fill="#1F2937" class="ltr-value" data-year="5">$51k</text>
                            
                            <!-- X-axis labels -->
                            <text x="170" y="270" text-anchor="middle" font-size="12" fill="#6B7280">Year 1</text>
                            <text x="290" y="270" text-anchor="middle" font-size="12" fill="#6B7280">Year 2</text>
                            <text x="410" y="270" text-anchor="middle" font-size="12" fill="#6B7280">Year 3</text>
                            <text x="530" y="270" text-anchor="middle" font-size="12" fill="#6B7280">Year 4</text>
                            <text x="650" y="270" text-anchor="middle" font-size="12" fill="#6B7280">Year 5</text>
                        </svg>
                    </div>
                    <div style="margin-top: 20px; padding: 16px; background: var(--gray-50); border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <span style="font-size: 14px; color: var(--gray-600);">Total 5-Year Revenue</span>
                                <div style="font-size: 24px; font-weight: 700; color: var(--primary-blue);" id="ltr5YearChartTotal">$242,096</div>
                            </div>
                            <div>
                                <span style="font-size: 14px; color: var(--gray-600);">Average Annual Growth</span>
                                <div style="font-size: 24px; font-weight: 700; color: var(--success-green);" id="ltrAnnualGrowthRate">+3.0%</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Revenue Comparison Visual Bars -->
                <div class="card" style="margin-top: 24px;">
                    <h3 class="h3" style="margin-bottom: 20px;">Revenue Comparison</h3>
                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <!-- STR Revenue Bar -->
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="font-weight: 600; color: var(--primary-purple);">Short-Term Rental</span>
                                <span style="font-weight: 700; font-size: 18px; color: var(--primary-purple);">$132,528/year</span>
                            </div>
                            <div style="height: 40px; background: var(--gray-100); border-radius: 8px; overflow: hidden; position: relative;">
                                <div style="height: 100%; width: 100%; background: linear-gradient(90deg, #8B5CF6, #A78BFA); border-radius: 8px; position: relative;">
                                    <span style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: white; font-weight: 600;">100%</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- LTR Revenue Bar -->
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="font-weight: 600; color: var(--primary-blue);">Long-Term Rental</span>
                                <span style="font-weight: 700; font-size: 18px; color: var(--primary-blue);" id="ltrRevenueBarValue">$45,600/year</span>
                            </div>
                            <div style="height: 40px; background: var(--gray-100); border-radius: 8px; overflow: hidden; position: relative;">
                                <div id="ltrRevenueBarFill" style="height: 100%; width: 34.4%; background: linear-gradient(90deg, #3B82F6, #60A5FA); border-radius: 8px; position: relative;">
                                    <span id="ltrRevenueBarPercent" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); color: white; font-weight: 600;">34%</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Difference Indicator -->
                        <div style="padding: 16px; background: linear-gradient(135deg, #FEF3C7, #FDE68A); border-radius: 8px; text-align: center;">
                            <div style="font-size: 14px; color: var(--gray-700);">STR Revenue Advantage</div>
                            <div style="font-size: 28px; font-weight: 700; color: var(--warning-orange);" id="revenueAdvantage">+$86,928/year</div>
                            <div style="font-size: 14px; color: var(--gray-600); margin-top: 4px;" id="revenueMultiple">2.9x higher revenue potential</div>
                        </div>
                    </div>
                </div>
                
                <!-- LTR Cash Flow Comparison (Exact same style as STR cash flow cards) -->
                <section class="cashflow-comparison">
                    <div class="cashflow-card ltr" style="border: 2px solid var(--primary-blue);">
                        <div class="cashflow-header">
                            <h3 class="cashflow-title">
                                <svg width="20" height="20" fill="currentColor" style="color: var(--primary-blue);">
                                    <path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/>
                                </svg>
                                Long-Term Rental
                            </h3>
                            <span class="cashflow-badge" style="background: var(--primary-blue);">Current Analysis</span>
                        </div>
                        <div class="cashflow-breakdown">
                            <div class="cashflow-item">
                                <span class="cashflow-label">Monthly Rent</span>
                                <span class="cashflow-value positive" id="ltrMonthlyRentCard">+$4,000</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Mortgage Payment</span>
                                <span class="cashflow-value negative" id="ltrMortgageCardAlt">-$4,269</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Operating Expenses</span>
                                <span class="cashflow-value negative">-$200</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Net Cash Flow</span>
                                <span class="cashflow-value cashflow-total negative" id="ltrNetCashFlowCard">-$469</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cashflow-card str">
                        <div class="cashflow-header">
                            <h3 class="cashflow-title">
                                <svg width="20" height="20" fill="currentColor" style="color: var(--gray-500);">
                                    <path d="M10 2a8 8 0 100 16 8 8 0 000-16z"/>
                                </svg>
                                Short-Term Rental
                            </h3>
                        </div>
                        <div class="cashflow-breakdown">
                            <div class="cashflow-item">
                                <span class="cashflow-label">Monthly Revenue</span>
                                <span class="cashflow-value positive">+$11,044</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Mortgage Payment</span>
                                <span class="cashflow-value negative">-$4,269</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Operating Expenses</span>
                                <span class="cashflow-value negative">-$2,761</span>
                            </div>
                            <div class="cashflow-item">
                                <span class="cashflow-label">Net Cash Flow</span>
                                <span class="cashflow-value cashflow-total positive">+$4,014</span>
                            </div>
                        </div>
                    </div>
                </section>
            </section>
            
            <!-- STR vs LTR Comparison Section -->
            <section id="str-vs-ltr-section" style="display: none;">
                <!-- Section Header -->
                <div class="property-header" style="padding: 0 0 24px 0;">
                    <h1 class="h1">STR vs LTR Investment Comparison</h1>
                    <p style="color: var(--gray-600);">Comprehensive analysis to help you choose the best rental strategy</p>
                </div>
                
                <!-- Financial Comparison Dashboard -->
                <div class="card" style="margin-bottom: 24px;">
                    <h2 class="h2" style="margin-bottom: 24px;">Financial Comparison Dashboard</h2>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                        <!-- STR Column -->
                        <div style="background: linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%); padding: 24px; border-radius: 12px; color: white;">
                            <h3 style="display: flex; align-items: center; gap: 8px; margin-bottom: 20px; color: white;">
                                <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                                </svg>
                                Short-Term Rental
                            </h3>
                            
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <div>
                                    <div style="font-size: 14px; opacity: 0.9;">Monthly Revenue</div>
                                    <div style="font-size: 28px; font-weight: 700;">$11,044</div>
                                </div>
                                <div>
                                    <div style="font-size: 14px; opacity: 0.9;">Operating Expenses</div>
                                    <div style="font-size: 24px; font-weight: 600;">-$2,761</div>
                                </div>
                                <div>
                                    <div style="font-size: 14px; opacity: 0.9;">Mortgage Payment</div>
                                    <div style="font-size: 24px; font-weight: 600;">-$4,269</div>
                                </div>
                                <div style="border-top: 2px solid rgba(255,255,255,0.3); padding-top: 16px;">
                                    <div style="font-size: 14px; opacity: 0.9;">Net Cash Flow</div>
                                    <div style="font-size: 32px; font-weight: 700;">+$4,014</div>
                                </div>
                                <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 8px;">
                                    <div style="font-size: 14px; opacity: 0.9;">Annual ROI</div>
                                    <div style="font-size: 24px; font-weight: 700;">23.8%</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- LTR Column -->
                        <div style="background: linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%); padding: 24px; border-radius: 12px; color: white;">
                            <h3 style="display: flex; align-items: center; gap: 8px; margin-bottom: 20px; color: white;">
                                <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                                </svg>
                                Long-Term Rental
                            </h3>
                            
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <div>
                                    <div style="font-size: 14px; opacity: 0.9;">Monthly Rent</div>
                                    <div style="font-size: 28px; font-weight: 700;">$4,000</div>
                                </div>
                                <div>
                                    <div style="font-size: 14px; opacity: 0.9;">Operating Expenses</div>
                                    <div style="font-size: 24px; font-weight: 600;">-$200</div>
                                </div>
                                <div>
                                    <div style="font-size: 14px; opacity: 0.9;">Mortgage Payment</div>
                                    <div style="font-size: 24px; font-weight: 600;">-$4,269</div>
                                </div>
                                <div style="border-top: 2px solid rgba(255,255,255,0.3); padding-top: 16px;">
                                    <div style="font-size: 14px; opacity: 0.9;">Net Cash Flow</div>
                                    <div style="font-size: 32px; font-weight: 700; color: #FCA5A5;">-$469</div>
                                </div>
                                <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 8px;">
                                    <div style="font-size: 14px; opacity: 0.9;">Annual ROI</div>
                                    <div style="font-size: 24px; font-weight: 700; color: #FCA5A5;">-2.8%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Key Differences -->
                    <div style="margin-top: 32px; padding: 20px; background: var(--gray-50); border-radius: 12px;">
                        <h4 style="margin-bottom: 16px;">Key Financial Differences</h4>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                            <div style="text-align: center;">
                                <div style="font-size: 24px; font-weight: 700; color: var(--success-green);">+$4,483</div>
                                <div style="font-size: 14px; color: var(--gray-600);">Monthly Advantage</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 24px; font-weight: 700; color: var(--success-green);">+$53,796</div>
                                <div style="font-size: 14px; color: var(--gray-600);">Annual Advantage</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 24px; font-weight: 700; color: var(--primary-blue);">176%</div>
                                <div style="font-size: 14px; color: var(--gray-600);">Higher Revenue</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 24px; font-weight: 700; color: var(--warning-orange);">13x</div>
                                <div style="font-size: 14px; color: var(--gray-600);">More Work Required</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tax & Legal Considerations -->
                <div class="card" style="margin-bottom: 24px;">
                    <h2 class="h2" style="margin-bottom: 24px;">Tax & Legal Considerations</h2>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                        <!-- STR Tax & Legal -->
                        <div>
                            <h3 class="h3" style="color: var(--primary-purple); margin-bottom: 16px;">Short-Term Rental</h3>
                            
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <div style="padding: 16px; background: var(--gray-50); border-radius: 8px;">
                                    <h4 style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                        <svg width="20" height="20" fill="var(--success-green)" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/>
                                        </svg>
                                        Tax Benefits
                                    </h4>
                                    <ul style="list-style: none; padding: 0; margin: 0;">
                                        <li style="padding: 4px 0;">• Deduct furniture & decor (100%)</li>
                                        <li style="padding: 4px 0;">• Write off cleaning supplies</li>
                                        <li style="padding: 4px 0;">• Deduct platform fees (Airbnb/VRBO)</li>
                                        <li style="padding: 4px 0;">• Guest amenities expensed</li>
                                        <li style="padding: 4px 0;">• Higher depreciation claims</li>
                                    </ul>
                                </div>
                                
                                <div style="padding: 16px; background: #FEF3C7; border-radius: 8px;">
                                    <h4 style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                        <svg width="20" height="20" fill="#F59E0B" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"/>
                                        </svg>
                                        Legal Requirements
                                    </h4>
                                    <ul style="list-style: none; padding: 0; margin: 0;">
                                        <li style="padding: 4px 0;">• Municipal STR license required</li>
                                        <li style="padding: 4px 0;">• 4% MAT tax in Toronto</li>
                                        <li style="padding: 4px 0;">• Insurance: $2,000-3,000/year</li>
                                        <li style="padding: 4px 0;">• Safety inspections needed</li>
                                        <li style="padding: 4px 0;">• Zoning compliance check</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- LTR Tax & Legal -->
                        <div>
                            <h3 class="h3" style="color: var(--primary-blue); margin-bottom: 16px;">Long-Term Rental</h3>
                            
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <div style="padding: 16px; background: var(--gray-50); border-radius: 8px;">
                                    <h4 style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                        <svg width="20" height="20" fill="var(--success-green)" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/>
                                        </svg>
                                        Tax Benefits
                                    </h4>
                                    <ul style="list-style: none; padding: 0; margin: 0;">
                                        <li style="padding: 4px 0;">• Mortgage interest deductible</li>
                                        <li style="padding: 4px 0;">• Property tax deductible</li>
                                        <li style="padding: 4px 0;">• Maintenance costs deductible</li>
                                        <li style="padding: 4px 0;">• Property management fees</li>
                                        <li style="padding: 4px 0;">• Standard depreciation (CCA)</li>
                                    </ul>
                                </div>
                                
                                <div style="padding: 16px; background: #DBEAFE; border-radius: 8px;">
                                    <h4 style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                        <svg width="20" height="20" fill="#3B82F6" viewBox="0 0 20 20">
                                            <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/>
                                        </svg>
                                        Legal Requirements
                                    </h4>
                                    <ul style="list-style: none; padding: 0; margin: 0;">
                                        <li style="padding: 4px 0;">• Standard lease agreement (RTA)</li>
                                        <li style="padding: 4px 0;">• Rent control regulations</li>
                                        <li style="padding: 4px 0;">• Insurance: $800-1,200/year</li>
                                        <li style="padding: 4px 0;">• Tenant rights & LTB rules</li>
                                        <li style="padding: 4px 0;">• No special licensing needed</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Decision Scorecard -->
                <div class="card">
                    <h2 class="h2" style="margin-bottom: 24px;">Personalized Decision Scorecard</h2>
                    <p style="color: var(--gray-600); margin-bottom: 24px;">Adjust the sliders based on your situation to get a personalized recommendation</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                        <!-- Input Sliders -->
                        <div>
                            <h3 class="h3" style="margin-bottom: 20px;">Your Investment Profile</h3>
                            
                            <div style="display: flex; flex-direction: column; gap: 24px;">
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                                        Time Commitment Available
                                        <span id="timeValue" style="color: var(--primary-blue); margin-left: 8px;">10 hours</span>
                                    </label>
                                    <input type="range" id="timeSlider" min="0" max="40" value="10" 
                                           style="width: 100%;" 
                                           oninput="updateScorecard()">
                                    <div style="display: flex; justify-content: space-between; margin-top: 4px;">
                                        <span style="font-size: 12px; color: var(--gray-600);">0 hrs (Passive)</span>
                                        <span style="font-size: 12px; color: var(--gray-600);">20 hrs</span>
                                        <span style="font-size: 12px; color: var(--gray-600);">40+ hrs/month</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                                        Risk Tolerance
                                        <span id="riskValue" style="color: var(--primary-blue); margin-left: 8px;">Moderate</span>
                                    </label>
                                    <input type="range" id="riskSlider" min="1" max="5" value="3" 
                                           style="width: 100%;" 
                                           oninput="updateScorecard()">
                                    <div style="display: flex; justify-content: space-between; margin-top: 4px;">
                                        <span style="font-size: 12px; color: var(--gray-600);">Conservative</span>
                                        <span style="font-size: 12px; color: var(--gray-600);">Moderate</span>
                                        <span style="font-size: 12px; color: var(--gray-600);">Aggressive</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                                        Investment Goals
                                        <span id="goalValue" style="color: var(--primary-blue); margin-left: 8px;">Balanced</span>
                                    </label>
                                    <input type="range" id="goalSlider" min="1" max="5" value="3" 
                                           style="width: 100%;" 
                                           oninput="updateScorecard()">
                                    <div style="display: flex; justify-content: space-between; margin-top: 4px;">
                                        <span style="font-size: 12px; color: var(--gray-600);">Cash Flow</span>
                                        <span style="font-size: 12px; color: var(--gray-600);">Balanced</span>
                                        <span style="font-size: 12px; color: var(--gray-600);">Appreciation</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                                        Local Tourism Strength
                                        <span id="tourismValue" style="color: var(--primary-blue); margin-left: 8px;">Strong</span>
                                    </label>
                                    <input type="range" id="tourismSlider" min="1" max="5" value="4" 
                                           style="width: 100%;" 
                                           oninput="updateScorecard()">
                                    <div style="display: flex; justify-content: space-between; margin-top: 4px;">
                                        <span style="font-size: 12px; color: var(--gray-600);">Weak</span>
                                        <span style="font-size: 12px; color: var(--gray-600);">Moderate</span>
                                        <span style="font-size: 12px; color: var(--gray-600);">Very Strong</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recommendation Output -->
                        <div>
                            <h3 class="h3" style="margin-bottom: 20px;">Your Personalized Recommendation</h3>
                            
                            <div id="recommendationBox" style="padding: 24px; background: linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%); border-radius: 12px; color: white;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                    </svg>
                                    <h3 style="margin: 0; color: white;" id="recommendationTitle">Short-Term Rental Recommended</h3>
                                </div>
                                
                                <div style="font-size: 20px; font-weight: 700; margin-bottom: 8px;">
                                    Score: <span id="scoreDisplay">75/100</span>
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <div style="background: rgba(255,255,255,0.3); height: 8px; border-radius: 4px; overflow: hidden;">
                                        <div id="scoreBar" style="background: white; height: 100%; width: 75%; transition: width 0.3s;"></div>
                                    </div>
                                </div>
                                
                                <p id="recommendationText" style="line-height: 1.6;">
                                    Based on your moderate time availability and strong local tourism, STR would generate significantly higher returns. 
                                    With 10 hours per month, you can effectively manage the property or hire a management company.
                                </p>
                                
                                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.3);">
                                    <h4 style="margin-bottom: 12px; color: white;">Key Factors:</h4>
                                    <ul id="factorsList" style="list-style: none; padding: 0; margin: 0;">
                                        <li style="padding: 4px 0;">✓ Strong tourism market supports high occupancy</li>
                                        <li style="padding: 4px 0;">✓ Time commitment aligns with STR requirements</li>
                                        <li style="padding: 4px 0;">✓ Higher returns match your investment goals</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Financial Calculator Section (Dedicated) -->
            <section id="financial-calculator-section" style="display: none;">
                <!-- Property Header -->
                <div class="property-header" style="padding: 0 0 24px 0;">
                    <img src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=800" alt="Financial Calculator" style="width: 100%; height: 300px; object-fit: cover; border-radius: 12px;">
                    
                    <div style="display: flex; gap: 24px; margin-top: 24px;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: start; gap: 16px;">
                                <svg width="40" height="40" fill="var(--primary-blue)" viewBox="0 0 20 20">
                                    <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/>
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z"/>
                                </svg>
                                <div>
                                    <h1 class="h1">Investment Analysis Calculator</h1>
                                    <p style="color: var(--gray-600);">1514 - 150 East Liberty Street, Toronto</p>
                                    <p class="h3" style="color: var(--primary-blue); margin-top: 8px;">Advanced Financial Modeling Tool</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Calculator Mode Toggle -->
                <div class="card" style="margin-bottom: 24px;">
                    <div style="display: flex; justify-content: center; margin-bottom: 32px;">
                        <div style="display: inline-flex; background: var(--gray-100); border-radius: 12px; padding: 4px;">
                            <button id="calcModeSTR" onclick="setCalculatorMode('str')" 
                                    style="padding: 12px 24px; border: none; border-radius: 8px; background: transparent; color: var(--gray-700); font-weight: 600; cursor: pointer; transition: all 0.3s;">
                                <span style="display: flex; align-items: center; gap: 8px;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                                    </svg>
                                    STR Analysis
                                </span>
                            </button>
                            <button id="calcModeLTR" onclick="setCalculatorMode('ltr')" 
                                    style="padding: 12px 24px; border: none; border-radius: 8px; background: transparent; color: var(--gray-700); font-weight: 600; cursor: pointer; transition: all 0.3s;">
                                <span style="display: flex; align-items: center; gap: 8px;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                                    </svg>
                                    LTR Analysis
                                </span>
                            </button>
                            <button id="calcModeCompare" onclick="setCalculatorMode('compare')" 
                                    style="padding: 12px 24px; border: none; border-radius: 8px; background: var(--primary-blue); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                                <span style="display: flex; align-items: center; gap: 8px;">
                                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1H3a1 1 0 01-1-1V4zM8 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1H9a1 1 0 01-1-1V4zM15 3a1 1 0 00-1 1v12a1 1 0 001 1h2a1 1 0 001-1V4a1 1 0 00-1-1h-2z"/>
                                    </svg>
                                    Compare Both
                                </span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Financial Calculator Content -->
                    <div id="financial-calculator-content">
                        <!-- STR Mode Content -->
                        <div id="str-mode-content" style="display: none;">
                            <div class="card">
                                <h2 class="h2" style="margin-bottom: 24px;">Short-Term Rental Financial Analysis</h2>
                                
                                <!-- STR Revenue Inputs -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 32px;">
                                    <div>
                                        <h3 class="h3" style="margin-bottom: 16px;">Revenue Parameters</h3>
                                        <div class="input-group">
                                            <label class="input-label">Nightly Rate</label>
                                            <input type="range" class="input-slider" id="calc-str-nightly" min="100" max="500" value="185">
                                            <span class="input-value" id="calc-str-nightly-value">$185/night</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Occupancy Rate</label>
                                            <input type="range" class="input-slider" id="calc-str-occupancy" min="40" max="95" value="75">
                                            <span class="input-value" id="calc-str-occupancy-value">75%</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Cleaning Fee</label>
                                            <input type="range" class="input-slider" id="calc-str-cleaning" min="0" max="200" value="75">
                                            <span class="input-value" id="calc-str-cleaning-value">$75</span>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <h3 class="h3" style="margin-bottom: 16px;">Operating Expenses</h3>
                                        <div class="input-group">
                                            <label class="input-label">Management Fee</label>
                                            <input type="range" class="input-slider" id="calc-str-management" min="0" max="35" value="25">
                                            <span class="input-value" id="calc-str-management-value">25%</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Cleaning Cost</label>
                                            <input type="range" class="input-slider" id="calc-str-cleaning-cost" min="30" max="150" value="60">
                                            <span class="input-value" id="calc-str-cleaning-cost-value">$60/clean</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Monthly Utilities</label>
                                            <input type="range" class="input-slider" id="calc-str-utilities" min="100" max="500" value="250">
                                            <span class="input-value" id="calc-str-utilities-value">$250/mo</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- STR Results -->
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                                    <div class="metric-card">
                                        <div class="metric-card-label">Monthly Revenue</div>
                                        <div class="metric-card-value positive" id="calc-str-monthly-revenue">$5,338</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-card-label">Monthly Expenses</div>
                                        <div class="metric-card-value negative" id="calc-str-monthly-expenses">-$2,100</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-card-label">Net Monthly Income</div>
                                        <div class="metric-card-value positive" id="calc-str-net-monthly">$3,238</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-card-label">Annual ROI</div>
                                        <div class="metric-card-value" id="calc-str-roi">22.9%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- LTR Mode Content -->
                        <div id="ltr-mode-content" style="display: none;">
                            <div class="card">
                                <h2 class="h2" style="margin-bottom: 24px;">Long-Term Rental Financial Analysis</h2>
                                
                                <!-- LTR Revenue Inputs -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 32px;">
                                    <div>
                                        <h3 class="h3" style="margin-bottom: 16px;">Revenue Parameters</h3>
                                        <div class="input-group">
                                            <label class="input-label">Monthly Rent</label>
                                            <input type="range" class="input-slider" id="calc-ltr-rent" min="2000" max="6000" value="4000">
                                            <span class="input-value" id="calc-ltr-rent-value">$4,000/month</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Vacancy Rate</label>
                                            <input type="range" class="input-slider" id="calc-ltr-vacancy" min="0" max="20" value="5">
                                            <span class="input-value" id="calc-ltr-vacancy-value">5%</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Annual Rent Increase</label>
                                            <input type="range" class="input-slider" id="calc-ltr-increase" min="0" max="5" value="2.5" step="0.5">
                                            <span class="input-value" id="calc-ltr-increase-value">2.5%</span>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <h3 class="h3" style="margin-bottom: 16px;">Operating Expenses</h3>
                                        <div class="input-group">
                                            <label class="input-label">Property Tax (Annual)</label>
                                            <input type="range" class="input-slider" id="calc-ltr-tax" min="3000" max="15000" value="7200">
                                            <span class="input-value" id="calc-ltr-tax-value">$7,200/year</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Insurance (Annual)</label>
                                            <input type="range" class="input-slider" id="calc-ltr-insurance" min="800" max="3000" value="1500">
                                            <span class="input-value" id="calc-ltr-insurance-value">$1,500/year</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Maintenance Reserve</label>
                                            <input type="range" class="input-slider" id="calc-ltr-maintenance" min="50" max="500" value="200">
                                            <span class="input-value" id="calc-ltr-maintenance-value">$200/mo</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- LTR Results -->
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                                    <div class="metric-card">
                                        <div class="metric-card-label">Effective Monthly Rent</div>
                                        <div class="metric-card-value positive" id="calc-ltr-effective-rent">$3,800</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-card-label">Monthly Expenses</div>
                                        <div class="metric-card-value negative" id="calc-ltr-monthly-expenses">-$925</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-card-label">Net Monthly Income</div>
                                        <div class="metric-card-value positive" id="calc-ltr-net-monthly">$2,875</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-card-label">Cap Rate</div>
                                        <div class="metric-card-value" id="calc-ltr-cap-rate">4.1%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Compare Mode Content -->
                        <div id="compare-mode-content" style="display: block;">
                            <div class="card">
                                <h2 class="h2" style="margin-bottom: 24px;">STR vs LTR Comparison Analysis</h2>
                                
                                <!-- Comparison Inputs Grid -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-bottom: 32px;">
                                    <!-- STR Inputs -->
                                    <div style="background: linear-gradient(135deg, #F3E8FF 0%, #E9D5FF 100%); padding: 20px; border-radius: 12px;">
                                        <h3 class="h3" style="color: var(--primary-purple); margin-bottom: 16px;">Short-Term Rental</h3>
                                        <div class="input-group">
                                            <label class="input-label">Nightly Rate</label>
                                            <input type="range" class="input-slider compare-str-input" id="compare-str-nightly" min="100" max="500" value="185">
                                            <span class="input-value" id="compare-str-nightly-value">$185/night</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Occupancy Rate</label>
                                            <input type="range" class="input-slider compare-str-input" id="compare-str-occupancy" min="40" max="95" value="75">
                                            <span class="input-value" id="compare-str-occupancy-value">75%</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Management Fee</label>
                                            <input type="range" class="input-slider compare-str-input" id="compare-str-management" min="0" max="35" value="25">
                                            <span class="input-value" id="compare-str-management-value">25%</span>
                                        </div>
                                    </div>
                                    
                                    <!-- LTR Inputs -->
                                    <div style="background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%); padding: 20px; border-radius: 12px;">
                                        <h3 class="h3" style="color: var(--primary-blue); margin-bottom: 16px;">Long-Term Rental</h3>
                                        <div class="input-group">
                                            <label class="input-label">Monthly Rent</label>
                                            <input type="range" class="input-slider compare-ltr-input" id="compare-ltr-rent" min="2000" max="6000" value="4000">
                                            <span class="input-value" id="compare-ltr-rent-value">$4,000/month</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Vacancy Rate</label>
                                            <input type="range" class="input-slider compare-ltr-input" id="compare-ltr-vacancy" min="0" max="20" value="5">
                                            <span class="input-value" id="compare-ltr-vacancy-value">5%</span>
                                        </div>
                                        <div class="input-group">
                                            <label class="input-label">Operating Expenses</label>
                                            <input type="range" class="input-slider compare-ltr-input" id="compare-ltr-expenses" min="500" max="2000" value="925">
                                            <span class="input-value" id="compare-ltr-expenses-value">$925/month</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Comparison Results -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 24px; margin-bottom: 32px;">
                                    <!-- STR Results -->
                                    <div style="background: var(--gray-50); padding: 20px; border-radius: 12px; border: 2px solid var(--primary-purple);">
                                        <h4 style="color: var(--primary-purple); margin-bottom: 16px;">STR Performance</h4>
                                        <div style="margin-bottom: 12px;">
                                            <div style="font-size: 14px; color: var(--gray-600);">Monthly Revenue</div>
                                            <div style="font-size: 24px; font-weight: 700; color: var(--primary-purple);" id="compare-str-revenue">$5,338</div>
                                        </div>
                                        <div style="margin-bottom: 12px;">
                                            <div style="font-size: 14px; color: var(--gray-600);">Monthly Expenses</div>
                                            <div style="font-size: 20px; font-weight: 600; color: var(--danger-red);" id="compare-str-expenses">-$1,335</div>
                                        </div>
                                        <div style="padding-top: 12px; border-top: 1px solid var(--gray-300);">
                                            <div style="font-size: 14px; color: var(--gray-600);">Net Income</div>
                                            <div style="font-size: 28px; font-weight: 700; color: var(--success-green);" id="compare-str-net">$4,003</div>
                                        </div>
                                    </div>
                                    
                                    <!-- LTR Results -->
                                    <div style="background: var(--gray-50); padding: 20px; border-radius: 12px; border: 2px solid var(--primary-blue);">
                                        <h4 style="color: var(--primary-blue); margin-bottom: 16px;">LTR Performance</h4>
                                        <div style="margin-bottom: 12px;">
                                            <div style="font-size: 14px; color: var(--gray-600);">Monthly Revenue</div>
                                            <div style="font-size: 24px; font-weight: 700; color: var(--primary-blue);" id="compare-ltr-revenue">$3,800</div>
                                        </div>
                                        <div style="margin-bottom: 12px;">
                                            <div style="font-size: 14px; color: var(--gray-600);">Monthly Expenses</div>
                                            <div style="font-size: 20px; font-weight: 600; color: var(--danger-red);" id="compare-ltr-expenses-display">-$925</div>
                                        </div>
                                        <div style="padding-top: 12px; border-top: 1px solid var(--gray-300);">
                                            <div style="font-size: 14px; color: var(--gray-600);">Net Income</div>
                                            <div style="font-size: 28px; font-weight: 700; color: var(--success-green);" id="compare-ltr-net">$2,875</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Winner Card -->
                                    <div style="background: linear-gradient(135deg, #FEF3C7, #FDE68A); padding: 20px; border-radius: 12px;">
                                        <h4 style="color: var(--warning-orange); margin-bottom: 16px;">
                                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20" style="vertical-align: middle;">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            Winner: <span id="compare-winner">STR</span>
                                        </h4>
                                        <div style="margin-bottom: 12px;">
                                            <div style="font-size: 14px; color: var(--gray-700);">Monthly Advantage</div>
                                            <div style="font-size: 24px; font-weight: 700; color: var(--warning-orange);" id="compare-advantage">+$1,128</div>
                                        </div>
                                        <div>
                                            <div style="font-size: 14px; color: var(--gray-700);">Annual Difference</div>
                                            <div style="font-size: 20px; font-weight: 600;" id="compare-annual">+$13,536/year</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Visual Comparison Chart -->
                                <div class="card" style="background: var(--gray-50);">
                                    <h4 style="margin-bottom: 20px;">Monthly Cash Flow Comparison</h4>
                                    <div id="comparison-chart" style="height: 300px;">
                                        <svg width="100%" height="300" viewBox="0 0 800 300" preserveAspectRatio="xMidYMid meet">
                                            <!-- Y-axis -->
                                            <line x1="60" y1="20" x2="60" y2="250" stroke="#E5E7EB" stroke-width="2"/>
                                            <line x1="60" y1="250" x2="740" y2="250" stroke="#E5E7EB" stroke-width="2"/>
                                            
                                            <!-- Grid lines -->
                                            <line x1="60" y1="70" x2="740" y2="70" stroke="#E5E7EB" stroke-width="1" opacity="0.5"/>
                                            <line x1="60" y1="120" x2="740" y2="120" stroke="#E5E7EB" stroke-width="1" opacity="0.5"/>
                                            <line x1="60" y1="170" x2="740" y2="170" stroke="#E5E7EB" stroke-width="1" opacity="0.5"/>
                                            
                                            <!-- Y-axis labels -->
                                            <text x="50" y="75" text-anchor="end" font-size="12" fill="#6B7280">$6k</text>
                                            <text x="50" y="125" text-anchor="end" font-size="12" fill="#6B7280">$4k</text>
                                            <text x="50" y="175" text-anchor="end" font-size="12" fill="#6B7280">$2k</text>
                                            <text x="50" y="255" text-anchor="end" font-size="12" fill="#6B7280">$0</text>
                                            
                                            <!-- STR Bar -->
                                            <rect x="200" y="100" width="120" height="150" fill="#8B5CF6" rx="8" id="compare-str-bar"/>
                                            <text x="260" y="90" text-anchor="middle" font-size="14" font-weight="600" fill="#1F2937">STR</text>
                                            <text x="260" y="240" text-anchor="middle" font-size="18" font-weight="700" fill="white" id="compare-str-bar-value">$4,003</text>
                                            
                                            <!-- LTR Bar -->
                                            <rect x="480" y="130" width="120" height="120" fill="#3B82F6" rx="8" id="compare-ltr-bar"/>
                                            <text x="540" y="120" text-anchor="middle" font-size="14" font-weight="600" fill="#1F2937">LTR</text>
                                            <text x="540" y="240" text-anchor="middle" font-size="18" font-weight="700" fill="white" id="compare-ltr-bar-value">$2,875</text>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            </div> <!-- End Center Content Area -->
            
            <!-- Right Sidebar: Financial Assumptions -->
            <aside class="sidebar-right">
                <div style="background: white; border: 1px solid var(--gray-200); border-radius: 12px; padding: 20px;">
                    <h3 class="h3" style="margin-bottom: 20px;">
                        Financial Assumptions 
                        <span class="info-icon" title="Adjust these values to see how changes affect your returns">?</span>
                    </h3>
                    
                    <div style="display: flex; flex-direction: column; gap: 24px;">
                        <!-- Revenue Assumptions -->
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--gray-200);">
                                📊 Revenue Assumptions
                            </h4>
                            
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <div>
                                    <label class="small" style="display: block; margin-bottom: 4px;">STR Nightly Rate</label>
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <input type="range" id="strNightlySlider" min="100" max="600" value="363" style="flex: 1;">
                                        <span id="strNightlyValue" style="min-width: 60px; text-align: right; font-weight: 600;">$363</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="small" style="display: block; margin-bottom: 4px;">STR Occupancy Rate</label>
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <input type="range" id="strOccupancySlider" min="40" max="95" value="75" style="flex: 1;">
                                        <span id="strOccupancyValue" style="min-width: 40px; text-align: right; font-weight: 600;">75%</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="small" style="display: block; margin-bottom: 4px;">Long-term Monthly Rent</label>
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <input type="range" id="ltrRentSlider" min="2000" max="8000" value="4000" style="flex: 1;">
                                        <span id="ltrRentValue" style="min-width: 70px; text-align: right; font-weight: 600;">$4,000</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Expense Assumptions -->
                        <div>
                            <h4 style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--gray-200);">
                                💰 Operating Expenses
                            </h4>
                            
                            <div style="display: flex; flex-direction: column; gap: 16px;">
                                <div>
                                    <label class="small" style="display: block; margin-bottom: 4px;">Property Management Fee</label>
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <input type="range" id="mgmtFeeSlider" min="0" max="30" value="25" style="flex: 1;">
                                        <span id="mgmtFeeValue" style="min-width: 40px; text-align: right; font-weight: 600;">25%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Financing Toggle and Options -->
                        <div>
                            <div class="toggle-container">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="financingToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label">Include Financing (uncheck for cash purchase)</span>
                            </div>
                            
                            <div id="financingSection" class="financing-section">
                                <h4 style="font-size: 14px; font-weight: 600; color: var(--gray-700); margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--gray-200);">
                                    🏦 Financing Assumptions
                                </h4>
                                
                                <div style="display: flex; flex-direction: column; gap: 16px;">
                                    <div>
                                        <label class="small" style="display: block; margin-bottom: 4px;">Down Payment</label>
                                        <div style="display: flex; align-items: center; gap: 12px;">
                                            <input type="range" id="downPaymentSlider" min="5" max="100" value="20" style="flex: 1;">
                                            <span id="downPaymentValue" style="min-width: 40px; text-align: right; font-weight: 600;">20%</span>
                                        </div>
                                        <div class="small" style="margin-top: 4px;">Amount: <span id="downPaymentAmount" style="font-weight: 600;">$169,980</span></div>
                                    </div>
                                    
                                    <div>
                                        <label class="small" style="display: block; margin-bottom: 4px;">Interest Rate</label>
                                        <div style="display: flex; align-items: center; gap: 12px;">
                                            <input type="range" id="interestRateSlider" min="3" max="8" value="6.5" step="0.1" style="flex: 1;">
                                            <span id="interestRateValue" style="min-width: 50px; text-align: right; font-weight: 600;">6.5%</span>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="small" style="display: block; margin-bottom: 4px;">Loan Term</label>
                                        <div style="display: flex; align-items: center; gap: 12px;">
                                            <input type="range" id="loanTermSlider" min="1" max="30" value="30" step="1" style="flex: 1;">
                                            <span id="loanTermValue" style="min-width: 60px; text-align: right; font-weight: 600;">30 years</span>
                                        </div>
                                    </div>
                                    
                                    <div style="padding: 12px; background: var(--gray-50); border-radius: 8px;">
                                        <div class="small" style="color: var(--gray-600);">Monthly Mortgage Payment</div>
                                        <div class="h2" style="color: var(--danger-red);" id="mortgagePayment">-$4,269</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div style="display: flex; gap: 12px; padding-top: 12px; border-top: 1px solid var(--gray-200);">
                            <button id="resetBtn" style="flex: 1; padding: 10px; background: var(--gray-100); color: var(--gray-700); border: 1px solid var(--gray-300); border-radius: 8px; font-weight: 500; cursor: pointer;">
                                Reset to Defaults
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Summary Metrics -->
                <div style="background: white; border: 1px solid var(--gray-200); border-radius: 12px; padding: 20px; margin-top: 16px;">
                    <h3 class="h3" style="margin-bottom: 20px;">Key Metrics</h3>
                    <div style="display: flex; flex-direction: column; gap: 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--gray-50); border-radius: 8px;">
                            <span class="small" style="color: var(--gray-600);">STR Revenue</span>
                            <span class="h3" style="color: var(--gray-900);" id="strRevenueSum">$132,000/yr</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--gray-50); border-radius: 8px;">
                            <span class="small" style="color: var(--gray-600);">Total Expenses</span>
                            <span class="h3" style="color: var(--danger-red);" id="totalExpensesSum">-$30,000/yr</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 8px; color: white;">
                            <span class="small" style="color: white; opacity: 0.9;">Net Income</span>
                            <span class="h3" style="color: white;" id="netIncomeSum">$102,000/yr</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--gray-50); border-radius: 8px;">
                            <span class="small" style="color: var(--gray-600);">Cash-on-Cash</span>
                            <span class="h3" style="color: var(--primary-blue);" id="cashOnCash">60.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--gray-50); border-radius: 8px;">
                            <span class="small" style="color: var(--gray-600);">Cap Rate</span>
                            <span class="h3" style="color: var(--primary-blue);" id="capRate">12.0%</span>
                        </div>
                    </div>
                </div>
            </aside>
            
        </div> <!-- End Grid Container -->
    </main>
    
    <script>
        // Helper function to safely update text content
        function safeTextUpdate(elementId, text) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = text;
            }
        }
        
        // Sidebar Navigation Functions
        function handleNavClick(button, section) {
            console.log('Navigating to section:', section);
            
            // Remove active class from all buttons
            document.querySelectorAll('.sidebar-nav-item').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            button.classList.add('active');
            
            // Get all sections
            const propertyHero = document.getElementById('property-hero-section');
            const strContent = document.getElementById('str-analysis-content');
            const ltrSection = document.getElementById('ltr-analysis-section');
            const strVsLtrSection = document.getElementById('str-vs-ltr-section');
            const financialCalcSection = document.getElementById('financial-calculator-section');
            
            // Handle navigation based on section
            if (section === 'ltr') {
                console.log('Showing LTR section');
                // Hide all other sections
                if (propertyHero) propertyHero.style.display = 'none';
                if (strContent) strContent.style.display = 'none';
                if (strVsLtrSection) strVsLtrSection.style.display = 'none';
                if (financialCalcSection) financialCalcSection.style.display = 'none';
                // Show LTR section
                if (ltrSection) ltrSection.style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
            } else if (section === 'comparison') {
                console.log('Showing STR vs LTR comparison');
                // Hide all other sections
                if (propertyHero) propertyHero.style.display = 'none';
                if (strContent) strContent.style.display = 'none';
                if (ltrSection) ltrSection.style.display = 'none';
                if (financialCalcSection) financialCalcSection.style.display = 'none';
                // Show STR vs LTR section
                if (strVsLtrSection) {
                    strVsLtrSection.style.display = 'block';
                    // Initialize the scorecard
                    setTimeout(() => {
                        if (typeof updateScorecard === 'function') {
                            updateScorecard();
                        }
                    }, 100);
                }
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
            } else if (section === 'str') {
                console.log('Showing STR section only');
                // Show property hero and STR content, hide other sections
                if (propertyHero) propertyHero.style.display = 'block';
                if (ltrSection) ltrSection.style.display = 'none';
                if (strVsLtrSection) strVsLtrSection.style.display = 'none';
                if (financialCalcSection) financialCalcSection.style.display = 'none';
                // Show STR content
                if (strContent) strContent.style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
            } else if (section === 'overview' || section === 'investment') {
                console.log('Showing overview sections');
                // Show property hero and STR content for overview
                if (propertyHero) propertyHero.style.display = '';
                if (strContent) strContent.style.display = 'block';
                // Hide other sections
                if (ltrSection) ltrSection.style.display = 'none';
                if (strVsLtrSection) strVsLtrSection.style.display = 'none';
                if (financialCalcSection) financialCalcSection.style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
            } else if (section === 'financial') {
                console.log('Showing financial calculator');
                // Hide all other sections
                if (propertyHero) propertyHero.style.display = 'none';
                if (strContent) strContent.style.display = 'none';
                if (ltrSection) ltrSection.style.display = 'none';
                if (strVsLtrSection) strVsLtrSection.style.display = 'none';
                // Show Financial Calculator section
                if (financialCalcSection) {
                    financialCalcSection.style.display = 'block';
                    // Initialize calculator if needed
                    setTimeout(() => {
                        if (typeof updateDedicatedFinancialCalculator === 'function') {
                            updateDedicatedFinancialCalculator();
                        }
                    }, 100);
                }
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            
            console.log('Navigating to:', section);
        }
        
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar-left');
            const gridContainer = document.querySelector('.main-layout-grid');
            const collapseBtn = sidebar.querySelector('button[onclick="toggleSidebar()"] svg');
            
            if (gridContainer.classList.contains('sidebar-collapsed')) {
                // Expand
                gridContainer.classList.remove('sidebar-collapsed');
                sidebar.classList.remove('sidebar-collapsed');
                collapseBtn.style.transform = 'rotate(0deg)';
                
                // Show text after animation
                setTimeout(() => {
                    sidebar.querySelectorAll('.sidebar-nav-item span, nav + div').forEach(el => {
                        el.style.display = '';
                    });
                }, 150);
            } else {
                // Collapse
                sidebar.querySelectorAll('.sidebar-nav-item span, nav + div').forEach(el => {
                    el.style.display = 'none';
                });
                
                gridContainer.classList.add('sidebar-collapsed');
                sidebar.classList.add('sidebar-collapsed');
                collapseBtn.style.transform = 'rotate(180deg)';
            }
        }
        
        // Constants
        const PROPERTY_PRICE = 849900;
        
        // Calculate mortgage payment
        function calculateMortgage(principal, rate, years) {
            if (rate === 0) return principal / (years * 12);
            const monthlyRate = rate / 12;
            const numPayments = years * 12;
            return principal * (monthlyRate * Math.pow(1 + monthlyRate, numPayments)) / 
                   (Math.pow(1 + monthlyRate, numPayments) - 1);
        }
        
        // Update simple STR calculator
        function updateSimpleCalculator() {
            const nightlyRate = parseFloat(document.getElementById('nightlyRate').value);
            const occupancyRateValue = parseFloat(document.getElementById('occupancyRate').value);
            const occupancyRate = occupancyRateValue / 100;
            const cleaningFee = parseFloat(document.getElementById('cleaningFee').value);
            
            // Update display values
            document.getElementById('nightlyRateValue').textContent = `$${nightlyRate}`;
            document.getElementById('occupancyRateValue').textContent = `${occupancyRateValue}%`;
            document.getElementById('cleaningFeeValue').textContent = `$${cleaningFee}`;
            
            // Calculate monthly revenue using improved formula
            const nightsBooked = Math.round(30 * occupancyRate);
            const avgStayLength = 3; // Assume 3 nights average stay
            const estimatedBookings = Math.round((30 * occupancyRate) / avgStayLength);
            const monthlyRevenue = Math.round((nightlyRate * nightsBooked) + (cleaningFee * estimatedBookings));
            const annualRevenue = monthlyRevenue * 12;
            
            // Update display
            document.getElementById('monthlyRevenueResult').textContent = `$${monthlyRevenue.toLocaleString()}`;
            document.getElementById('nightsBookedText').textContent = `Based on ${nightsBooked} nights booked per month`;
            document.getElementById('annualRevenueCalc').textContent = `$${annualRevenue.toLocaleString()}`;
            
            const ltrRent = parseFloat(document.getElementById('ltrRentSlider').value);
            const vsLTR = Math.round(((monthlyRevenue - ltrRent) / ltrRent) * 100);
            document.getElementById('vsLTRCalc').textContent = vsLTR > 0 ? `+${vsLTR}%` : `${vsLTR}%`;
        }
        
        function updateFinancialCalculator() {
            // Safety check - return early if required elements don't exist
            if (!document.getElementById('strNightlySlider') || 
                !document.getElementById('strOccupancySlider') || 
                !document.getElementById('ltrRentSlider') || 
                !document.getElementById('mgmtFeeSlider')) {
                return;
            }
            
            // Get all input values
            const strNightlyRate = parseFloat(document.getElementById('strNightlySlider').value);
            const strOccupancy = parseFloat(document.getElementById('strOccupancySlider').value) / 100;
            const ltrRent = parseFloat(document.getElementById('ltrRentSlider').value);
            const mgmtFee = parseFloat(document.getElementById('mgmtFeeSlider').value) / 100;
            
            // Check if financing is enabled
            const financingEnabled = document.getElementById('financingToggle').checked;
            let mortgagePayment = 0;
            let downPaymentAmount = PROPERTY_PRICE; // Default to full price for cash purchase
            
            if (financingEnabled) {
                const downPaymentPercent = parseFloat(document.getElementById('downPaymentSlider').value) / 100;
                const interestRate = parseFloat(document.getElementById('interestRateSlider').value) / 100;
                const loanTerm = parseFloat(document.getElementById('loanTermSlider').value);
                
                downPaymentAmount = PROPERTY_PRICE * downPaymentPercent;
                const loanAmount = PROPERTY_PRICE - downPaymentAmount;
                
                // Calculate mortgage payment
                if (loanAmount > 0) {
                    mortgagePayment = calculateMortgage(loanAmount, interestRate, loanTerm);
                }
                
                // Update financing display
                safeTextUpdate('downPaymentAmount', `$${Math.round(downPaymentAmount).toLocaleString()}`);
                safeTextUpdate('mortgagePayment', `-$${Math.round(mortgagePayment).toLocaleString()}`);
            }
            
            // Calculate STR revenue and expenses
            const monthlyRevenue = strNightlyRate * 30.4 * strOccupancy;
            const monthlyMgmtFee = monthlyRevenue * mgmtFee;
            const monthlyOperatingExpenses = monthlyMgmtFee + 500; // Base operating expenses
            const strNetCashFlow = monthlyRevenue - mortgagePayment - monthlyOperatingExpenses;
            
            // Calculate LTR cash flow
            const ltrOperatingExpenses = 200; // Lower operating expenses for LTR
            const ltrNetCashFlow = ltrRent - mortgagePayment - ltrOperatingExpenses;
            
            // Update display values
            safeTextUpdate('strNightlyValue', `$${strNightlyRate}`);
            safeTextUpdate('strOccupancyValue', `${Math.round(strOccupancy * 100)}%`);
            safeTextUpdate('ltrRentValue', `$${ltrRent.toLocaleString()}`);
            safeTextUpdate('mgmtFeeValue', `${Math.round(mgmtFee * 100)}%`);
            
            if (financingEnabled) {
                const downPaymentSlider = document.getElementById('downPaymentSlider');
                const interestRateSlider = document.getElementById('interestRateSlider');
                const loanTermSlider = document.getElementById('loanTermSlider');
                
                if (downPaymentSlider) safeTextUpdate('downPaymentValue', `${downPaymentSlider.value}%`);
                if (interestRateSlider) safeTextUpdate('interestRateValue', `${interestRateSlider.value}%`);
                if (loanTermSlider) safeTextUpdate('loanTermValue', `${loanTermSlider.value} years`);
            }
            
            // Update bar chart
            const maxCashFlow = 10000;
            const strBarHeight = Math.max(10, Math.min(180, (strNetCashFlow / maxCashFlow) * 180));
            const strBarY = 230 - strBarHeight;
            
            const ltrBarHeight = Math.max(10, Math.min(180, (ltrNetCashFlow / maxCashFlow) * 180));
            const ltrBarY = 230 - ltrBarHeight;
            
            document.getElementById('strBar').setAttribute('height', strBarHeight);
            document.getElementById('strBar').setAttribute('y', strBarY);
            document.getElementById('strBar').setAttribute('fill', strNetCashFlow >= 0 ? '#10b981' : '#ef4444');
            document.getElementById('strBarValue').textContent = `$${Math.round(strNetCashFlow).toLocaleString()}`;
            document.getElementById('strBarValue').setAttribute('y', strBarY - 10);
            
            document.getElementById('ltrBar').setAttribute('height', ltrBarHeight);
            document.getElementById('ltrBar').setAttribute('y', ltrBarY);
            document.getElementById('ltrBar').setAttribute('fill', ltrNetCashFlow >= 0 ? '#6b7280' : '#ef4444');
            document.getElementById('ltrBarValue').textContent = `$${Math.round(ltrNetCashFlow).toLocaleString()}`;
            document.getElementById('ltrBarValue').setAttribute('y', ltrBarY - 10);
            
            // Update comparison metrics
            const strAdvantage = strNetCashFlow - ltrNetCashFlow;
            document.getElementById('strAdvantage').textContent = 
                strAdvantage >= 0 ? `+$${Math.round(strAdvantage).toLocaleString()}/mo` : 
                `-$${Math.abs(Math.round(strAdvantage)).toLocaleString()}/mo`;
            document.getElementById('annualDifference').textContent = 
                strAdvantage >= 0 ? `+$${Math.round(strAdvantage * 12).toLocaleString()}/yr` : 
                `-$${Math.abs(Math.round(strAdvantage * 12)).toLocaleString()}/yr`;
            
            // Update summary metrics
            const annualRevenue = monthlyRevenue * 12;
            const annualExpenses = (mortgagePayment + monthlyOperatingExpenses) * 12;
            const netAnnualIncome = annualRevenue - annualExpenses;
            
            document.getElementById('strRevenueSum').textContent = `$${Math.round(annualRevenue).toLocaleString()}/yr`;
            document.getElementById('totalExpensesSum').textContent = `-$${Math.round(annualExpenses).toLocaleString()}/yr`;
            document.getElementById('netIncomeSum').textContent = 
                netAnnualIncome >= 0 ? `$${Math.round(netAnnualIncome).toLocaleString()}/yr` : 
                `-$${Math.abs(Math.round(netAnnualIncome)).toLocaleString()}/yr`;
            
            // Calculate returns
            const cashOnCash = downPaymentAmount > 0 ? (netAnnualIncome / downPaymentAmount) * 100 : 0;
            const capRate = (netAnnualIncome / PROPERTY_PRICE) * 100;
            
            document.getElementById('cashOnCash').textContent = `${cashOnCash.toFixed(1)}%`;
            document.getElementById('capRate').textContent = `${capRate.toFixed(1)}%`;
            
            // Update top metrics
            document.getElementById('netCashFlowDisplay').textContent = 
                strNetCashFlow >= 0 ? `+$${Math.round(strNetCashFlow).toLocaleString()}` : 
                `-$${Math.abs(Math.round(strNetCashFlow)).toLocaleString()}`;
            document.getElementById('roiDisplay').textContent = `${cashOnCash.toFixed(1)}%`;
            
            // Update cash flow comparison cards
            document.getElementById('strRevenueCard').textContent = `+$${Math.round(monthlyRevenue).toLocaleString()}`;
            document.getElementById('strMortgageCard').textContent = `-$${Math.round(mortgagePayment).toLocaleString()}`;
            document.getElementById('strExpensesCard').textContent = `-$${Math.round(monthlyOperatingExpenses).toLocaleString()}`;
            document.getElementById('strCashFlowCard').textContent = 
                strNetCashFlow >= 0 ? `+$${Math.round(strNetCashFlow).toLocaleString()}` : 
                `-$${Math.abs(Math.round(strNetCashFlow)).toLocaleString()}`;
            document.getElementById('strCashFlowCard').className = strNetCashFlow >= 0 ? 
                'cashflow-value cashflow-total positive' : 'cashflow-value cashflow-total negative';
            
            document.getElementById('ltrRentCard').textContent = `+$${Math.round(ltrRent).toLocaleString()}`;
            document.getElementById('ltrMortgageCard').textContent = `-$${Math.round(mortgagePayment).toLocaleString()}`;
            document.getElementById('ltrCashFlowCard').textContent = 
                ltrNetCashFlow >= 0 ? `+$${Math.round(ltrNetCashFlow).toLocaleString()}` : 
                `-$${Math.abs(Math.round(ltrNetCashFlow)).toLocaleString()}`;
            document.getElementById('ltrCashFlowCard').className = ltrNetCashFlow >= 0 ? 
                'cashflow-value cashflow-total positive' : 'cashflow-value cashflow-total negative';
        }
        
        // Financing toggle handler
        document.getElementById('financingToggle').addEventListener('change', function() {
            const financingSection = document.getElementById('financingSection');
            if (this.checked) {
                financingSection.classList.remove('disabled');
            } else {
                financingSection.classList.add('disabled');
            }
            updateFinancialCalculator();
        });
        
        // Event listeners for simple calculator
        // Sync nightly rate
        const nightlyRateSlider = document.getElementById('nightlyRate');
        const nightlyRateInput = document.getElementById('nightlyRateInput');
        
        nightlyRateSlider.addEventListener('input', (e) => {
            nightlyRateInput.value = e.target.value;
            updateSimpleCalculator();
        });
        
        nightlyRateInput.addEventListener('input', (e) => {
            nightlyRateSlider.value = e.target.value;
            updateSimpleCalculator();
        });

        // Sync occupancy rate
        const occupancyRateSlider = document.getElementById('occupancyRate');
        const occupancyRateInput = document.getElementById('occupancyRateInput');
        
        occupancyRateSlider.addEventListener('input', (e) => {
            occupancyRateInput.value = e.target.value;
            updateSimpleCalculator();
        });
        
        occupancyRateInput.addEventListener('input', (e) => {
            occupancyRateSlider.value = e.target.value;
            updateSimpleCalculator();
        });

        // Sync cleaning fee
        const cleaningFeeSlider = document.getElementById('cleaningFee');
        const cleaningFeeInput = document.getElementById('cleaningFeeInput');
        
        cleaningFeeSlider.addEventListener('input', (e) => {
            cleaningFeeInput.value = e.target.value;
            updateSimpleCalculator();
        });
        
        cleaningFeeInput.addEventListener('input', (e) => {
            cleaningFeeSlider.value = e.target.value;
            updateSimpleCalculator();
        });
        
        // Event listeners for financial calculator sliders
        document.getElementById('strNightlySlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('strOccupancySlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('ltrRentSlider').addEventListener('input', function() {
            updateFinancialCalculator();
            updateSimpleCalculator(); // Also update simple calculator
        });
        document.getElementById('mgmtFeeSlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('downPaymentSlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('interestRateSlider').addEventListener('input', updateFinancialCalculator);
        document.getElementById('loanTermSlider').addEventListener('input', function() {
            const value = this.value;
            document.getElementById('loanTermValue').textContent = value === '1' ? '1 year' : `${value} years`;
            updateFinancialCalculator();
        });
        
        // Reset button
        document.getElementById('resetBtn').addEventListener('click', function() {
            // Reset simple calculator
            document.getElementById('nightlyRate').value = 185;
            document.getElementById('nightlyRateInput').value = 185;
            document.getElementById('occupancyRate').value = 75;
            document.getElementById('occupancyRateInput').value = 75;
            document.getElementById('cleaningFee').value = 85;
            document.getElementById('cleaningFeeInput').value = 85;
            
            // Reset financial calculator
            document.getElementById('strNightlySlider').value = 363;
            document.getElementById('strOccupancySlider').value = 75;
            document.getElementById('ltrRentSlider').value = 4000;
            document.getElementById('mgmtFeeSlider').value = 25;
            document.getElementById('downPaymentSlider').value = 20;
            document.getElementById('interestRateSlider').value = 6.5;
            document.getElementById('loanTermSlider').value = 30;
            document.getElementById('loanTermValue').textContent = '30 years';
            document.getElementById('financingToggle').checked = true;
            document.getElementById('financingSection').classList.remove('disabled');
            
            updateSimpleCalculator();
            updateFinancialCalculator();
        });
        
        // LTR Calculator Functions
        function updateLTRCalculator() {
            const monthlyRent = parseFloat(document.getElementById('ltrMonthlyRent').value);
            const vacancyRate = parseFloat(document.getElementById('ltrVacancyRate').value) / 100;
            const annualIncrease = parseFloat(document.getElementById('ltrAnnualIncrease').value) / 100;
            
            // Calculate effective annual income
            const effectiveMonthlyIncome = monthlyRent * (1 - vacancyRate);
            const annualIncome = effectiveMonthlyIncome * 12;
            
            // Calculate 5-year total with annual increases
            let total5Year = 0;
            for (let year = 0; year < 5; year++) {
                total5Year += annualIncome * Math.pow(1 + annualIncrease, year);
            }
            
            // Update displays for new 2-column layout
            document.getElementById('ltrMonthlyRentValue').textContent = `$${monthlyRent.toLocaleString()}`;
            document.getElementById('ltrVacancyRateValue').textContent = `${(vacancyRate * 100).toFixed(0)}%`;
            document.getElementById('ltrAnnualIncreaseValue').textContent = `${(annualIncrease * 100).toFixed(1)}%`;
            
            // Update effective monthly display
            const effectiveMonthlyEl = document.getElementById('ltrEffectiveMonthly');
            if (effectiveMonthlyEl) {
                effectiveMonthlyEl.textContent = `$${Math.round(effectiveMonthlyIncome).toLocaleString()}`;
            }
            
            document.getElementById('ltrAnnualIncome').textContent = `$${Math.round(annualIncome).toLocaleString()}`;
            
            // Update ltrEffectiveText if it exists (for old sections)
            const effectiveTextEl = document.getElementById('ltrEffectiveText');
            if (effectiveTextEl) {
                effectiveTextEl.textContent = `After ${(vacancyRate * 100).toFixed(0)}% vacancy rate`;
            }
            
            // Update 5-year total if it exists
            const total5YearEl = document.getElementById('ltr5YearTotal');
            if (total5YearEl) {
                total5YearEl.textContent = `$${Math.round(total5Year).toLocaleString()}`;
            }
            
            // Update 5-year chart if it exists
            updateLTRRevenueChart(monthlyRent, vacancyRate, annualIncrease);
            
            // Calculate STR comparison
            const strMonthlyRevenue = 5045; // Average STR monthly revenue
            const strAnnualRevenue = strMonthlyRevenue * 12;
            const monthlyDifference = effectiveMonthlyIncome - strMonthlyRevenue;
            const percentHigher = ((strMonthlyRevenue - effectiveMonthlyIncome) / effectiveMonthlyIncome * 100);
            
            // Update vs STR display for new layout
            document.getElementById('ltrVsSTR').textContent = `${monthlyDifference > 0 ? '+' : ''}$${Math.abs(Math.round(monthlyDifference)).toLocaleString()}/mo`;
            
            // Update comparison bars in right column
            const ltrCompareLTRValue = document.getElementById('ltrCompareLTRValue');
            const ltrCompareLTRBar = document.getElementById('ltrCompareLTRBar');
            const ltrPotentialHigher = document.getElementById('ltrPotentialHigher');
            
            if (ltrCompareLTRValue) {
                ltrCompareLTRValue.textContent = `$${Math.round(effectiveMonthlyIncome).toLocaleString()}`;
                
                // Update bar heights (max height 160px for STR)
                const maxRevenue = Math.max(strMonthlyRevenue, effectiveMonthlyIncome);
                const ltrBarHeight = (effectiveMonthlyIncome / maxRevenue) * 160;
                
                if (ltrCompareLTRBar && ltrCompareLTRBar.firstElementChild) {
                    ltrCompareLTRBar.firstElementChild.style.height = `${ltrBarHeight}px`;
                }
                
                // Update percentage higher text
                if (ltrPotentialHigher) {
                    ltrPotentialHigher.textContent = `${Math.round(percentHigher)}% higher`;
                }
            }
            
            // Update revenue comparison bars
            const ltrRevenueBarValue = document.getElementById('ltrRevenueBarValue');
            const ltrRevenueBarFill = document.getElementById('ltrRevenueBarFill');
            const ltrRevenueBarPercent = document.getElementById('ltrRevenueBarPercent');
            const revenueAdvantage = document.getElementById('revenueAdvantage');
            const revenueMultiple = document.getElementById('revenueMultiple');
            
            if (ltrRevenueBarValue) {
                ltrRevenueBarValue.textContent = `$${Math.round(annualIncome).toLocaleString()}/year`;
                
                const percentOfSTR = (annualIncome / strAnnualRevenue * 100);
                ltrRevenueBarFill.style.width = `${Math.min(percentOfSTR, 100)}%`;
                ltrRevenueBarPercent.textContent = `${Math.round(percentOfSTR)}%`;
                
                const revenueDiff = strAnnualRevenue - annualIncome;
                revenueAdvantage.textContent = `+$${Math.round(revenueDiff).toLocaleString()}/year`;
                
                const multiple = strAnnualRevenue / annualIncome;
                revenueMultiple.textContent = `${multiple.toFixed(1)}x higher revenue potential`;
            }
            
            // Update annual growth rate display
            const growthDisplay = document.getElementById('ltrAnnualGrowthRate');
            if (growthDisplay) {
                growthDisplay.textContent = `+${(annualIncrease * 100).toFixed(1)}%`;
            }
        }
        
        // Update LTR Revenue Chart
        function updateLTRRevenueChart(monthlyRent, vacancyRate, annualIncrease) {
            const chartBars = document.querySelectorAll('.ltr-bar');
            const chartValues = document.querySelectorAll('.ltr-value');
            
            if (chartBars.length === 0) return;
            
            let revenues = [];
            let maxRevenue = 0;
            
            // Calculate revenues for each year
            for (let year = 1; year <= 5; year++) {
                const yearlyRent = monthlyRent * 12 * Math.pow(1 + annualIncrease, year - 1);
                const effectiveRevenue = yearlyRent * (1 - vacancyRate);
                revenues.push(effectiveRevenue);
                maxRevenue = Math.max(maxRevenue, effectiveRevenue);
            }
            
            // Update bars and values
            revenues.forEach((revenue, index) => {
                if (chartBars[index] && chartValues[index]) {
                    // Calculate bar height (max height is 180px)
                    const barHeight = (revenue / maxRevenue) * 180;
                    const yPosition = 250 - barHeight;
                    
                    chartBars[index].setAttribute('height', barHeight);
                    chartBars[index].setAttribute('y', yPosition);
                    
                    // Update value text
                    chartValues[index].textContent = `$${Math.round(revenue/1000)}k`;
                    chartValues[index].setAttribute('y', yPosition - 10);
                }
            });
            
            // Update total
            const total5Year = revenues.reduce((sum, r) => sum + r, 0);
            const chartTotal = document.getElementById('ltr5YearChartTotal');
            if (chartTotal) {
                chartTotal.textContent = `$${Math.round(total5Year).toLocaleString()}`;
            }
        }
        
        // LTR Calculator Event Listeners
        if (document.getElementById('ltrMonthlyRent')) {
            document.getElementById('ltrMonthlyRent').addEventListener('input', updateLTRCalculator);
            document.getElementById('ltrVacancyRate').addEventListener('input', updateLTRCalculator);
            document.getElementById('ltrAnnualIncrease').addEventListener('input', updateLTRCalculator);
        }
        
        // Financial Calculator Functions
        let currentCalculatorMode = 'compare';
        const CALC_PROPERTY_PRICE = 849900;
        
        function setCalculatorMode(mode) {
            currentCalculatorMode = mode;
            console.log('Setting calculator mode to:', mode);
            
            // Update button styles
            const strBtn = document.getElementById('calcModeSTR');
            const ltrBtn = document.getElementById('calcModeLTR');
            const compareBtn = document.getElementById('calcModeCompare');
            
            // Reset all buttons
            [strBtn, ltrBtn, compareBtn].forEach(btn => {
                if (btn) {
                    btn.style.background = 'transparent';
                    btn.style.color = 'var(--gray-700)';
                }
            });
            
            // Style active button
            if (mode === 'str' && strBtn) {
                strBtn.style.background = 'linear-gradient(135deg, #8B5CF6, #A78BFA)';
                strBtn.style.color = 'white';
            } else if (mode === 'ltr' && ltrBtn) {
                ltrBtn.style.background = 'linear-gradient(135deg, #3B82F6, #60A5FA)';
                ltrBtn.style.color = 'white';
            } else if (mode === 'compare' && compareBtn) {
                compareBtn.style.background = 'var(--primary-blue)';
                compareBtn.style.color = 'white';
            }
            
            // Update calculator display based on mode
            const strContent = document.getElementById('str-mode-content');
            const ltrContent = document.getElementById('ltr-mode-content');
            const compareContent = document.getElementById('compare-mode-content');
            
            // Hide all content
            if (strContent) strContent.style.display = 'none';
            if (ltrContent) ltrContent.style.display = 'none';
            if (compareContent) compareContent.style.display = 'none';
            
            // Show selected content
            if (mode === 'str' && strContent) {
                strContent.style.display = 'block';
                updateSTRModeCalculator();
            } else if (mode === 'ltr' && ltrContent) {
                ltrContent.style.display = 'block';
                updateLTRModeCalculator();
            } else if (mode === 'compare' && compareContent) {
                compareContent.style.display = 'block';
                updateComparisonCalculator();
            }
        }
        
        // STR Mode Calculator
        function updateSTRModeCalculator() {
            const nightly = parseFloat(document.getElementById('calc-str-nightly')?.value || 185);
            const occupancy = parseFloat(document.getElementById('calc-str-occupancy')?.value || 75) / 100;
            const cleaningFee = parseFloat(document.getElementById('calc-str-cleaning')?.value || 75);
            const managementFee = parseFloat(document.getElementById('calc-str-management')?.value || 25) / 100;
            const cleaningCost = parseFloat(document.getElementById('calc-str-cleaning-cost')?.value || 60);
            const utilities = parseFloat(document.getElementById('calc-str-utilities')?.value || 250);
            
            // Calculate revenue
            const nightsPerMonth = 30 * occupancy;
            const roomRevenue = nightly * nightsPerMonth;
            const cleaningRevenue = cleaningFee * (nightsPerMonth / 3); // Assume avg 3-night stays
            const monthlyRevenue = roomRevenue + cleaningRevenue;
            
            // Calculate expenses
            const managementExpense = monthlyRevenue * managementFee;
            const cleaningExpense = cleaningCost * (nightsPerMonth / 3);
            const monthlyExpenses = managementExpense + cleaningExpense + utilities;
            
            // Calculate net income
            const netMonthly = monthlyRevenue - monthlyExpenses;
            const annualROI = (netMonthly * 12 / CALC_PROPERTY_PRICE) * 100;
            
            // Update display
            if (document.getElementById('calc-str-nightly-value')) {
                document.getElementById('calc-str-nightly-value').textContent = `$${nightly}/night`;
                document.getElementById('calc-str-occupancy-value').textContent = `${(occupancy * 100).toFixed(0)}%`;
                document.getElementById('calc-str-cleaning-value').textContent = `$${cleaningFee}`;
                document.getElementById('calc-str-management-value').textContent = `${(managementFee * 100).toFixed(0)}%`;
                document.getElementById('calc-str-cleaning-cost-value').textContent = `$${cleaningCost}/clean`;
                document.getElementById('calc-str-utilities-value').textContent = `$${utilities}/mo`;
                
                document.getElementById('calc-str-monthly-revenue').textContent = `$${Math.round(monthlyRevenue).toLocaleString()}`;
                document.getElementById('calc-str-monthly-expenses').textContent = `-$${Math.round(monthlyExpenses).toLocaleString()}`;
                document.getElementById('calc-str-net-monthly').textContent = `$${Math.round(netMonthly).toLocaleString()}`;
                document.getElementById('calc-str-roi').textContent = `${annualROI.toFixed(1)}%`;
            }
        }
        
        // LTR Mode Calculator
        function updateLTRModeCalculator() {
            const monthlyRent = parseFloat(document.getElementById('calc-ltr-rent')?.value || 4000);
            const vacancyRate = parseFloat(document.getElementById('calc-ltr-vacancy')?.value || 5) / 100;
            const annualIncrease = parseFloat(document.getElementById('calc-ltr-increase')?.value || 2.5) / 100;
            const propertyTax = parseFloat(document.getElementById('calc-ltr-tax')?.value || 7200);
            const insurance = parseFloat(document.getElementById('calc-ltr-insurance')?.value || 1500);
            const maintenance = parseFloat(document.getElementById('calc-ltr-maintenance')?.value || 200);
            
            // Calculate effective rent
            const effectiveRent = monthlyRent * (1 - vacancyRate);
            
            // Calculate monthly expenses
            const monthlyTax = propertyTax / 12;
            const monthlyInsurance = insurance / 12;
            const monthlyExpenses = monthlyTax + monthlyInsurance + maintenance;
            
            // Calculate net income
            const netMonthly = effectiveRent - monthlyExpenses;
            const capRate = (netMonthly * 12 / CALC_PROPERTY_PRICE) * 100;
            
            // Update display
            if (document.getElementById('calc-ltr-rent-value')) {
                document.getElementById('calc-ltr-rent-value').textContent = `$${monthlyRent.toLocaleString()}/month`;
                document.getElementById('calc-ltr-vacancy-value').textContent = `${(vacancyRate * 100).toFixed(0)}%`;
                document.getElementById('calc-ltr-increase-value').textContent = `${(annualIncrease * 100).toFixed(1)}%`;
                document.getElementById('calc-ltr-tax-value').textContent = `$${propertyTax.toLocaleString()}/year`;
                document.getElementById('calc-ltr-insurance-value').textContent = `$${insurance.toLocaleString()}/year`;
                document.getElementById('calc-ltr-maintenance-value').textContent = `$${maintenance}/mo`;
                
                document.getElementById('calc-ltr-effective-rent').textContent = `$${Math.round(effectiveRent).toLocaleString()}`;
                document.getElementById('calc-ltr-monthly-expenses').textContent = `-$${Math.round(monthlyExpenses).toLocaleString()}`;
                document.getElementById('calc-ltr-net-monthly').textContent = `$${Math.round(netMonthly).toLocaleString()}`;
                document.getElementById('calc-ltr-cap-rate').textContent = `${capRate.toFixed(1)}%`;
            }
        }
        
        // Comparison Mode Calculator
        function updateComparisonCalculator() {
            // STR calculations
            const strNightly = parseFloat(document.getElementById('compare-str-nightly')?.value || 185);
            const strOccupancy = parseFloat(document.getElementById('compare-str-occupancy')?.value || 75) / 100;
            const strManagement = parseFloat(document.getElementById('compare-str-management')?.value || 25) / 100;
            
            const strMonthlyRevenue = strNightly * 30 * strOccupancy;
            const strMonthlyExpenses = strMonthlyRevenue * strManagement;
            const strNetMonthly = strMonthlyRevenue - strMonthlyExpenses;
            
            // LTR calculations
            const ltrRent = parseFloat(document.getElementById('compare-ltr-rent')?.value || 4000);
            const ltrVacancy = parseFloat(document.getElementById('compare-ltr-vacancy')?.value || 5) / 100;
            const ltrExpenses = parseFloat(document.getElementById('compare-ltr-expenses')?.value || 925);
            
            const ltrMonthlyRevenue = ltrRent * (1 - ltrVacancy);
            const ltrNetMonthly = ltrMonthlyRevenue - ltrExpenses;
            
            // Calculate winner
            const monthlyAdvantage = strNetMonthly - ltrNetMonthly;
            const winner = monthlyAdvantage > 0 ? 'STR' : 'LTR';
            
            // Update display values
            if (document.getElementById('compare-str-nightly-value')) {
                document.getElementById('compare-str-nightly-value').textContent = `$${strNightly}/night`;
                document.getElementById('compare-str-occupancy-value').textContent = `${(strOccupancy * 100).toFixed(0)}%`;
                document.getElementById('compare-str-management-value').textContent = `${(strManagement * 100).toFixed(0)}%`;
                
                document.getElementById('compare-ltr-rent-value').textContent = `$${ltrRent.toLocaleString()}/month`;
                document.getElementById('compare-ltr-vacancy-value').textContent = `${(ltrVacancy * 100).toFixed(0)}%`;
                document.getElementById('compare-ltr-expenses-value').textContent = `$${ltrExpenses}/month`;
                
                document.getElementById('compare-str-revenue').textContent = `$${Math.round(strMonthlyRevenue).toLocaleString()}`;
                document.getElementById('compare-str-expenses').textContent = `-$${Math.round(strMonthlyExpenses).toLocaleString()}`;
                document.getElementById('compare-str-net').textContent = `$${Math.round(strNetMonthly).toLocaleString()}`;
                
                document.getElementById('compare-ltr-revenue').textContent = `$${Math.round(ltrMonthlyRevenue).toLocaleString()}`;
                document.getElementById('compare-ltr-expenses-display').textContent = `-$${Math.round(ltrExpenses).toLocaleString()}`;
                document.getElementById('compare-ltr-net').textContent = `$${Math.round(ltrNetMonthly).toLocaleString()}`;
                
                document.getElementById('compare-winner').textContent = winner;
                document.getElementById('compare-advantage').textContent = `${monthlyAdvantage > 0 ? '+' : ''}$${Math.abs(Math.round(monthlyAdvantage)).toLocaleString()}`;
                document.getElementById('compare-annual').textContent = `${monthlyAdvantage > 0 ? '+' : ''}$${Math.abs(Math.round(monthlyAdvantage * 12)).toLocaleString()}/year`;
                
                // Update bar chart
                updateComparisonChart(strNetMonthly, ltrNetMonthly);
            }
        }
        
        // Update comparison chart
        function updateComparisonChart(strValue, ltrValue) {
            const maxValue = Math.max(strValue, ltrValue, 6000);
            const strBar = document.getElementById('compare-str-bar');
            const ltrBar = document.getElementById('compare-ltr-bar');
            const strBarValue = document.getElementById('compare-str-bar-value');
            const ltrBarValue = document.getElementById('compare-ltr-bar-value');
            
            if (strBar && ltrBar) {
                // Calculate bar heights (max 180px)
                const strHeight = (strValue / maxValue) * 180;
                const ltrHeight = (ltrValue / maxValue) * 180;
                
                strBar.setAttribute('height', strHeight);
                strBar.setAttribute('y', 250 - strHeight);
                
                ltrBar.setAttribute('height', ltrHeight);
                ltrBar.setAttribute('y', 250 - ltrHeight);
                
                strBarValue.textContent = `$${Math.round(strValue / 1000).toFixed(1)}k`;
                ltrBarValue.textContent = `$${Math.round(ltrValue / 1000).toFixed(1)}k`;
            }
        }
        
        // Initialize Financial Calculator Event Listeners
        function initializeFinancialCalculator() {
            // Mode buttons
            const strBtn = document.getElementById('calcModeSTR');
            const ltrBtn = document.getElementById('calcModeLTR');
            const compareBtn = document.getElementById('calcModeCompare');
            
            if (strBtn) strBtn.addEventListener('click', () => setCalculatorMode('str'));
            if (ltrBtn) ltrBtn.addEventListener('click', () => setCalculatorMode('ltr'));
            if (compareBtn) compareBtn.addEventListener('click', () => setCalculatorMode('compare'));
            
            // STR Mode inputs
            const strInputs = ['calc-str-nightly', 'calc-str-occupancy', 'calc-str-cleaning', 
                              'calc-str-management', 'calc-str-cleaning-cost', 'calc-str-utilities'];
            strInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) input.addEventListener('input', updateSTRModeCalculator);
            });
            
            // LTR Mode inputs
            const ltrInputs = ['calc-ltr-rent', 'calc-ltr-vacancy', 'calc-ltr-increase',
                              'calc-ltr-tax', 'calc-ltr-insurance', 'calc-ltr-maintenance'];
            ltrInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) input.addEventListener('input', updateLTRModeCalculator);
            });
            
            // Comparison Mode inputs
            const compareInputs = ['compare-str-nightly', 'compare-str-occupancy', 'compare-str-management',
                                  'compare-ltr-rent', 'compare-ltr-vacancy', 'compare-ltr-expenses'];
            compareInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) input.addEventListener('input', updateComparisonCalculator);
            });
            
            // Initialize with compare mode
            setCalculatorMode('compare');
        }
        
        function updateDedicatedFinancialCalculator() {
            // Placeholder function - will be implemented with full calculator
            console.log('Updating financial calculator');
        }
        
        // Scorecard Functions for STR vs LTR
        function updateScorecard() {
            const time = parseFloat(document.getElementById('timeSlider').value);
            const risk = parseFloat(document.getElementById('riskSlider').value);
            const goals = parseFloat(document.getElementById('goalSlider').value);
            const tourism = parseFloat(document.getElementById('tourismSlider').value);
            
            // Update value displays
            document.getElementById('timeValue').textContent = time + ' hours';
            document.getElementById('riskValue').textContent = risk <= 2 ? 'Conservative' : risk <= 3 ? 'Moderate' : 'Aggressive';
            document.getElementById('goalValue').textContent = goals <= 2 ? 'Cash Flow' : goals <= 3 ? 'Balanced' : 'Appreciation';
            document.getElementById('tourismValue').textContent = tourism <= 2 ? 'Weak' : tourism <= 3 ? 'Moderate' : tourism >= 4 ? 'Strong' : 'Very Strong';
            
            // Calculate scores
            const strScore = calculateStrScore(time, risk, goals, tourism);
            const ltrScore = calculateLtrScore(time, risk, goals, tourism);
            
            // Determine recommendation
            const isSTR = strScore > ltrScore;
            const score = isSTR ? strScore : ltrScore;
            
            // Update recommendation display
            const box = document.getElementById('recommendationBox');
            const title = document.getElementById('recommendationTitle');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const scoreBar = document.getElementById('scoreBar');
            const text = document.getElementById('recommendationText');
            const factors = document.getElementById('factorsList');
            
            if (isSTR) {
                box.style.background = 'linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%)';
                title.textContent = 'Short-Term Rental Recommended';
                text.textContent = `Based on your ${time > 20 ? 'high' : time > 10 ? 'moderate' : 'limited'} time availability and ${tourism >= 4 ? 'strong' : tourism >= 3 ? 'moderate' : 'weak'} local tourism, STR would generate significantly higher returns. ${time >= 10 ? 'With ' + time + ' hours per month, you can effectively manage the property or hire a management company.' : 'Consider hiring a property management company given your time constraints.'}`;
                
                factors.innerHTML = `
                    <li style="padding: 4px 0;">✓ ${tourism >= 4 ? 'Strong tourism market supports high occupancy' : tourism >= 3 ? 'Moderate tourism provides stable demand' : 'Tourism market requires careful marketing'}</li>
                    <li style="padding: 4px 0;">✓ ${time >= 20 ? 'Ample time for hands-on management' : time >= 10 ? 'Time commitment aligns with STR requirements' : 'Management company recommended'}</li>
                    <li style="padding: 4px 0;">✓ ${risk >= 4 ? 'Risk tolerance suits variable income' : 'Moderate risk profile balanced with high returns'}</li>
                `;
            } else {
                box.style.background = 'linear-gradient(135deg, #3B82F6 0%, #60A5FA 100%)';
                title.textContent = 'Long-Term Rental Recommended';
                text.textContent = `With your ${time <= 5 ? 'minimal' : time <= 10 ? 'limited' : 'moderate'} time availability and ${risk <= 2 ? 'conservative' : 'moderate'} risk tolerance, LTR provides stable, passive income with minimal management requirements.`;
                
                factors.innerHTML = `
                    <li style="padding: 4px 0;">✓ ${time <= 10 ? 'Minimal time commitment required' : 'Passive income stream'}</li>
                    <li style="padding: 4px 0;">✓ ${risk <= 2 ? 'Conservative approach with stable returns' : 'Predictable monthly income'}</li>
                    <li style="padding: 4px 0;">✓ ${goals <= 2 ? 'Focus on steady cash flow achieved' : 'Long-term appreciation potential'}</li>
                `;
            }
            
            scoreDisplay.textContent = Math.round(score) + '/100';
            scoreBar.style.width = score + '%';
        }
        
        function calculateStrScore(time, risk, goals, tourism) {
            let score = 50; // Base score
            
            // Time factor (more time = better for STR)
            score += (time / 40) * 20; // Up to +20 points
            
            // Risk factor (higher risk tolerance = better for STR)
            score += (risk / 5) * 15; // Up to +15 points
            
            // Goals factor (cash flow focus = better for STR)
            score += goals <= 3 ? 10 : 5;
            
            // Tourism factor (stronger tourism = better for STR)
            score += (tourism / 5) * 20; // Up to +20 points
            
            return Math.min(100, Math.max(0, score));
        }
        
        function calculateLtrScore(time, risk, goals, tourism) {
            let score = 50; // Base score
            
            // Time factor (less time = better for LTR)
            score += ((40 - time) / 40) * 20; // Up to +20 points
            
            // Risk factor (lower risk tolerance = better for LTR)
            score += ((5 - risk) / 5) * 15; // Up to +15 points
            
            // Goals factor (appreciation focus = better for LTR)
            score += goals >= 3 ? 10 : 5;
            
            // Tourism factor (less important for LTR)
            score += 10; // Flat bonus since tourism doesn't affect LTR
            
            return Math.min(100, Math.max(0, score));
        }
        
        // Initial calculations
        updateSimpleCalculator();
        updateFinancialCalculator();
        if (document.getElementById('ltrMonthlyRent')) {
            updateLTRCalculator();
            initializeFinancialCalculator();
        }
    </script>
</body>
</html>