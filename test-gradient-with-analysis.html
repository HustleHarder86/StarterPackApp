<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gradient Test with Mock Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles/design-system.css">
    <link rel="stylesheet" href="styles/gradient-theme.css">
    <style>
        /* Force animated background */
        #animated-bg {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            z-index: 0 !important;
            background: linear-gradient(135deg, #f5f3ff 0%, #ffeef8 50%, #f0f9ff 100%) !important;
            pointer-events: none !important;
            display: block !important;
        }
        
        /* Ensure content is above gradient */
        body > *:not(#animated-bg) {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Animated gradient background -->
    <div id="animated-bg">
        <!-- Gradient mesh -->
        <div class="gradient-mesh"></div>
        
        <!-- Floating orbs -->
        <div class="orb w-96 h-96 gradient-primary floating" style="top: -10%; left: -10%;"></div>
        <div class="orb w-64 h-64 gradient-warning floating-delayed" style="top: 60%; right: -5%;"></div>
        <div class="orb w-80 h-80 gradient-success floating" style="bottom: -15%; left: 50%;"></div>
    </div>

    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-6">Gradient Test with Analysis</h1>
        
        <div class="card glass-card p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">Test Steps:</h2>
            <ol class="list-decimal list-inside space-y-2">
                <li>Check that gradient background is visible now</li>
                <li>Click "Load Analysis Results" to simulate what happens</li>
                <li>Observe if gradient disappears when results load</li>
            </ol>
        </div>
        
        <button onclick="loadMockAnalysis()" class="btn btn-primary">
            Load Analysis Results
        </button>
        
        <div id="analysis-results" class="mt-6"></div>
    </div>

    <script type="module">
        // Import the actual componentLoader
        import { componentLoader } from './js/modules/componentLoader.js';
        
        window.loadMockAnalysis = async function() {
            console.log('Loading mock analysis...');
            
            // Mock analysis data similar to what would be passed
            const mockAnalysisData = {
                propertyData: {
                    address: "123 Test Street",
                    price: 799000,
                    bedrooms: 3,
                    bathrooms: 2,
                    sqft: 1500
                },
                costs: {
                    mortgage: 3200,
                    propertyTax: 450,
                    insurance: 150,
                    utilities: 200,
                    maintenance: 300,
                    management: 0,
                    vacancy: 150,
                    total: 4450
                },
                longTermRental: {
                    monthlyRent: 3500,
                    yearlyIncome: 42000,
                    occupancyRate: 0.95,
                    netYearlyIncome: 39900,
                    cashFlow: -950,
                    capRate: 0.0499,
                    cashOnCash: -0.0475
                },
                strAnalysis: {
                    averageNightlyRate: 150,
                    occupancyRate: 0.65,
                    monthlyRevenue: 2925,
                    yearlyRevenue: 35100,
                    netIncome: 30600,
                    comparable: [{
                        title: "Similar Property 1",
                        price: 145,
                        rating: 4.8
                    }]
                },
                analysisType: 'both'
            };
            
            // Call the actual renderAnalysisResults function
            await componentLoader.renderAnalysisResults(mockAnalysisData, 'analysis-results');
        };
    </script>
</body>
</html>